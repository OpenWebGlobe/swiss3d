function h(a){throw a;}var i=void 0,l=null;function n(){return function(){}}function p(a){return function(b){this[a]=b}}function aa(a){return function(){return this[a]}}function t(a){return function(){return a}}var u,w=this;function ba(a){for(var a=a.split("."),b=w,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}function ca(){}
function da(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function ea(a){var b=da(a);return b=="array"||b=="object"&&typeof a.length=="number"}function fa(a){return typeof a=="string"}function ga(a){return a[ha]||(a[ha]=++ia)}var ha="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ia=0,ja=Date.now||function(){return+new Date};
function x(a,b){var c=a.split("."),d=w;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==i?d[e]=b:d=d[e]?d[e]:d[e]={}}function ka(a,b){function c(){}c.prototype=b.prototype;a.Fe=b.prototype;a.prototype=new c;a.prototype.constructor=a};var z=0,A=1,B=2,la=3,ma=4,na=5,oa=6,pa=7,qa=8,ra=9,sa=10,ta=11,ua=12,va=13,wa=14,xa=15,ya=16,za=17,Aa=18,Ba=19,C=20,Ca=21,Da=22,Ea=65533,Fa=65534,Ga=23,Ha=65535;x("OG_OBJECT_CONTEXT",z);x("OG_OBJECT_SCENE",A);x("OG_OBJECT_WORLD",B);x("OG_OBJECT_IMAGELAYER",la);x("OG_OBJECT_ELEVATIONLAYER",ma);x("OG_OBJECT_WAYPOINTLAYER",na);x("OG_OBJECT_GEOMETRYLAYER",pa);x("OG_OBJECT_VOXELLAYER",qa);x("OG_OBJECT_IMAGE",ra);x("OG_OBJECT_TEXTURE",sa);x("OG_OBJECT_PIXELBUFFER",ta);x("OG_OBJECT_GEOMETRY",ua);
x("OG_OBJECT_MESH",va);x("OG_OBJECT_SURFACE",wa);x("OG_OBJECT_CAMERA",xa);x("OG_OBJECT_TEXT",ya);x("OG_OBJECT_BINARYDATA",za);x("OG_OBJECT_LIGHT",Aa);x("OG_OBJECT_NAVIGATIONCONTROLLER",Ba);x("OG_OBJECT_POI",C);x("OG_OBJECT_BILLBOARD",Ca);x("OG_OBJECT_BILLBOARDLAYER",Da);x("OG_OBJECT_AOEIMAGELAYER",Ea);x("OG_OBJECT_AOEIMAGE",Fa);x("OG_OBJECT_INVALID",Ha);x("OG_RENDEREFFECT_RGB",0);x("OG_RENDEREFFECT_CHROMADEPTH",1);var D=1,Ia=2,Ja=3,Ka=4;x("OG_SCENE_3D_ELLIPSOID_WGS84",D);
x("OG_SCENE_3D_FLAT_CARTESIAN",Ia);x("OG_SCENE_2D_SCREEN",Ja);x("OG_SCENE_CUSTOM",Ka);var La=1,Ma=2;x("OG_OBJECT_READY",La);x("OG_OBJECT_BUSY",Ma);x("OG_OBJECT_FAILED",3);var E=[];function F(a){if(a==-1)return l;for(var b=0;b<E.length;b++)if(E[b].id==a)return E[b];return l}function G(){this.parent=l;this.name="ogObject";this.type=Ha;this.id=-1;this.status=La;this.F=this.G=l}G.prototype.Pa=n();function I(a){for(var a=a.id,b=0;b<E.length;b++)if(E[b].id==a){E[b].Pa();E.splice(b,1);break}}G.prototype.va=n();function Na(a){var b=Oa,c;for(c in b)a.call(i,b[c],c,b)}var Pa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function Qa(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<Pa.length;e++)b=Pa[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}};function Ra(a){this.stack=Error().stack||"";if(a)this.message=String(a)}ka(Ra,Error);Ra.prototype.name="CustomError";function Sa(a){for(var b=1;b<arguments.length;b++)var c=String(arguments[b]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,c);return a}function Ta(a){if(!Ua.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(Va,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(Wa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(Xa,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(Ya,"&quot;"));return a}var Va=/&/g,Wa=/</g,Xa=/>/g,Ya=/\"/g,Ua=/[&<>\"]/;
function Za(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var j=d[g]||"",k=e[g]||"",m=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var r=m.exec(j)||["","",""],o=q.exec(k)||["","",""];if(r[0].length==0&&o[0].length==0)break;c=$a(r[1].length==0?0:parseInt(r[1],10),o[1].length==0?0:parseInt(o[1],10))||$a(r[2].length==0,o[2].length==0)||$a(r[2],o[2])}while(c==
0)}return c}function $a(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function ab(a,b){b.unshift(a);Ra.call(this,Sa.apply(l,b));b.shift();this.En=a}ka(ab,Ra);ab.prototype.name="AssertionError";function bb(a){h(new ab("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var cb=Array.prototype,db=cb.indexOf?function(a,b,c){return cb.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:c<0?Math.max(0,a.length+c):c;if(fa(a)){if(!fa(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},eb=cb.forEach?function(a,b,c){cb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=fa(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};var fb="StopIteration"in w?w.StopIteration:Error("StopIteration");function gb(){}gb.prototype.next=function(){h(fb)};gb.prototype.Ih=function(){return this};function hb(a){if(a instanceof gb)return a;if(typeof a.Ih=="function")return a.Ih(!1);if(ea(a)){var b=0,c=new gb;c.next=function(){for(;;)if(b>=a.length&&h(fb),b in a)return a[b++];else b++};return c}h(Error("Not implemented"))}
function ib(a,b){if(ea(a))try{eb(a,b,i)}catch(c){c!==fb&&h(c)}else{a=hb(a);try{for(;;)b.call(i,a.next(),i,a)}catch(d){d!==fb&&h(d)}}};function jb(a){this.cd={};this.Ka=[];var b=arguments.length;if(b>1){b%2&&h(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){var d;if(a instanceof jb){c=kb(a);lb(a);d=[];for(b=0;b<a.Ka.length;b++)d.push(a.cd[a.Ka[b]])}else{var b=[],e=0;for(c in a)b[e++]=c;c=b;b=[];e=0;for(d in a)b[e++]=a[d];d=b}for(b=0;b<c.length;b++)this.set(c[b],d[b])}}u=jb.prototype;u.oa=0;u.jh=0;function kb(a){lb(a);return a.Ka.concat()}
u.clear=function(){this.cd={};this.jh=this.oa=this.Ka.length=0};function lb(a){if(a.oa!=a.Ka.length){for(var b=0,c=0;b<a.Ka.length;){var d=a.Ka[b];Object.prototype.hasOwnProperty.call(a.cd,d)&&(a.Ka[c++]=d);b++}a.Ka.length=c}if(a.oa!=a.Ka.length){for(var e={},c=b=0;b<a.Ka.length;)d=a.Ka[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Ka[c++]=d,e[d]=1),b++;a.Ka.length=c}}u.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.cd,a))return this.cd[a];return b};
u.set=function(a,b){Object.prototype.hasOwnProperty.call(this.cd,a)||(this.oa++,this.Ka.push(a),this.jh++);this.cd[a]=b};u.Ih=function(a){lb(this);var b=0,c=this.Ka,d=this.cd,e=this.jh,f=this,g=new gb;g.next=function(){for(;;){e!=f.jh&&h(Error("The map has changed since the iterator was created"));b>=c.length&&h(fb);var g=c[b++];return a?g:d[g]}};return g};function mb(a){return nb(a||arguments.callee.caller,[])}
function nb(a,b){var c=[];if(db(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(ob(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=ob(f))?f:"[fn]";break;default:f=typeof f}f.length>40&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(nb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ob(a){a=String(a);if(!pb[a]){var b=/function ([^\(]+)/.exec(a);pb[a]=b?b[1]:"[Anonymous]"}return pb[a]}var pb={};function qb(a,b,c,d,e){this.reset(a,b,c,d,e)}qb.prototype.Rm=0;qb.prototype.qk=l;qb.prototype.pk=l;var rb=0;qb.prototype.reset=function(a,b,c,d,e){this.Rm=typeof e=="number"?e:rb++;this.Pn=d||ja();this.vf=a;this.Dm=b;this.Bn=c;delete this.qk;delete this.pk};qb.prototype.cl=p("vf");function sb(a){this.Hm=a}sb.prototype.Zg=l;sb.prototype.vf=l;sb.prototype.ai=l;sb.prototype.sk=l;function tb(a,b){this.name=a;this.value=b}tb.prototype.toString=aa("name");var ub=new tb("WARNING",900),vb=new tb("INFO",800),wb=new tb("CONFIG",700);u=sb.prototype;u.getParent=aa("Zg");u.cl=p("vf");function xb(a){if(a.vf)return a.vf;if(a.Zg)return xb(a.Zg);bb("Root logger has no level set.");return l}
u.log=function(a,b,c){if(a.value>=xb(this).value){a=this.zm(a,b,c);this.zk("log:"+a.Dm);for(b=this;b;){var c=b,d=a;if(c.sk)for(var e=0,f=i;f=c.sk[e];e++)f(d);b=b.getParent()}}};
u.zm=function(a,b,c){var d=new qb(a,String(b),this.Hm);if(c){d.qk=c;var e;var f=arguments.callee.caller;try{var g;var j=ba("window.location.href");if(fa(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,m,q=!1;try{k=c.lineNumber||c.An||"Not available"}catch(r){k="Not available",q=!0}try{m=c.fileName||c.filename||c.sourceURL||j}catch(o){m="Not available",q=!0}g=q||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:m,stack:c.stack||"Not available"}:c}e="Message: "+Ta(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Ta(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ta(mb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.pk=e}return d};function J(a,b){a.log(ub,b,i)}u.info=function(a,b){this.log(vb,a,b)};u.zk=function(a){w.console&&w.console.markTimeline&&w.console.markTimeline(a)};
var yb={},zb=l;function K(a){zb||(zb=new sb(""),yb[""]=zb,zb.cl(wb));var b;if(!(b=yb[a])){b=new sb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=K(a.substr(0,c));if(!c.ai)c.ai={};c.ai[d]=b;b.Zg=c;yb[a]=b}return b};function Ab(){this.name="ogTexture";this.type=sa;this.f=l;this.il="";this.status=Ma}Ab.prototype=new G;
Ab.prototype.va=function(a){if(a==l)J(K("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==l)J(K("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=A)J(K("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.f=this.parent.parent.c.dh.rj(a.url,function(){b.status=La;b.G&&b.G(b.id)},function(){b.status=3;b.F&&b.F(b.id)},!1);this.il=a.url}};
Ab.prototype.Pa=function(){if(this.f)this.parent.parent.c.dh.tj(this.il),this.f=l,this.status=3};Ab.prototype.A=function(a,b,c){this.status==La&&this.f&&(c!=l?this.f.A(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.f.A(a,b))};var Bb=6378137,Cb=0.006694379990197,Db=0.006739496742,L=1.1920930376163766E-7;function M(a){return a*0.017453292519943295}function Eb(a){return a*57.29577951308232}function Fb(a){for(var b=1;a>b;)b*=2;return b};function Gb(){this.name="ogCamera";this.type=xa;this.Gb=this.pitch=this.ua=this.cc=this.ec=this.fc=0}Gb.prototype=new G;u=Gb.prototype;u.Pa=function(){this.Gb=this.pitch=this.ua=this.cc=this.ec=this.fc=0};u.ea=function(a,b,c){this.fc=a;this.ec=b;this.cc=c;this.parent.vd==this&&Hb(this).ea(a,b,c)};u.nd=function(){var a={};a.longitude=this.fc;a.latitude=this.ec;a.elevation=this.cc;return a};u.$d=function(a,b,c){this.ua=a;this.pitch=b;this.Gb=c;this==this.parent.vd&&Hb(this).$d(M(a),M(b),M(c))};
u.Re=function(){var a={};a.yaw=this.ua;a.pitch=this.pitch;a.roll=this.Gb;return a};u.og=function(a,b,c,d){this==this.parent.vd&&Hb(this).og(a,b,c,d)};function Hb(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.Hc)b=a.d.Hc;return b}function Ib(a){var b=Hb(a),c=b.nd(),b=b.Re();a.fc=c.longitude;a.ec=c.latitude;a.cc=c.elevation;a.ua=Eb(b.ua);a.pitch=Eb(b.pitch);a.Gb=Eb(b.Gb)};function N(a,b,c){this.a=new Float32Array([a||0,b||0,c||0])}u=N.prototype;u.q=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};u.Qe=aa("a");u.Le=function(){var a=new N;a.q(this.a[0],this.a[1],this.a[2]);return a};u.zl=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};u.Hh=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};u.Rl=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};
u.Cl=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Jb(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}u.Dl=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};u.vh=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return Math.sqrt(a+b+c)};
u.Ql=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return a+b+c};u.Lb=function(){var a=this.vh();a!=0&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};u.Nl=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};u.ae=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};x("Cross",Jb);x("vec3",N);N.prototype.Add=N.prototype.zl;N.prototype.Cross=N.prototype.Cl;N.prototype.Dot=N.prototype.Dl;N.prototype.Get=N.prototype.Qe;
N.prototype.Length=N.prototype.vh;N.prototype.Neg=N.prototype.Nl;N.prototype.Normalize=N.prototype.Lb;N.prototype.Set=N.prototype.q;N.prototype.SquaredLength=N.prototype.Ql;N.prototype.Subtract=N.prototype.Rl;N.prototype.Sub=N.prototype.Hh;N.prototype.ToString=N.prototype.ae;function O(){this.a=Array(16);this.dg();this.Xj=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}u=O.prototype;u.Oc=function(a){if(a.length==16)for(var b=0;b<16;b++)this.a[b]=a[b]};function Kb(a){for(var b=0;b<16;b++)a.Xj[b]=a.a[b];return a.Xj}u.Qe=aa("a");u.Le=function(){for(var a=new O,b=0;b<16;b++)a.a[b]=this.a[b];return a};u.R=function(a){for(var b=0;b<16;b++)this.a[b]=a.a[b]};
u.dg=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.Sl=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.wc=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.Bj=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};u.Nc=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return!0};
u.Eh=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};u.Ej=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
u.Fj=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
u.Ml=function(a,b,c,d,e,f,g,j,k){var m,q,r,o,d=a-d,e=b-e,f=c-f;o=1/Math.sqrt(d*d+e*e+f*f);d*=o;e*=o;f*=o;m=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(o=Math.sqrt(m*m+k*k+g*g))?(o=1/o,m*=o,k*=o,g*=o):g=k=m=0;j=e*g-f*k;q=f*m-d*g;r=d*k-e*m;(o=Math.sqrt(j*j+q*q+r*r))?(o=1/o,j*=o,q*=o,r*=o):r=q=j=0;this.a[0]=m;this.a[4]=k;this.a[8]=g;this.a[12]=-(m*a+k*b+g*c);this.a[1]=j;this.a[5]=q;this.a[9]=r;this.a[13]=-(j*a+q*b+r*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
u.S=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],m=a.a[7],q=a.a[8],r=a.a[9],o=a.a[10],s=a.a[11],v=a.a[12],y=a.a[13],H=a.a[14],Ob=a.a[15],Pb=b.a[0],Qb=b.a[1],Rb=b.a[2],Sb=b.a[3],Tb=b.a[4],Ub=b.a[5],Vb=b.a[6],Wb=b.a[7],Xb=b.a[8],Yb=b.a[9],Zb=b.a[10],$b=b.a[11],ac=b.a[12],bc=b.a[13],cc=b.a[14],dc=b.a[15];this.a[0]=Pb*c+Qb*g+Rb*q+Sb*v;this.a[1]=Pb*d+Qb*j+Rb*r+Sb*y;this.a[2]=Pb*e+Qb*k+Rb*o+Sb*H;this.a[3]=Pb*f+Qb*m+Rb*s+Sb*Ob;this.a[4]=Tb*c+Ub*g+Vb*q+Wb*v;this.a[5]=Tb*
d+Ub*j+Vb*r+Wb*y;this.a[6]=Tb*e+Ub*k+Vb*o+Wb*H;this.a[7]=Tb*f+Ub*m+Vb*s+Wb*Ob;this.a[8]=Xb*c+Yb*g+Zb*q+$b*v;this.a[9]=Xb*d+Yb*j+Zb*r+$b*y;this.a[10]=Xb*e+Yb*k+Zb*o+$b*H;this.a[11]=Xb*f+Yb*m+Zb*s+$b*Ob;this.a[12]=ac*c+bc*g+cc*q+dc*v;this.a[13]=ac*d+bc*j+cc*r+dc*y;this.a[14]=ac*e+bc*k+cc*o+dc*H;this.a[15]=ac*f+bc*m+cc*s+dc*Ob};u.be=function(){for(var a=this.Le(),b=0;b<4;b++)for(var c=0;c<4;c++)this.a[4*b+c]=a.a[4*c+b]};
u.Aa=function(a){var b=new N;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
u.Gl=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=e*2/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=e*2/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(f*e*2)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
u.Cj=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
u.zj=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};u.Aj=function(a,b,c,d){this.zj(a,b,c,d,-1,1)};
u.kd=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Bl=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.lj=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.oh=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.El=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];Math.abs(b)<1.0E-6&&Math.abs(d)<1.0E-6?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};
u.$f=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.mj=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Fl=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.ag=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,k=a*c,m=b*c;a*=d;b*=d;c*=d;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*m+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*m-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Ol=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],k=this.a[10],m=a+e+k;m>0?(m=Math.sqrt(m+1)*2,a=0.25*m,e=(j-f)/m,k=(c-g)/m,b=(d-b)/m):a>e&a>k?(m=Math.sqrt(1+a-e-k)*2,a=(j-f)/m,e=0.25*m,k=(b+d)/m,b=(c+g)/m):e>k?(m=Math.sqrt(1+e-a-k)*2,a=(c-g)/m,e=(b+d)/m,k=0.25*m,b=(f+j)/m):(m=Math.sqrt(1+k-a-e)*2,a=(d-b)/m,e=(c+g)/m,k=(f+j)/m,b=0.25*m);return[e,k,b,a]};
u.Xd=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],m=a.a[8],q=a.a[9],r=a.a[10],o=a.a[11],s=a.a[12],v=a.a[13],y=a.a[14],a=a.a[15],H=1/(b*g*r*a+b*j*o*v+b*k*q*y+c*f*o*y+c*j*m*a+c*k*r*s+d*f*q*a+d*g*o*s+d*k*m*v+e*f*r*v+e*g*m*y+e*j*q*s-b*g*o*y-b*j*q*a-b*k*r*v-c*f*r*a-c*j*o*s-c*k*m*y-d*f*o*v-d*g*m*a-d*k*q*s-e*f*q*y-e*g*r*s-e*j*m*v);this.a[0]=(g*r*a+j*o*v+k*q*y-g*o*y-j*q*a-k*r*v)*H;this.a[4]=(f*o*y+j*m*a+k*r*s-f*r*a-j*o*s-k*m*y)*H;this.a[8]=(f*q*a+g*o*s+k*m*v-f*o*
v-g*m*a-k*q*s)*H;this.a[12]=(f*r*v+g*m*y+j*q*s-f*q*y-g*r*s-j*m*v)*H;this.a[1]=(c*o*y+d*q*a+e*r*v-c*r*a-d*o*v-e*q*y)*H;this.a[5]=(b*r*a+d*o*s+e*m*y-b*o*y-d*m*a-e*r*s)*H;this.a[9]=(b*o*v+c*m*a+e*q*s-b*q*a-c*o*s-e*m*v)*H;this.a[13]=(b*q*y+c*r*s+d*m*v-b*r*v-c*m*y-d*q*s)*H;this.a[2]=(c*j*a+d*k*v+e*g*y-c*k*y-d*g*a-e*j*v)*H;this.a[6]=(b*k*y+d*f*a+e*j*s-b*j*a-d*k*s-e*f*y)*H;this.a[10]=(b*g*a+c*k*s+e*f*v-b*k*v-c*f*a-e*g*s)*H;this.a[14]=(b*j*v+c*f*y+d*g*s-b*g*y-c*j*s-d*f*v)*H;this.a[3]=(c*k*r+d*g*o+e*j*q-c*
j*o-d*k*q-e*g*r)*H;this.a[7]=(b*j*o+d*k*m+e*f*r-b*k*r-d*f*o-e*j*m)*H;this.a[11]=(b*k*q+c*f*o+e*g*m-b*g*o-c*k*m-e*f*q)*H;this.a[15]=(b*g*r+c*j*m+d*f*q-b*j*q-c*f*r-d*g*m)*H};u.ae=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};x("mat4",O);O.prototype.CalcBodyFrame=O.prototype.oh;
O.prototype.CalcNavigationFrame=O.prototype.kd;O.prototype.Cami3d=O.prototype.$f;O.prototype.CopyFrom=O.prototype.R;O.prototype.Copy=O.prototype.Le;O.prototype.Frustum=O.prototype.Gl;O.prototype.Get=O.prototype.Qe;O.prototype.Identity=O.prototype.dg;O.prototype.Inverse=O.prototype.Xd;O.prototype.LookAt=O.prototype.Ml;O.prototype.Multiply=O.prototype.S;O.prototype.MultiplyVec3=O.prototype.Aa;O.prototype.Ortho2D=O.prototype.Aj;O.prototype.Ortho=O.prototype.zj;O.prototype.OverwriteTranslation=O.prototype.Bj;
O.prototype.Perspective=O.prototype.Cj;O.prototype.RotationX=O.prototype.Eh;O.prototype.RotationY=O.prototype.Ej;O.prototype.RotationZ=O.prototype.Fj;O.prototype.Scale=O.prototype.Nc;O.prototype.SetFromArray=O.prototype.Oc;O.prototype.ToString=O.prototype.ae;O.prototype.Translation=O.prototype.wc;O.prototype.Transpose=O.prototype.be;O.prototype.Zero=O.prototype.Sl;O.prototype.CalcNavigationFrame2=O.prototype.Bl;O.prototype.CalcNavigationFrameZUp=O.prototype.lj;O.prototype.ExtractEulerAngles=O.prototype.El;
O.prototype.CamViewFrustum=O.prototype.mj;O.prototype.FromQuaternion=O.prototype.Fl;O.prototype.FromQuaternionComponents=O.prototype.ag;O.prototype.Rot2Quat=O.prototype.Ol;function Lb(){this.fg=[];this.eg=[];this.Yd=[];this.eb={};this.eb.x=0;this.eb.y=0;this.eb.e=0;this.zb={};this.zb.longitude=0;this.zb.latitude=0;this.zb.elevation=0;this.je=!1;this.Nb=[0,0];this.ic=-1;this.Rk=0;this.Ea=Mb;this.sa=0}var Mb=0,Nb=1,ec=2,fc=3,gc=4,hc=5;Lb.prototype.ea=function(a,b,c){this.eb.x=a;this.eb.y=b;this.eb.e=c};Lb.prototype.nd=aa("eb");function ic(){this.result={};this.result.p=0;this.result.Kb=0;this.result.qc=0;this.Sa={};this.Sa.x=0;this.Sa.y=0;this.Sa.e=0;this.Ta={};this.Ta.x=0;this.Ta.y=0;this.Ta.e=0;this.ya={};this.ya.x=0;this.ya.y=0;this.ya.e=0;this.Za={};this.Za.x=0;this.Za.y=0;this.Za.e=0;this.$a={};this.$a.x=0;this.$a.y=0;this.Rg=this.Wc=this.$a.e=0;this.uj=2.220446049250313E-16}
ic.prototype.uh=function(a,b,c,d,e,f,g,j,k,m,q,r,o,s,v){this.Sa.x=m-g;this.Sa.y=q-j;this.Sa.e=r-k;this.Ta.x=o-g;this.Ta.y=s-j;this.Ta.e=v-k;this.Za.x=e*this.Ta.e-f*this.Ta.y;this.Za.y=f*this.Ta.x-d*this.Ta.e;this.Za.e=d*this.Ta.y-e*this.Ta.x;this.Wc=this.Sa.x*this.Za.x+this.Sa.y*this.Za.y+this.Sa.e*this.Za.e;this.ya.x=a-g;this.ya.y=b-j;this.ya.e=c-k;this.Rg=1/this.Wc;this.$a.x=this.ya.y*this.Sa.e-this.ya.e*this.Sa.y;this.$a.y=this.ya.e*this.Sa.x-this.ya.x*this.Sa.e;this.$a.e=this.ya.x*this.Sa.y-this.ya.y*
this.Sa.x;if(this.Wc>this.uj){this.result.Kb=this.ya.x*this.Za.x+this.ya.y*this.Za.y+this.ya.e*this.Za.e;if(this.result.Kb<0||this.result.Kb>this.Wc)return l;this.result.qc=d*this.$a.x+e*this.$a.y+f*this.$a.e;if(this.result.qc<0||this.result.Kb+this.result.qc>this.Wc)return l}else if(this.Wc<-this.uj){this.result.Kb=this.ya.x*this.Za.x+this.ya.y*this.Za.y+this.ya.e*this.Za.e;if(this.result.Kb>0||this.result.Kb<this.Wc)return l;this.result.qc=d*this.$a.x+e*this.$a.y+f*this.$a.e;if(this.result.qc>0||
this.result.Kb+this.result.qc<this.Wc)return l}else return l;this.result.p=this.Ta.x*this.$a.x+this.Ta.y*this.$a.y+this.Ta.e*this.$a.e;this.result.Kb*=this.Rg;this.result.qc*=this.Rg;this.result.p*=this.Rg;return this.result};x("TriangleIntersector",ic);ic.prototype.IntersectTriangle=ic.prototype.uh;function jc(){this.Pf=this.Qf=this.Nf=this.Of=0;this.Ng=1;this.result={hd:0,gd:0}}
jc.prototype.Se=function(a,b,c,d,e,f,g,j,k,m,q,r){this.Ng=1;d>=0?(this.result.hd=(g-a)/d,this.result.gd=(m-a)/d):(this.result.hd=(m-a)/d,this.result.gd=(g-a)/d);e>=0?(this.Of=(j-b)/e,this.Nf=(q-b)/e):(this.Of=(q-b)/e,this.Nf=(j-b)/e);if(this.result.hd>this.Nf||this.Of>this.result.gd)this.Ng=-1;if(this.Of>this.result.hd)this.result.hd=this.Of;if(this.Nf<this.result.gd)this.result.gd=this.Nf;f>=0?(this.Qf=(k-c)/f,this.Pf=(r-c)/f):(this.Qf=(r-c)/f,this.Pf=(k-c)/f);if(this.result.hd>this.Pf||this.Qf>
this.result.gd)this.Ng=-1;if(this.Qf>this.result.hd)this.result.hd=this.Qf;if(this.Pf<this.result.gd)this.result.gd=this.Pf;return this.Ng>0?this.result:l};x("AABB",jc);jc.prototype.HitBox=jc.prototype.Se;function P(a,b,c,d){this.a=new Float32Array([a||0,b||0,c||0,d||0])}P.prototype.q=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};P.prototype.Qe=aa("a");P.prototype.ae=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};x("vec4",P);P.prototype.Get=P.prototype.Qe;P.prototype.Set=P.prototype.q;function kc(a){var a=String(a),b;b=/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}h(Error("Invalid JSON string: "+a))};function Q(a){this.c=a;this.b=a.b;this.m=this.f=this.Yc=this.qa=l;this.mode="";this.kc=this.Be=0;this.$c=this.C=l;this.ia=!1;this.ek=this.ne=this.O=l;this.kk=new P;this.kk.q(1,1,1,1);this.lk=new P;this.lk.q(1,1,1,1);this.uk=new ic;this.di=this.ca=this.U=this.D=l;this.Bg=new jc;this.ba=l;this.Af=this.w=0;this.n={};this.zc=Array(3);this.yc=Array(3);this.we=new O;this.Ug=!1;this.Ab=-1}function lc(a,b){if(b.length%3==0)a.m=new Float32Array(b),a.mode="p",a.w=3}
function mc(a,b){if(b.length%8==0)a.m=new Float32Array(b),a.mode="pnt",a.w=8}function nc(a,b){if(b.length%7==0)a.m=new Float32Array(b),a.mode="pc",a.w=7}function oc(a,b){if(b.length%5==0)a.m=new Float32Array(b),a.mode="pt",a.w=5}function pc(a,b){if(b.length%12==0)a.m=new Float32Array(b),a.mode="pnct",a.w=12}function qc(a,b){if(b.length%5==0)a.m=new Float32Array(b),a.mode="poi",a.w=5}
function rc(a,b,c){a.C=new Uint16Array(b);a.$c=c;a.kc=b.length;a.ia=!0;var d=0;if(a.di)d=a.di;switch(c){case "TRIANGLES":a.Af=(b.length-d)/3;break;case "TRIANGLESTRIP":a.Af=b.length-d-3+1}}u=Q.prototype;u.wb=p("f");
u.ug=function(){this.qa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa);this.b.bufferData(this.b.ARRAY_BUFFER,this.m,this.b.STATIC_DRAW);this.Yc=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Yc);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.C,this.b.STATIC_DRAW)};
u.J=function(){if(this.qa)this.b.deleteBuffer(this.qa),this.qa=l;if(this.Yc)this.b.deleteBuffer(this.Yc),this.Yc=l;this.Ug?this.f.J():this.f=l;this.m=l;this.mode="";this.kc=this.Be=0;this.$c=this.C=l};
u.ha=function(a,b,c,d,e){if(this.ia){b=b||0;c=c||0;this.qa==l&&this.ug();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Yc);this.ba&&(this.c.tc(),this.we.S(this.ba,this.c.Bb),this.c.vc(this.we));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,32,0);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,!1,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,!1,32,24);var d=this.c.Ub,e=this.c.vi,f=this.c.Vg,g=this.c.gc;d.Ya&&(d.b.useProgram(d.Ya),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ya,"matModelView"),!1,Kb(f)),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ya,"matProjection"),!1,Kb(g)),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ya,"matNormal"),!1,Kb(e)),d.b.uniform1i(d.b.getUniformLocation(d.Ya,"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);
this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);d=this.c.Ub;e=this.c.wa;d.Qb&&(d.b.useProgram(d.Qb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Qb,"matMVP"),!1,Kb(e)));break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.Ub;e=this.c.wa;d.Fb&&(d.b.useProgram(d.Fb),
d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Fb,"matMVP"),!1,Kb(e)),d.b.uniform1i(d.b.getUniformLocation(d.Fb,"uTexture"),0));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,!1,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,!1,48,40);d=this.c.Ub;
e=this.c.wa;d.qb&&(d.b.useProgram(d.qb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.qb,"matMVP"),!1,Kb(e)));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(d==l)d=this.kk;e=this.c.Ub;f=this.c.wa;e.Cb&&(e.b.useProgram(e.Cb),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.Cb,"matMVP"),!1,Kb(f)),e.b.uniform4fv(e.b.getUniformLocation(e.Cb,"uColor"),d.a));
break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(e==l)e=this.lk;d=this.c.Ub;f=this.c.wa;d.Db&&(d.b.useProgram(d.Db),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Db,"matMVP"),!1,Kb(f)),d.b.uniform4fv(d.b.getUniformLocation(d.Db,"uColor"),e.a));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.Ub;e=this.c.wa;f=this.c.Bb;d.rb&&(d.b.useProgram(d.rb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.rb,"matM"),!1,Kb(f)),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.rb,"matMVP"),!1,Kb(e)),d.b.uniform1i(d.b.getUniformLocation(d.rb,"uTexture"),0));break;default:alert("unknown surface mode!!")}if(this.f)d=this.f,d.ab&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.f));switch(this.$c){case "TRIANGLES":a?
this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.kc,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.kc,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.kc,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.kc,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?
this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.kc,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.ba&&this.c.sc();if(this.f)a=this.f,a.ab&&a.b.bindTexture(a.b.TEXTURE_2D,l);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
u.ld=function(a,b,c,d){d||(d=this);if(c)this.Rc=c;if(b)this.Vc=b;if(a.BoundingBox)d.D=a.BoundingBox[0],d.U=a.BoundingBox[1];if(a.Offset)d.ca=a.Offset;if(a.CurtainIndex)d.di=a.CurtainIndex;switch(a.VertexSemantic){case "p":d.Be=a.Vertices.length/3;lc(d,a.Vertices);d.mode="p";break;case "pnt":d.Be=a.Vertices.length/8;mc(d,a.Vertices);d.mode="pnt";break;case "pc":d.Be=a.Vertices.length/7;d.mode="pc";nc(d,a.Vertices);break;case "pt":d.Be=a.Vertices.length/5;d.mode="pt";oc(d,a.Vertices);break;case "pnct":d.Be=
a.Vertices.length/12;d.mode="p";pc(d,a.Vertices);break;default:alert("unknown surface mode!!")}rc(d,a.Indices,a.IndexSemantic);if(a.DiffuseMap)d.f=new R(d.c),S(d.f,a.DiffuseMap,function(){var a=d;a.ab=!0;a.Vc&&a.Vc(a)},function(){var a=d;J(K("owg.Mesh"),"Downloading Error: Texture not found...");a.Rc&&a.Rc(a)},!0),d.Ug=!0;a.Center&&d.mg(a.Center[0],a.Center[1],a.Center[2]);d.kc=a.Indices.length;if(!d.Ug)d.ab=!0;d.ek&&d.ek();d.Vc&&!d.Ug&&d.Vc(d)};
function sc(a,b,c,d){b==l?alert("invalid json-url"):(a.ne=b,a.O=new window.XMLHttpRequest,a.O.open("GET",a.ne,!0),a.Vc=c,a.Rc=d,a.O.onreadystatechange=function(){if(a.O.readyState==4)if(a.O.status==404)a.Rc&&a.Rc(a);else{var b=kc(a.O.responseText);a.ld(b,l,l,a)}},a.O.send())}
u.Pc=function(a,b,c,d,e,f){var g=!1,j,k,m,q;k=j=0;m=1.0E20;for(var r=0;r<this.Af;r++){var o;o=r;switch(this.$c){case "TRIANGLES":this.n.Rf=this.m[this.C[o*3]*this.w];this.n.Sf=this.m[this.C[o*3]*this.w+1];this.n.Tf=this.m[this.C[o*3]*this.w+2];this.n.Uf=this.m[this.C[o*3+1]*this.w];this.n.Vf=this.m[this.C[o*3+1]*this.w+1];this.n.Wf=this.m[this.C[o*3+1]*this.w+2];this.n.gh=this.m[this.C[o*3+2]*this.w];this.n.hh=this.m[this.C[o*3+2]*this.w+1];this.n.ih=this.m[this.C[o*3+2]*this.w+2];break;case "TRIANGLESTRIP":o%
2==0?(this.n.Rf=this.m[this.C[o]*this.w],this.n.Sf=this.m[this.C[o]*this.w+1],this.n.Tf=this.m[this.C[o]*this.w+2],this.n.Uf=this.m[this.C[o+1]*this.w],this.n.Vf=this.m[this.C[o+1]*this.w+1],this.n.Wf=this.m[this.C[o+1]*this.w+2]):(this.n.Rf=this.m[this.C[o+1]*this.w],this.n.Sf=this.m[this.C[o+1]*this.w+1],this.n.Tf=this.m[this.C[o+1]*this.w+2],this.n.Uf=this.m[this.C[o]*this.w],this.n.Vf=this.m[this.C[o]*this.w+1],this.n.Wf=this.m[this.C[o]*this.w+2]);this.n.gh=this.m[this.C[o+2]*this.w];this.n.hh=
this.m[this.C[o+2]*this.w+1];this.n.ih=this.m[this.C[o+2]*this.w+2];break;default:J(K("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.ca&&(this.n.Rf+=this.ca[0],this.n.Sf+=this.ca[1],this.n.Tf+=this.ca[2],this.n.Uf+=this.ca[0],this.n.Vf+=this.ca[1],this.n.Wf+=this.ca[2],this.n.gh+=this.ca[0],this.n.hh+=this.ca[1],this.n.ih+=this.ca[2]);o=this.C[o]==this.C[o+1]||this.C[o]==this.C[o+2]||this.C[o+1]==this.C[o+2]?!1:!0;if(o){if(this.ba){o=new O;
o.R(this.we);var s=new N;s.q(this.n.Rf,this.n.Sf,this.n.Tf);var v=new N;v.q(this.n.Uf,this.n.Vf,this.n.Wf);var y=new N;y.q(this.n.gh,this.n.hh,this.n.ih);s=o.Aa(s);v=o.Aa(v);o=o.Aa(y);o=this.uk.uh(a,b,c,d,e,f,s.a[0],s.a[1],s.a[2],v.a[0],v.a[1],v.a[2],o.a[0],o.a[1],o.a[2])}else o=this.uk.uh(a,b,c,d,e,f,this.n.Rf,this.n.Sf,this.n.Tf,this.n.Uf,this.n.Vf,this.n.Wf,this.n.gh,this.n.hh,this.n.ih);if(o&&(g=!0,o.p<m&&o.p>0))m=o.p,j=o.Kb,k=o.qc,q=r}}if(g)return a={},a.p=m,a.Kb=j,a.qc=k,a.pl=q,a;return l};
function tc(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,m,q=0;q<a.m.length;q++)j=a.m[q*a.w],k=a.m[q*a.w+1],m=a.m[q*a.w+2],j>e&&(e=j),k>f&&(f=k),m>g&&(g=m),j<b&&(b=j),k<c&&(c=k),m<d&&(d=m);a.ba&&(q=new N(b,c,d),m=new N(e,c,d),j=new N(e,f,d),d=new N(b,f,d),k=new N(b,c,g),c=new N(b,f,g),e=new N(e,f,g),g=new N(b,f,g),b=a.ba.Aa(q),f=a.ba.Aa(m),j=a.ba.Aa(j),d=a.ba.Aa(d),k=a.ba.Aa(k),c=a.ba.Aa(c),m=a.ba.Aa(e),q=a.ba.Aa(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],m.a[0],q.a[0]],
g=[b.a[1],f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],m.a[1],q.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],m.a[2],q.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.ca&&(b+=a.ca[0],c+=a.ca[1],d+=a.ca[2],e+=a.ca[0],f+=a.ca[1],g+=a.ca[2]);if(a.D===l)a.D=Array(3);if(a.U===l)a.U=Array(3);a.D[0]=b;a.D[1]=c;a.D[2]=d;a.U[0]=e;a.U[1]=f;a.U[2]=g}u.Sj=function(a,b,c,d,e,f){return this.Bg.Se(a,b,c,d,e,f,this.D[0],this.D[1],this.D[2],this.U[0],this.U[1],this.U[2])};
u.$e=function(a,b,c,d,e,f){var g=this.c.La.a,j=new O;this.zc[0]=a;this.zc[1]=b;this.zc[2]=c;this.yc[0]=d||0;this.yc[1]=e||0;this.yc[2]=f||0;j.Oc([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.zc[0],this.zc[1],this.zc[2],1]);a=new O;a.wc(this.yc[0],this.yc[1],this.yc[2]);b=new O;b.S(j,a);this.ba=b};function uc(a){a.$e(a.zc[0],a.zc[1],a.zc[2],a.yc[0],a.yc[1],a.yc[2])}
u.mg=function(a,b,c,d,e,f){var g=new T(a,b,c),c=Array(3);g.ja(c);(new O).wc(c[0],c[1],c[2]);g=new O;g.kd(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new O;b.Oc(a);a=new O;a.Nc(L,L,L);c=new O;c.S(b,a);b=new O;g=new O;a=new O;d?b.Eh(e*Math.PI/180):b.Eh(-1.57079633);e&&g.Ej(d*Math.PI/180+1.57079633);f&&a.Fj(f*Math.PI/180);d=new O;d.S(b,g);e=new O;e.S(d,a);
d=new O;d.S(c,e);this.ba=d;tc(this)};u.R=function(a){this.wb(a.f);this.m=a.m;this.mode=a.mode;this.w=a.w;this.C=a.C;this.$c=a.$c;this.kc=a.kc;this.ia=a.ia;this.Af=a.Af;this.qa=a.qa;this.Yc=a.Yc;this.ba=a.ba;this.$c=a.$c};x("Surface",Q);Q.prototype.Draw=Q.prototype.ha;Q.prototype.CopyFrom=Q.prototype.R;Q.prototype.SetAsBillboard=Q.prototype.$e;Q.prototype.SetTexture=Q.prototype.wb;Q.prototype.TestBoundingBoxIntersection=Q.prototype.Sj;Q.prototype.TestRayIntersection=Q.prototype.Pc;var U="art/";
function R(a,b,c,d){this.c=a;this.b=a.b;this.f=l;this.Mg=this.ab=!1;this.cb=l;this.height=this.width=0;this.Kn=l;this.ql=!1;if(b){this.Tb=this.b.createFramebuffer();this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Tb);this.Tb.width=c||0;this.Tb.height=d||0;this.f=this.b.createTexture();this.b.bindTexture(this.b.TEXTURE_2D,this.f);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.Tb.width,this.Tb.height,0,this.b.RGBA,this.b.UNSIGNED_BYTE,l);this.b.bindRenderbuffer(this.b.RENDERBUFFER,this.b.createRenderbuffer());this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,this.f,0);this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindRenderbuffer(this.b.RENDERBUFFER,
l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.ql=this.ab=!0;if(c)this.width=c;if(d)this.height=d}}
function S(a,b,c,d,e){a.f=a.b.createTexture();a.wm=e;var f=a.f,g=a.b;a.f.Zc=new Image;a.f.Zc.crossOrigin="anonymous";a.f.Zc.onload=function(){g.bindTexture(g.TEXTURE_2D,f);a.wm&&g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!0);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Zc);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,l);a.width=f.Zc.width;a.height=f.Zc.height;c!=l&&c(a);a.ab=!0};a.f.Zc.onerror=function(){J(K("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Mg=!0;d&&d(a)};a.f.Zc.src=b}u=R.prototype;
u.A=function(a,b,c,d,e,f,g,j,k,m){c=c||0;d=d||0;e=e||1;f=f||1;g=g||!1;j=j||!1;k=k||1;if(this.ab){var q=this.width,r=this.height,o=this.width/2,s=this.height/2;this.c.tc();this.c.Fh();var d=M(d),v=new O;d>0?v.Oc([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*o+Math.sin(d)*e*s+e*o+a,-Math.cos(d)*f*s-Math.sin(d)*f*o+f*s+b,c,1]):(v.wc(a,b,c),a=new O,a.Nc(e,f,1),v.S(v,a));this.c.vc(v);if(this.cb===l)this.cb=new Q(this.c),j?qc(this.cb,[0,0,0,0,0,q,0,0,1,0,q,r,0,
1,1,0,r,0,0,1]):qc(this.cb,[0,0,0,0,1,q,0,0,1,1,q,r,0,1,0,0,r,0,0,0]),rc(this.cb,[0,1,2,0,2,3],"TRIANGLES"),this.cb.wb(this);g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);k<1&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.cb.ha(l,l,l,l,m);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.sc()}};u.J=function(){this.f.Zc=l;this.c.b.deleteTexture(this.f);this.f=l;this.Mg=this.ab=!1;if(this.cb)this.cb.J(),this.cb=l;if(this.Tb)this.c.b.deleteFramebuffer(this.Tb),this.Tb=l};u.qh=function(){this.ql&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Tb),this.b.viewport(0,0,this.Tb.width,this.Tb.height),this.b.clearColor(0,0,0,1),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT))};
u.ph=function(){this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.b.viewport(0,0,this.c.width,this.c.height)};u.R=function(a){this.f=a.f;this.ab=a.ab;this.Mg=a.Mg;this.height=this.width=this.cb=a.cb};x("Texture",R);R.prototype.CopyFrom=R.prototype.R;R.prototype.Blit=R.prototype.A;R.prototype.EnableRenderToTexture=R.prototype.qh;R.prototype.DisableRenderToTexture=R.prototype.ph;function T(a,b,c){this.t=new Float32Array([a,b,c])}T.prototype.q=function(a,b,c){this.t[0]=a;this.t[1]=b;this.t[2]=c};T.prototype.ja=function(a){var b=Math.sin(M(this.t[1])),c=Math.cos(M(this.t[1])),d=Math.sin(M(this.t[0])),e=Bb/Math.sqrt(1-Cb*b*b);a[0]=(e+this.t[2])*c*Math.cos(M(this.t[0]));a[1]=(e+this.t[2])*c*d;a[2]=(0.993305620011365*e+this.t[2])*b;a[0]*=L;a[1]*=L;a[2]*=L};
T.prototype.Xb=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0;a*=8388607;b*=8388607;c*=8388607;for(var k=0;k<10;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=Bb/Math.sqrt(1-Cb*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Cb/(g+f));this.t[0]=Eb(d);this.t[1]=Eb(e);this.t[2]=f};T.prototype.ae=function(){return" Longitude: "+this.t[0].toPrecision(17)+" Latitude: "+this.t[1].toPrecision(17)+" Elevation: "+this.t[2].toPrecision(17)};x("GeoCoord",T);
T.prototype.FromCartesian=T.prototype.Xb;T.prototype.ToCartesian=T.prototype.ja;T.prototype.ToString=T.prototype.ae;function vc(a){this.c=a;this.b=a.b;this.ba=this.qa=this.ed=l;this.we=new O;this.In=[];this.fh=this.Ei=this.ca=0}function wc(a,b){a.Ei+=b.length/7;if(a.fh==0)a.fh=a.Ei*70;a.ed=l;a.ed=new Float32Array(b);a.ug()}vc.prototype.J=function(){if(this.qa)this.b.deleteBuffer(this.qa),this.qa=l;this.qa=this.ed=l};
vc.prototype.mg=function(a,b,c){var d=new T(a,b,c),c=Array(3);d.ja(c);(new O).wc(c[0],c[1],c[2]);d=new O;d.lj(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new O;b.Oc(a);a=new O;a.Nc(L,L,L);c=new O;c.S(b,a);a=new O;b=new O;b.S(c,a);this.ba=b};
vc.prototype.ha=function(){if(this.ed!=l){this.qa||this.ug();this.ba&&(this.c.tc(),this.we.S(this.ba,this.c.Bb),this.c.vc(this.we));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new O;a.Xd(this.c.wa);var b=this.c.Ub,c=this.c.wa;b.Eb&&(b.b.useProgram(b.Eb),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Eb,"matMVP"),!1,Kb(c)),
b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Eb,"matInvMVP"),!1,Kb(a)));this.b.drawArrays(this.b.POINTS,0,this.Ei);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.ba&&this.c.sc()}};
vc.prototype.ug=function(){this.qa===l?(this.qa=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa),this.b.bufferData(this.b.ARRAY_BUFFER,this.fh,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.ed)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.ca,this.ed));this.ca+=this.ed.length*4};var xc,yc,zc,Ac,Bc;function Cc(){return w.navigator?w.navigator.userAgent:l}Ac=zc=yc=xc=!1;var Dc;if(Dc=Cc()){var Ec=w.navigator;xc=Dc.indexOf("Opera")==0;yc=!xc&&Dc.indexOf("MSIE")!=-1;zc=!xc&&Dc.indexOf("WebKit")!=-1;Ac=!xc&&!zc&&Ec.product=="Gecko"}var Fc=xc,Gc=yc,Hc=Ac,Ic=zc,Jc,Kc=w.navigator;Jc=Kc&&Kc.platform||"";Bc=Jc.indexOf("Mac")!=-1;var Lc=Jc.indexOf("Win")!=-1,Mc;
a:{var Nc="",Oc;if(Fc&&w.opera)var Pc=w.opera.version,Nc=typeof Pc=="function"?Pc():Pc;else if(Hc?Oc=/rv\:([^\);]+)(\)|;)/:Gc?Oc=/MSIE\s+([^\);]+)(\)|;)/:Ic&&(Oc=/WebKit\/(\S+)/),Oc)var Qc=Oc.exec(Cc()),Nc=Qc?Qc[1]:"";if(Gc){var Rc,Sc=w.document;Rc=Sc?Sc.documentMode:i;if(Rc>parseFloat(Nc)){Mc=String(Rc);break a}}Mc=Nc}var Tc={};function Uc(a){return Tc[a]||(Tc[a]=Za(Mc,a)>=0)};var Vc;var Wc="dblclick",Xc="mousedown",Yc="mouseup",Zc="mousemove",$c="keydown",ad="keyup";var bd=!Gc||Uc("9"),cd=Gc&&!Uc("8");function dd(){ed&&(fd[ga(this)]=this)}var ed=!1,fd={};dd.prototype.nk=!1;dd.prototype.pf=function(){if(!this.nk&&(this.nk=!0,this.bc(),ed)){var a=ga(this);fd.hasOwnProperty(a)||h(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));delete fd[a]}};dd.prototype.bc=n();function gd(a,b){dd.call(this);this.type=a;this.currentTarget=this.target=b}ka(gd,dd);u=gd.prototype;u.bc=function(){delete this.type;delete this.target;delete this.currentTarget};u.Sd=!1;u.Hf=!0;u.stopPropagation=function(){this.Sd=!0};u.preventDefault=function(){this.Hf=!1};var hd=new Function("a","return a");function id(a,b){a&&this.ad(a,b)}ka(id,gd);var jd=0,kd=1,ld=2,md=[1,4,2];u=id.prototype;u.target=l;u.relatedTarget=l;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=!1;u.altKey=!1;u.shiftKey=!1;u.metaKey=!1;u.Nm=!1;u.Fc=l;
u.ad=function(a,b){var c=this.type=a.type;gd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Hc)try{hd(d.nodeName)}catch(e){d=l}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Nm=Bc?a.metaKey:a.ctrlKey;this.state=a.state;this.Fc=a;delete this.Hf;delete this.Sd};function nd(a,b){return bd?a.Fc.button==b:a.type=="click"?b==jd:!!(a.Fc.button&md[b])}
u.stopPropagation=function(){id.Fe.stopPropagation.call(this);this.Fc.stopPropagation?this.Fc.stopPropagation():this.Fc.cancelBubble=!0};u.preventDefault=function(){id.Fe.preventDefault.call(this);var a=this.Fc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,cd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};u.bc=function(){id.Fe.bc.call(this);this.relatedTarget=this.currentTarget=this.target=this.Fc=l};function od(){}var pd=0;u=od.prototype;u.key=0;u.De=!1;u.dk=!1;u.ad=function(a,b,c,d,e,f){da(a)=="function"?this.vk=!0:a&&a.handleEvent&&da(a.handleEvent)=="function"?this.vk=!1:h(Error("Invalid listener argument"));this.wf=a;this.Yk=b;this.src=c;this.type=d;this.capture=!!e;this.ri=f;this.dk=!1;this.key=++pd;this.De=!1};u.handleEvent=function(a){if(this.vk)return this.wf.call(this.ri||this.src,a);return this.wf.handleEvent.call(this.wf,a)};var qd,rd=(qd="ScriptEngine"in w&&w.ScriptEngine()=="JScript")?w.ScriptEngineMajorVersion()+"."+w.ScriptEngineMinorVersion()+"."+w.ScriptEngineBuildVersion():"0";function sd(a,b){dd.call(this);this.Ak=b;this.Dd=[];a>this.Ak&&h(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Dd.push(this.lf())}ka(sd,dd);u=sd.prototype;u.Bd=l;u.mk=l;u.getObject=function(){if(this.Dd.length)return this.Dd.pop();return this.lf()};function td(a,b){a.Dd.length<a.Ak?a.Dd.push(b):a.ei(b)}u.lf=function(){return this.Bd?this.Bd():{}};
u.ei=function(a){if(this.mk)this.mk(a);else{var b=da(a);if(b=="object"||b=="array"||b=="function")if(da(a.pf)=="function")a.pf();else for(var c in a)delete a[c]}};u.bc=function(){sd.Fe.bc.call(this);for(var a=this.Dd;a.length;)this.ei(a.pop());delete this.Dd};var ud,vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd,Ed;
(function(){function a(){return{oa:0,Sb:0}}function b(){return[]}function c(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new od}function e(){return new id}var f=qd&&!(Za(rd,"5.7")>=0),g;zd=function(a){g=a};if(f){ud=function(){return j.getObject()};vd=function(a){td(j,a)};wd=function(){return k.getObject()};xd=function(a){td(k,a)};yd=function(){return m.getObject()};Ad=function(){td(m,c())};Bd=function(){return q.getObject()};Cd=function(a){td(q,a)};Dd=function(){return r.getObject()};
Ed=function(a){td(r,a)};var j=new sd(0,600);j.Bd=a;var k=new sd(0,600);k.Bd=b;var m=new sd(0,600);m.Bd=c;var q=new sd(0,600);q.Bd=d;var r=new sd(0,600);r.Bd=e}else ud=a,vd=ca,wd=b,xd=ca,yd=c,Ad=ca,Bd=d,Cd=ca,Dd=e,Ed=ca})();var Fd={},V={},Oa={},Gd={};
function W(a,b,c,d,e){if(b)if(da(b)=="array"){for(var f=0;f<b.length;f++)W(a,b[f],c,d,e);return l}else{var d=!!d,g=V;b in g||(g[b]=ud());g=g[b];d in g||(g[d]=ud(),g.oa++);var g=g[d],j=ga(a),k;g.Sb++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.wf==c&&g.ri==e){if(g.De)break;return k[f].key}}else k=g[j]=wd(),g.oa++;f=yd();f.src=a;g=Bd();g.ad(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Fd[c]=g;Oa[j]||(Oa[j]=wd());Oa[j].push(g);a.addEventListener?(a==w||!a.jk)&&a.addEventListener(b,f,d):a.attachEvent(Hd(b),
f);return c}else h(Error("Invalid event type"))}function Id(a,b,c,d,e){if(da(b)=="array")for(var f=0;f<b.length;f++)Id(a,b[f],c,d,e);else{d=!!d;a:{f=V;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ga(a),f[a]))){a=f[a];break a}a=l}if(a)for(f=0;f<a.length;f++)if(a[f].wf==c&&a[f].capture==d&&a[f].ri==e){Jd(a[f].key);break}}}
function Jd(a){if(Fd[a]){var b=Fd[a];if(!b.De){var c=b.src,d=b.type,e=b.Yk,f=b.capture;c.removeEventListener?(c==w||!c.jk)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(Hd(d),e);c=ga(c);e=V[d][f][c];if(Oa[c]){var g=Oa[c],j=db(g,b);j>=0&&cb.splice.call(g,j,1);g.length==0&&delete Oa[c]}b.De=!0;e.Sk=!0;Kd(d,f,c,e);delete Fd[a]}}}
function Kd(a,b,c,d){if(!d.Tg&&d.Sk){for(var e=0,f=0;e<d.length;e++)if(d[e].De){var g=d[e].Yk;g.src=l;Ad(g);Cd(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.Sk=!1;f==0&&(xd(d),delete V[a][b][c],V[a][b].oa--,V[a][b].oa==0&&(vd(V[a][b]),delete V[a][b],V[a].oa--),V[a].oa==0&&(vd(V[a]),delete V[a]))}}
function Ld(a){var b,c=0,d=b==l;b=!!b;if(a==l)Na(function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)Jd(f.key),c++}});else if(a=ga(a),Oa[a])for(var a=Oa[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)Jd(f.key),c++}}function Hd(a){if(a in Gd)return Gd[a];return Gd[a]="on"+a}
function Md(a,b,c,d,e){var f=1,b=ga(b);if(a[b]){a.Sb--;a=a[b];a.Tg?a.Tg++:a.Tg=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.De&&(f&=Nd(k,e)!==!1)}}finally{a.Tg--,Kd(c,d,b,a)}}return Boolean(f)}function Nd(a,b){var c=a.handleEvent(b);a.dk&&Jd(a.key);return c}
zd(function(a,b){if(!Fd[a])return!0;var c=Fd[a],d=c.type,e=V;if(!(d in e))return!0;var e=e[d],f,g;Vc===i&&(Vc=Gc&&!w.addEventListener);if(Vc){f=b||ba("window.event");var j=!0 in e,k=!1 in e;if(j){if(f.keyCode<0||f.returnValue!=i)return!0;a:{var m=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(q){m=!0}if(m||f.returnValue==i)f.returnValue=!0}}m=Dd();m.ad(f,this);f=!0;try{if(j){for(var r=wd(),o=m.currentTarget;o;o=o.parentNode)r.push(o);g=e[!0];g.Sb=g.oa;for(var s=r.length-1;!m.Sd&&s>=0&&g.Sb;s--)m.currentTarget=
r[s],f&=Md(g,r[s],d,!0,m);if(k){g=e[!1];g.Sb=g.oa;for(s=0;!m.Sd&&s<r.length&&g.Sb;s++)m.currentTarget=r[s],f&=Md(g,r[s],d,!1,m)}}else f=Nd(c,m)}finally{if(r)r.length=0,xd(r);m.pf();Ed(m)}return f}d=new id(b,this);try{f=Nd(c,d)}finally{d.pf()}return f});function Od(){this.qf=[];this.Fi=new jb;this.ll=this.ml=this.nl=this.dl=0;this.pc=new jb;this.fk=this.kl=0;this.Im=1;this.fi=new sd(0,4E3);this.fi.lf=function(){return new Pd};this.el=new sd(0,50);this.el.lf=function(){return new Qd};var a=this;this.ti=new sd(0,2E3);this.ti.lf=function(){return String(a.Im++)};this.ti.ei=n();this.tm=3}function Qd(){this.Yi=this.jl=this.count=0}
Qd.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.jl*10)/10," ms)");this.Yi&&a.push(" [VarAlloc = ",this.Yi,"]");return a.join("")};function Pd(){}function Rd(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(Sd(a.ok-c));e.push(" ",Td(a.ok-b));a.gi==0?e.push(" Start        "):a.gi==1?(e.push(" Done "),e.push(Sd(a.Nn-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.Um>0&&e.push("[VarAlloc ",a.Um,"] ");return e.join("")}
Pd.prototype.toString=function(){return this.type==l?this.om:"["+this.type+"] "+this.om};Od.prototype.reset=function(a){this.tm=a;for(a=0;a<this.qf.length;a++){var b=this.fi.id;b&&td(this.ti,b);td(this.fi,this.qf[a])}this.qf.length=0;this.Fi.clear();this.dl=ja();this.fk=this.kl=this.ll=this.ml=this.nl=0;b=kb(this.pc);for(a=0;a<b.length;a++){var c=this.pc.get(b[a]);c.count=0;c.jl=0;c.Yi=0;td(this.el,c)}this.pc.clear()};
Od.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.qf.length;d++){var e=this.qf[d];e.gi==1&&c.pop();a.push(" ",Rd(e,this.dl,b,c.join("")));b=e.ok;a.push("\n");e.gi==0&&c.push("|  ")}if(this.Fi.oa!=0){var f=ja();a.push(" Unstopped timers:\n");ib(this.Fi,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Td(b.startTime),")\n")})}b=kb(this.pc);for(d=0;d<b.length;d++)c=this.pc.get(b[d]),c.count>1&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.kl,"\n","Total comments created ",
this.fk,"\n","Overhead start: ",this.nl," ms\n","Overhead end: ",this.ml," ms\n","Overhead comment: ",this.ll," ms\n");return a.join("")};Od.prototype.zk=function(a){w.console&&w.console.markTimeline&&w.console.markTimeline(a)};function Sd(a){var a=Math.round(a),b="";a<1E3&&(b=" ");a<100&&(b="  ");a<10&&(b="   ");return b+a}function Td(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Od;new sd(0,100);var Ud=0;function Vd(){this.an=Ud;Ud++;this.ib=n();this.jb=n();this.hb=n();this.od=n();this.Zd=n();this.pd=n();this.rc=n();this.bn=this.c=l;this.Qn=[]}function Wd(a){a.pd(a.c.L);a.od()};function Xd(){dd.call(this)}ka(Xd,dd);u=Xd.prototype;u.jk=!0;u.Gi=l;u.addEventListener=function(a,b,c,d){W(this,a,b,c,d)};u.removeEventListener=function(a,b,c,d){Id(this,a,b,c,d)};
u.dispatchEvent=function(a){var b=a.type||a,c=V;if(b in c){if(fa(a))a=new gd(a,this);else if(a instanceof gd)a.target=a.target||this;else{var d=a,a=new gd(b,this);Qa(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.Gi)e.push(f);f=c[!0];f.Sb=f.oa;for(var g=e.length-1;!a.Sd&&g>=0&&f.Sb;g--)a.currentTarget=e[g],d&=Md(f,e[g],a.type,!0,a)&&a.Hf!=!1}if(!1 in c)if(f=c[!1],f.Sb=f.oa,b)for(g=0;!a.Sd&&g<e.length&&f.Sb;g++)a.currentTarget=e[g],d&=Md(f,e[g],a.type,!1,a)&&a.Hf!=!1;else for(e=this;!a.Sd&&
e&&f.Sb;e=e.Gi)a.currentTarget=e,d&=Md(f,e,a.type,!1,a)&&a.Hf!=!1;a=Boolean(d)}else a=!0;return a};u.bc=function(){Xd.Fe.bc.call(this);Ld(this);this.Gi=l};function Yd(){this.Ni=this.Xi=this.Vi=this.Wi=this.Ui=this.Si=this.Ti=this.Ri=this.Pi=this.Qi=this.Oi=this.Jf=this.Kf=this.He=this.If=this.ci=this.bi=this.Cn=l;this.Ai=this.zi=0;this.lb=!1;this.elevation=this.latitude=this.longitude=this.ua=0;this.ic=-1;this.ra=this.xa=0;this.I=Zd;this.le=0;this.Ob=48;this.Hb=this.bh=this.Jc=this.gb=this.Je=this.bb=this.nb=this.Ca=0;this.bk=!1;this.ik=this.hk=0;this.tk=new P(0.7,0.9,1,1);this.hb=n();this.kb=function(a){for(;a>360;)a-=360;for(;a<0;)a+=360;return a};
this.ib=function(){if(this.ic==0)this.lb&&(this.ci.A(this.zi-64,this.Ai-64,0,this.ua,1,1,!0,!1),this.bi.A(this.zi-64,this.Ai-64,0,0,1,1,!0,!1)),this.c.Lc("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(this.ic==1){this.bk&&this.Ni.A(this.hk-16,this.ik-16,0,0,1,1,!0,!1,0.75);var a=this.c.width-1-64-this.le,b=this.c.height-1-this.Ob,c=this.kb(this.Je+this.bh);this.I==$d?this.Jf.A(a-64,b-64,0,c,1,1,!0,!1,1,this.tk):this.I==
ae?this.Jf.A(a-64,b-64,0,c,1,1,!0,!1,1,this.tk):this.Jf.A(a-64,b-64,0,c,1,1,!0,!1);this.I==be?(this.Kf.A(a-32,b-32,0,0,1,1,!0,!1),this.He.A(a-32,b-32,0,this.bb,1,1,!0,!1,0.5)):this.I==ce?(this.Kf.A(a-32,b-32,0,0,1,1,!0,!1),this.He.A(a-32,b-32,0,this.bb,1,1,!0,!1,0.5)):this.Kf.A(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-this.Ob;this.I==de?(this.If.A(a-32,b-32,0,0,1,1,!0),this.He.A(a-32,b-32,0,this.Ca,1,1,!0,!1,0.5)):this.I==ee?(this.If.A(a-32,b-32,0,0,1,1,!0),this.He.A(a-32,b-32,0,this.Ca,1,1,
!0,!1,0.5)):this.If.A(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.Ob;this.Xi.A(a-8,b-64,0,0,1,1,!0,!1);b=this.c.height-1-82-64-this.Ob;this.I==fe?this.Ti.A(a-16,b-16,0,0,1,1,!0,!1):this.I==ge?this.Si.A(a-16,b-16,0,0,1,1,!0,!1):this.Ri.A(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-64-this.Ob;this.I==he?this.Qi.A(a-16,b-16,0,0,1,1,!0,!1):this.I==ie?this.Pi.A(a-16,b-16,0,0,1,1,!0,!1):this.Oi.A(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.Hb-this.Ob;this.I==je?this.Wi.A(a-16,
b-16,0,0,1,1,!0,!1):this.I==ke?this.Vi.A(a-16,b-16,0,0,1,1,!0,!1):this.Ui.A(a-16,b-16,0,0,1,1,!0,!1)}};this.jb=function(a){this.ic=a.ic;this.ua=a.gk*57.29577951308232;this.longitude=a.zb.longitude;this.latitude=a.zb.latitude;this.elevation=a.zb.elevation;this.bk=a.je;this.hk=a.Nb[0];this.ik=this.c.height-a.Nb[1]-1;if(this.I!=$d)this.bh=this.ua,this.Je=0;if(this.I==ge)a.Ea=Nb,a.sa=1;else if(this.I==ie)a.Ea=ec,a.sa=1;else if(this.I==ke)if(this.Hb>0)a.Ea=ec,a.sa=Math.sqrt(this.Hb)/4;else{if(this.Hb<
0)a.sa=Math.sqrt(-this.Hb)/4,a.Ea=Nb}else this.I==ee?(a.Ea=fc,a.sa=this.nb):this.I==$d?(a.Ea=gc,a.sa=this.bh+this.Je,a.sa=this.kb(a.sa),a.sa*=Math.PI/180):this.I==be?(a.Ea=hc,a.sa=Math.PI*this.bb/180):a.Ea=Mb;a.Rk=this.I==Zd?0:1};this.od=function(){this.bi=new R(this.c);S(this.bi,U+"flightnavigation/cmpbg.png");this.ci=new R(this.c);S(this.ci,U+"flightnavigation/cmpr.png");this.If=new R(this.c);S(this.If,U+"globenavigation/MoveWheel.png");this.Kf=new R(this.c);S(this.Kf,U+"globenavigation/YawPitchWheel.png");
this.Jf=new R(this.c);S(this.Jf,U+"globenavigation/yaw_pitch_adjust.png");this.He=new R(this.c);S(this.He,U+"globenavigation/movewheel_marker.png",l,l,!0);this.Oi=new R(this.c);S(this.Oi,U+"globenavigation/minus.png");this.Qi=new R(this.c);S(this.Qi,U+"globenavigation/minus_over.png");this.Pi=new R(this.c);S(this.Pi,U+"globenavigation/minus_clicked.png");this.Ri=new R(this.c);S(this.Ri,U+"globenavigation/plus.png");this.Ti=new R(this.c);S(this.Ti,U+"globenavigation/plus_over.png");this.Si=new R(this.c);
S(this.Si,U+"globenavigation/plus_clicked.png");this.Ui=new R(this.c);S(this.Ui,U+"globenavigation/slider.png");this.Wi=new R(this.c);S(this.Wi,U+"globenavigation/slider_over.png");this.Vi=new R(this.c);S(this.Vi,U+"globenavigation/slider_clicked.png");this.Xi=new R(this.c);S(this.Xi,U+"globenavigation/slider_rail.png");this.Ni=new R(this.c);S(this.Ni,U+"globenavigation/crosshair.png")};this.Zd=n();this.pd=function(a){W(a,Xc,this.Te,!1,this);W(a,Yc,this.Ve,!1,this);W(a,Zc,this.Ue,!1,this);W(a,Wc,
this.zh,!1,this)};this.Te=function(a){if(nd(a,jd)){var b=a.offsetX-this.c.L.offsetLeft,a=a.offsetY-this.c.L.offsetTop;this.zi=b;this.Ai=this.c.height-a-1;this.xa=b;this.ra=this.c.height-a-1;this.lb=!0;this.ic==1&&this.th(0)}};this.Ve=function(a){if(nd(a,jd)){var b=a.offsetY-this.c.L.offsetTop;this.xa=a.offsetX-this.c.L.offsetLeft;this.ra=this.c.height-b-1;this.lb=!1;this.ic==1&&this.th(0);this.Hb=0}};this.Ue=function(a){var b=a.offsetY-this.c.L.offsetTop,c=this.c.height-b-1-this.ra;this.xa=a.offsetX-
this.c.L.offsetLeft;this.ra=this.c.height-b-1;this.ic==1&&this.th(c)};this.zh=function(){this.I==ae&&le(this.c.Ia,this.longitude,this.latitude,this.elevation,0,-90,0)};this.th=function(a){var b=this.c.width-1-64-this.le-8,c=this.c.height-1-82-64-this.Ob+8,d=this.c.width-1-64-this.le-8,e=this.c.height-1-82-128-64-this.Ob+8,f=this.c.width-1-64-this.le-8,g=this.c.height-1-82-128-this.Hb-this.Ob+8,j=this.c.width-1-64-this.le,k=this.c.height-1-82-this.Ob,m=Math.abs(this.xa-j);m*=m;var q=Math.abs(this.ra-
k);q*=q;var r=this.c.width-1-64-this.le,o=this.c.height-1-this.Ob,s=Math.abs(this.xa-r);s*=s;var v=Math.abs(this.ra-o);v*=v;if(this.lb&&this.I==ke)if(this.Hb-=a,this.Hb<-40)this.Hb=-40;else{if(this.Hb>40)this.Hb=40}else if(this.lb&&this.I==ee)a=this.xa-j,k=this.ra-k,this.nb=this.Ca=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.Ca=360-this.Ca:this.nb=360-this.nb,this.Ca+=90,this.nb+=90,this.Ca=this.kb(this.Ca),this.nb=this.kb(this.nb);else if(this.lb&&this.I==$d){a=this.xa-r;k=this.ra-o;this.gb=180*
Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.gb=360-this.gb;this.gb-=90;this.gb=this.kb(this.gb);this.Je=this.kb(this.gb-this.Jc)}else if(this.lb&&this.I==be){a=this.xa-r;k=this.ra-o;this.bb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.bb=360-this.bb;this.bb+=90;this.bb=this.kb(this.bb)}else{this.I=0;if(this.xa>b&&this.ra>c-16&&this.xa<b+16&&this.ra<c)this.I=this.lb?ge:fe;if(this.xa>d&&this.ra>e-16&&this.xa<d+16&&this.ra<e)this.I=this.lb?ie:he;if(this.xa>f&&this.ra>g-16&&this.xa<f+16&&this.ra<
g)this.I=this.lb?ke:je;m+q<=729?this.lb?this.I=ee:(this.I=de,a=this.xa-j,k=this.ra-k,this.nb=this.Ca=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.Ca=360-this.Ca:this.nb=360-this.nb,this.Ca+=90,this.nb+=90,this.Ca=this.kb(this.Ca),this.nb=this.kb(this.nb)):this.Ca=0;if(s+v<=625){this.I=this.lb?be:ce;a=this.xa-r;k=this.ra-o;this.bb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.bb=360-this.bb;this.bb+=90;this.bb=this.kb(this.bb)}else if(s+v<=1600)if(this.lb){this.I=$d;a=this.xa-r;k=this.ra-o;this.gb=
180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.gb=360-this.gb;this.gb-=90;this.gb=this.kb(this.gb);this.Je=this.kb(this.gb-this.Jc);this.bh=this.ua}else{this.I=ae;a=this.xa-r;k=this.ra-o;this.Jc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.Jc=360-this.Jc;this.Jc-=90;this.Jc-=this.Je;this.Jc=this.kb(this.Jc)}}}}var Zd=0,fe=1,ge=2,he=3,ie=4,je=5,ke=6,de=7,ee=8,ae=9,$d=10,ce=11,be=12;Yd.prototype=new Vd;function me(){this.name="ogAoeImage";this.type=Fa;this.dc=-1;this.H=!1;this.options=l;this.tf=-1;this.Id=-180;this.Gd=-90;this.pe=180;this.oe=90;this.zn="";this.ab=!1;this.f=this.Cm=l;this.re=[];this.ke=[]}me.prototype=new G;u=me.prototype;u.va=function(a){this.options=a;this.Id=a.longitude0;this.Gd=a.latitude0;this.pe=a.longitude1;this.oe=a.latitude1;this.Am=a.url;a=this.parent.parent.c;this.Cm=new R(a,!0,256,256);this.f=new R(a);this.f.parent=this;S(this.f,this.Am,ne,oe,!0);this.dc=pe(this).kh(this)};
u.Pa=function(){pe(this).Bh(this.dc)};function pe(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.K)b=a.d.K.Th;return b}u.X=n();u.Y=n();
u.Na=function(){var a=this.parent.parent.c;if(this.ab!=!1){var b=a.d.K.Ja.r.length,c,d,e,f,g=l;this.ke=l;this.ke=[];for(var j=0;j<b;j++)if(g=a.d.K.Ja.r[j],!(g.g.length<1)&&!g.yn&&(c=g.Id,d=g.Gd,e=g.pe,f=g.oe,!(this.Id>e|this.pe<c|this.Gd>f|this.oe<d)&&(this.ke[g.g]=this.re[g.g],!this.re[g.g]))){var k=new Q(g.c);k.R(g.k);var m=g.f,q=new R(g.c,!0,256,256);q.qh();m.A(0,0,0,0,1,1,!0,!0,1);this.f.A((this.Id-c)*256/(e-c),(this.Gd-d)*256/(f-d),0,0,(this.pe-this.Id)/this.f.width/((e-c)/256),(this.oe-this.Gd)/
this.f.height/((f-d)/256),!0,!0,1);q.ph();k.wb(q);k.Wm=g.ma[0];k.Xm=g.ma[1];k.Ym=g.ma[2];this.re[g.g]=k;this.ke[g.g]=k}}for(var r in this.ke)a=this.ke[r],b=new O,b.R(a.c.Bb),b.a[12]+=a.Wm,b.a[13]+=a.Xm,b.a[14]+=a.Ym,a.c.tc(),a.c.vc(b),a.ha(),a.c.sc()};function ne(a){a.parent.ab=!0;a.G&&a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function oe(a){a.F&&a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function qe(a){this.c=a;this.ff=[]}qe.prototype.Na=function(){for(var a=0;a<this.ff.length;a++)this.ff[a].Na()};qe.prototype.kh=function(a){this.ff.push(a);return this.ff.length-1};qe.prototype.Bh=function(a){this.ff.splice(a,1)};function re(a){this.c=a;this.ka=[];this.Xc=new se}re.prototype.Na=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Xc.tg(b);for(var k=0;k<this.ka.length;k++){var m=this.ka[k];m.H||(this.Xc.sg(m.Od,m.Pd,m.Qd,m.Od+0.0010,m.Pd+0.0010,m.Qd+0.0010),f=m.Od-c,g=m.Pd-d,j=m.Qd-e,f=f*f+g*g+j*j,g=m.aj*m.aj,m.$i*m.$i>f&&g<f&&m.ha())}};re.prototype.Ye=function(a,b){for(var c=0;c<this.ka.length;c++)if(this.ka[c].We(a,b))return this.ka[c];return l};function te(a){this.c=a;this.na=[]}te.prototype.Na=function(){for(var a=0;a<this.na.length;a++){var b=this.na[a];b.H||b.ha()}};te.prototype.lh=function(a){this.na.push(a)};te.prototype.Ch=function(a){for(var b=0;b<this.na.length;b++)if(this.na[b]==a){this.na.splice(b,1);break}};te.prototype.Xe=function(a,b){for(var c=0;c<this.na.length;c++){var d=this.na[c].We(a,b);if(d)return d}return l};function ue(){this.e=this.y=this.x=0}function se(){this.s=Array(6);this.s[0]=new ve;this.s[1]=new ve;this.s[2]=new ve;this.s[3]=new ve;this.s[4]=new ve;this.s[5]=new ve;this.B=Array(8);this.B[0]=new ue;this.B[1]=new ue;this.B[2]=new ue;this.B[3]=new ue;this.B[4]=new ue;this.B[5]=new ue;this.B[6]=new ue;this.B[7]=new ue}function ve(){this.nc=this.mc=this.lc=this.Kc=0}
ve.prototype.Lb=function(){var a=Math.sqrt(this.lc*this.lc+this.mc*this.mc+this.nc*this.nc);this.lc/=a;this.mc/=a;this.nc/=a;this.Kc/=a};
se.prototype.sg=function(a,b,c,d,e,f){this.B[0].x=a;this.B[0].y=b;this.B[0].e=c;this.B[1].x=d;this.B[1].y=b;this.B[1].e=c;this.B[2].x=d;this.B[2].y=e;this.B[2].e=c;this.B[3].x=a;this.B[3].y=e;this.B[3].e=c;this.B[4].x=a;this.B[4].y=b;this.B[4].e=f;this.B[5].x=a;this.B[5].y=e;this.B[5].e=f;this.B[6].x=d;this.B[6].y=e;this.B[6].e=f;this.B[7].x=d;this.B[7].y=b;this.B[7].e=f;for(a=0;a<6;a++){b=8;for(c=0;c<8;c++)this.s[a].lc*this.B[c].x+this.s[a].mc*this.B[c].y+this.s[a].nc*this.B[c].e+this.s[a].Kc<0&&
--b;if(b==0)return!1}return!0};
se.prototype.tg=function(a){this.Gn=a;this.Ma=a.a;this.Ek=this.Ma[0];this.Ik=this.Ma[1];this.Mk=this.Ma[2];this.se=this.Ma[3];this.Fk=this.Ma[4];this.Jk=this.Ma[5];this.Nk=this.Ma[6];this.te=this.Ma[7];this.Gk=this.Ma[8];this.Kk=this.Ma[9];this.Ok=this.Ma[10];this.ue=this.Ma[11];this.Hk=this.Ma[12];this.Lk=this.Ma[13];this.Pk=this.Ma[14];this.ve=this.Ma[15];this.s[0].lc=this.se+this.Ek;this.s[0].mc=this.te+this.Fk;this.s[0].nc=this.ue+this.Gk;this.s[0].Kc=this.ve+this.Hk;this.s[0].Lb();this.s[1].lc=
this.se-this.Ek;this.s[1].mc=this.te-this.Fk;this.s[1].nc=this.ue-this.Gk;this.s[1].Kc=this.ve-this.Hk;this.s[1].Lb();this.s[2].lc=this.se-this.Ik;this.s[2].mc=this.te-this.Jk;this.s[2].nc=this.ue-this.Kk;this.s[2].Kc=this.ve-this.Lk;this.s[2].Lb();this.s[3].lc=this.se+this.Ik;this.s[3].mc=this.te+this.Jk;this.s[3].nc=this.ue+this.Kk;this.s[3].Kc=this.ve+this.Lk;this.s[3].Lb();this.s[4].lc=this.se+this.Mk;this.s[4].mc=this.te+this.Nk;this.s[4].nc=this.ue+this.Ok;this.s[4].Kc=this.ve+this.Pk;this.s[4].Lb();
this.s[5].lc=this.se-this.Mk;this.s[5].mc=this.te-this.Nk;this.s[5].nc=this.ue-this.Ok;this.s[5].Kc=this.ve-this.Pk;this.s[5].Lb()};x("ViewFrustum",se);se.prototype.TestBox=se.prototype.sg;se.prototype.Update=se.prototype.tg;function we(){this.gf=this.hf=!1;this.version=this.fd=this.Vm=this.rl=this.Td=this.Zm=this.Qk=this.Em=this.Fm=this.Da=this.za=this.Gm=this.Pm=this.Qm=l}
we.prototype.Pe=function(a){this.O=new XMLHttpRequest;this.O.open("GET",a,!0);var b=this;this.O.onreadystatechange=function(){a:if(b.O.readyState==4)if(b.O.status==200){var a=b.O.responseText,d;try{d=kc(a)}catch(e){alert(e);break a}if(d.extent)if(b.version=1,b.Ln=d.name,b.Da=d.maxlod,b.Qk=256,a=d.extent,b.za=a,b.rl=[b.Da,a[0],a[1],a[2],a[3]],d.type=="image")d.format=="png"?(b.Td="image/png",b.fd=".png"):d.format=="jpg"?(b.Td="image/jpg",b.fd=".jpg"):b.Td="image/png";else{if(d.type=="elevation")b.fd=
".json"}else if(b.version=0,b.Qm=d.layer,b.Pm=d.copyright,b.Gm=d.srs,b.za=d.boundingbox,b.Da=d.levelofdetail,b.Fm=d.imagewidth,b.Em=d.imageheight,b.Qk=d.tilesize,b.Zm=d.tilelayout,b.Td=d.tileformat,b.rl=d.bounds,b.Vm=d.center,b.Td=="image/png")b.fd=".png";else if(b.Td=="image/jpg")b.fd=".jpg";else if(b.Td=="elevation/json")b.fd=".json";b.hf=!0}else J(K("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.gf=!0};this.O.send()};x("DatasetInfo",we);we.prototype.Download=we.prototype.Pe;function X(){}X.prototype.Ze=function(a,b){this.Dj(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};X.prototype.Dj=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
X.prototype.Yb=function(a,b){b.x=0;b.y=0;b.Ab=a.length;for(var c,d=b.Ab;d>0;d--)switch(c=1<<d-1,a[b.Ab-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};x("MercatorQuadtree",X);X.prototype.QuadKeyToMercatorCoord=X.prototype.Ze;X.prototype.QuadKeyToNormalizedCoord=X.prototype.Dj;X.prototype.QuadKeyToTileCoord=X.prototype.Yb;var xe={wh:function(a){for(var b="",c=0;c<a.length;c++)c%2==0&&c>0&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};x("GlobeUtils",xe);x("GlobeUtils.MakeHierarchicalFilename",xe.wh);function ye(){this.ia=t(!1);this.Wb=t(!1);this.vb=n();this.Mc=t(0);this.ub=t(0);this.Vb=t(!1)};function ze(){this.o=new we;this.i=this.Ee=l;this.$=new X;this.coords=Array(4);this.Ic=1;this.ia=function(){return this.o.hf};this.Wb=function(){return this.o.gf};this.vb=function(a,b,c,d,e,f){if(this.ia()){var g=this.Ee+"/"+this.i+"/"+xe.wh(b+this.o.fd),a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;a.Ic=this.Ic;S(a,g,Ae,Be,!0)}};this.Mc=t(0);this.ub=function(){return this.o.Da?this.o.Da:0};this.Vb=function(a){if(a.length>this.o.Da)return!1;this.$.Ze(a,this.coords);var a=this.coords[0],b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.o.za[0],f=this.o.za[1],g=this.o.za[2],j=this.o.za[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Oa=function(a,b,c){this.Ic=c==l?1:c;this.Ee=a;this.i=b;this.o.Pe(a+"/"+b+".json")}}ze.prototype=new ye;function Ae(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function Be(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}x("i3dImageLayer",ze);ze.prototype.Failed=ze.prototype.Wb;ze.prototype.Ready=ze.prototype.ia;
ze.prototype.RequestTile=ze.prototype.vb;ze.prototype.Setup=ze.prototype.Oa;function Ce(){this.i=this.Fa=l;this.$=new X;this.aa=0;this.ia=t(!0);this.Wb=t(!1);this.vb=function(a,b,c,d,e,f){var g={};this.$.Yb(b,g);g=this.Fa[this.aa]+"/"+g.Ab+"/"+g.x+"/"+g.y+".png";a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;S(a,g,De,Ee,!0);this.aa++;if(this.aa>=this.Fa.length)this.aa=0};this.Mc=t(0);this.ub=t(16);this.Vb=function(a){if(a.length<17)return!0;return!1};this.Oa=p("Fa")}Ce.prototype=new ye;function De(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}
function Ee(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function Fe(){this.ia=t(!1);this.Wb=t(!1);this.vb=n();this.Mc=t(0);this.ub=t(0);this.Vb=t(!1)};function Ge(){this.o=new we;this.i=this.Ee=l;this.$=new X;this.coords=Array(4);this.ia=function(){return this.o.hf};this.Wb=function(){return this.o.gf};this.vb=function(a,b,c,d,e,f){if(this.ia()){var g=this.Ee+"/"+this.i+"_JSON/"+(xe.wh(b+".jso")+"n"),a=new Q(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;sc(a,g,He,Ie)}};this.Mc=t(0);this.ub=function(){return this.o.Da?this.o.Da:0};this.Vb=function(a){if(a.length>this.o.Da)return!1;this.$.Ze(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.o.za[0],f=this.o.za[1],g=this.o.za[2],j=this.o.za[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Oa=function(a,b){this.Ee=a;this.i=b;this.o.Pe(a+"/"+b+".json")}}Ge.prototype=new Fe;function He(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function Ie(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function Je(){this.o=new we;this.i=this.Ee=l;this.$=new X;this.coords=Array(4);this.aa=0;this.ia=function(){return this.o.hf};this.Wb=function(){return this.o.gf};this.vb=function(a,b,c,d,e,f){if(this.ia()){var g={};this.$.Yb(b,g);g=this.Fa[this.aa]+"/"+this.i+"/tiles/"+g.Ab+"/"+g.x+"/"+g.y+".json";a=new Q(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;sc(a,g,Ke,Le);this.aa++;if(this.aa>=this.Fa.length)this.aa=0}};this.Mc=t(0);this.ub=function(){return this.o.Da?this.o.Da:0};this.Vb=function(a){if(a.length>
this.o.Da)return!1;for(var b=a,c=a,d=0;d<this.o.Da-a.length;d++)b+="0",c+="3";d={};this.$.Yb(b,d);b=d.x;a=d.y;this.$.Yb(c,d);var c=d.x,d=d.y,e=this.o.za[0],f=this.o.za[1],g=this.o.za[3];return!(b>this.o.za[2]||c<e||a>g||d<f)};this.Oa=function(a,b){this.Fa=a;this.i=b;this.o.Pe(a[0]+"/"+b+"/layersettings.json")}}Je.prototype=new Fe;function Ke(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function Le(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function Me(){this.i=this.Fa=l;this.$=new X;this.sub=this.aa=0;this.Tm=["Galile","Galil","Gali","Gal","Ga","G"];this.ia=t(!0);this.Wb=t(!1);this.vb=function(a,b,c,d,e,f){var g={};this.$.Yb(b,g);g=this.Fa[this.aa]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.Ab+"&s="+this.Tm[this.sub];this.sub++;if(this.sub==5)this.sub=0;a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;S(a,g,De,Ee,!0);this.aa++;if(this.aa>=this.Fa.length)this.aa=0};this.Mc=t(0);this.ub=t(19);this.Vb=function(a){if(a.length<20)return!0;return!1};
this.Oa=p("Fa")}Me.prototype=new Ce;function Ne(){this.i=this.Fa=l;this.$=new X;this.aa=0;this.ia=t(!0);this.Wb=t(!1);this.vb=function(a,b,c,d,e,f){var g={};this.$.Yb(b,g);var j=Math.pow(2,g.Ab),g=this.Fa[this.aa]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.Ab)+"&key=[KEY]",a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;S(a,g,Oe,Pe,!0);this.aa++;if(this.aa>=this.Fa.length)this.aa=0};this.Mc=t(0);this.ub=t(16);this.Vb=function(a){if(a.length<17)return!0;return!1};this.Oa=p("Fa")}Ce.prototype=new ye;
function Oe(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function Pe(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function Qe(a,b){this.xi=a||-1;this.qm=b||!1;this.bd={};this.oa=0;this.Zk=Math.round(this.xi*0.75);this.pc={};this.pc.hits=0;this.pc.misses=0;Re(this,"Initialized cache with size "+a)}Qe.prototype.getItem=function(a){var b=this.bd[a];if(b!=l)Se(b)?(Te(this,a),b=l):b.Sg=(new Date).getTime();(b=b?b.value:l)?(this.pc.hits++,Re(this,"Cache HIT for key "+a)):(this.pc.misses++,Re(this,"Cache MISS for key "+a));return b};
Qe.prototype.setItem=function(a,b,c){this.bd[a]!=l&&Te(this,a);Ue(this,new function(a,b,c){(a==l||a=="")&&h(Error("key cannot be null or empty"));this.key=a;this.value=b;c==l&&(c={});if(c.Lg!=l)c.Lg=c.Lg.getTime();if(c.Ff==l)c.Ff=2;this.options=c;this.Sg=(new Date).getTime()}(a,b,c));Re(this,"Setting key "+a);if(this.xi>0&&this.oa>this.xi){var d=this;setTimeout(function(){d.Om.call(d)},0)}};Qe.prototype.clear=function(){for(var a in this.bd)Te(this,a);Re(this,"Cache cleared")};
Qe.prototype.Om=function(){var a=[],b;for(b in this.bd){var c=this.bd[b];Se(c)?Te(this,b):a.push(c)}if(a.length>this.Zk)for(a=a.sort(function(a,b){return a.options.Ff!=b.options.Ff?b.options.Ff-a.options.Ff:b.Sg-a.Sg});a.length>this.Zk;)Te(this,a.pop().key);Re(this,"Purged cached")};function Ue(a,b){a.bd[b.key]=b;a.oa++}
function Te(a,b){var c=a.bd[b];delete a.bd[b];a.oa--;Re(a,"removed key "+b);c.options.fm!=l&&setTimeout(function(){c.options.fm.call(l,c.key,c.value)},0);c.J!=l&&setTimeout(function(){c.J()},0)}function Se(a){var b=(new Date).getTime(),c=!1;a.options.Lg&&a.options.Lg<b&&(c=!0);!c&&a.options.vm&&a.Sg+a.options.vm*1E3<b&&(c=!0);return c}function Re(a,b){a.qm&&K("owg.Cache").info(b)};function Ve(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Eb(b);for(a=Eb(a/1+0);a>180;)a-=180;for(;a<-180;)a+=180;for(;b>90;)b-=180;for(;b<-90;)b+=180;c[0]=a;c[1]=b};function We(a,b,c){this.c=a;this.g=b;this.$=c;this.f=l;this.xb=!1;this.k=l;this.ma=[];this.ta=Array(5);this.ta[0]=new N;this.ta[1]=new N;this.ta[2]=new N;this.ta[3]=new N;this.ta[4]=new N;this.rf=0;this.images=l;this.Uh=!1;this.Kg=0;this.Ag=new N;this.Mf=new O;this.Id=-180;this.Gd=-90;this.pe=180;this.oe=90;var d=Array(4),e=Array(2);this.$.Ze(this.g,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new T;f=d[0];g=d[1];Ve(f,g,e);f=e[0];g=e[1];this.Id=f;this.oe=g;j.q(f,g,0);j.ja(a);f=d[2];g=d[1];Ve(f,g,
e);f=e[0];g=e[1];j.q(f,g,0);j.ja(b);f=d[2];g=d[3];Ve(f,g,e);f=e[0];g=e[1];this.pe=f;this.Gd=g;j.q(f,g,0);j.ja(c);d=new N;e=new N;d.q(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.q(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Jb(this.Ag,d,e);this.Ag.Lb()}
function Xe(a){if(a.rf==0&&a.Kg==0){var b=0,c=0;if(a.images!==l)for(var d=0;d<a.images.length;d++)a.images[d]!=l&&(b++,c=d);b==0?(a.f=a.c.Di,a.k===l&&Ye(a),a.k.wb(a.f),a.xb=!0,a.images=l):b==1?(a.f=a.images[c],a.k===l&&Ye(a),a.k.wb(a.f),a.xb=!0,a.images=l):(a.Uh=!0,a.k===l&&Ye(a),a.xb=!0)}}function Ze(a,b,c){a=b.caller;a.images[c]=b;a.rf-=1;Xe(a)}function $e(a,b,c){b.images[c]=l;b.rf-=1;Xe(b)}
function af(a,b){var c=b.caller;c.k=b;c.k.Ab=c.g.length;c.ma=b.ca;c.ta[0].q(b.D[0],b.D[1],b.D[2]);c.ta[1].q(b.U[0],b.D[1],b.D[2]);c.ta[2].q(b.U[0],b.U[1],b.D[2]);c.ta[3].q(b.D[0],b.U[1],b.D[2]);c.ta[4].q(0.5*(b.U[0]-b.D[0]),0.5*(b.U[1]-b.D[1]),0.5*(b.U[2]-b.D[2]));c.Kg-=1;Xe(c)}function bf(a,b){b.k=l;b.Kg-=1;Xe(b)}We.prototype.J=function(){this.f&&this.f.J();this.k&&this.k.J()};
function Ye(a){a.k=new Q(a.c);a.k.Ab=a.g.length;for(var b=Array(81),c=0;c<81;c++)b[c]=0;for(var d=Array(162),c=0;c<9;c++)for(var e=0;e<9;e++)d[2*(c*9+e)+0]=e*0.125,d[2*(c*9+e)+1]=1-c*0.125;var f=Array(243),g,j,c=Array(4),k=Array(2),m=Array(3);a.$.Ze(a.g,c);g=c[0];j=c[1];for(var q=(c[3]-j)/8,r=(c[2]-g)/8,o,s,v,y=new T,c=0;c<9;c++)for(e=0;e<9;e++){o=g+e*r;s=j+c*q;Ve(o,s,k);y.q(k[0],k[1],b[c*9+e]);y.ja(m);o=m[0];s=m[1];v=m[2];if(e==0&&c==0)a.ma=[o,s,v];e==0&&c==0?a.ta[0].q(o,s,v):e==8&&c==0?a.ta[1].q(o,
s,v):e==8&&c==8?a.ta[2].q(o,s,v):e==0&&c==8?a.ta[3].q(o,s,v):e==4&&c==4&&a.ta[4].q(o,s,v);f[c*27+3*e+0]=o-a.ma[0];f[c*27+3*e+1]=s-a.ma[1];f[c*27+3*e+2]=v-a.ma[2]}b=Array(405);for(c=0;c<81;c++)b[5*c+0]=f[3*c+0],b[5*c+1]=f[3*c+1],b[5*c+2]=f[3*c+2],b[5*c+3]=d[2*c+0],b[5*c+4]=d[2*c+1];for(var d=[],H,e=g=f=0;e<=7;e+=1){for(c=0;c<=8;c+=1)j=e,H=e+1,m=g%2==0?k=8-c:k=c,H+=m*9,d[f++]=j+k*9,d[f++]=H;d[f++]=H;g+=1}oc(a.k,b);rc(a.k,d,"TRIANGLESTRIP");a.k.wb(a.f);a.k.ca=a.ma;tc(a.k)}
We.prototype.Na=function(){if(this.Uh){this.Uh=!1;this.f=new R(this.c,!0,256,256);this.f.qh();for(var a=0;a<this.images.length;a++)this.images[a]!=l&&(this.images[a].Ic<1?this.images[a].A(0,0,0,0,1,1,!0,!0,this.images[a].Ic):this.images[a].A(0,0,0,0,1,1,!0,!0,1));this.f.ph();for(a=0;a<this.images.length;a++)this.images[a]!=l&&this.images[a].J();this.images=l;this.k.wb(this.f)}this.Mf.R(this.c.Bb);this.Mf.a[12]+=this.ma[0];this.Mf.a[13]+=this.ma[1];this.Mf.a[14]+=this.ma[2];this.c.tc();this.c.vc(this.Mf);
if(this.c.d.K.Ja.Ii==cf)this.k.mode="pt";else if(this.c.d.K.Ja.Ii==df)this.k.mode="pt_chroma";this.k.ha();this.c.sc()};function ef(a,b,c,d,e){this.c=a;this.ga=b;this.Ua=c;this.$=d;this.Eg=new Qe(e,!1)}ef.prototype.J=function(){this.$=this.Ua=this.ga=this.c=l;this.Eg.clear();this.Eg=l};ef.prototype.xj=function(){if(!this.ga)return!1;if(this.ga.length==0)return!1;for(var a=0;a<this.ga.length;a++)if(!this.ga[a].ia())return!1;if(this.Ua)for(a=0;a<this.Ua.length;a++)if(!this.Ua[a].ia())return!1;return!0};
ef.prototype.uc=function(a){var b=this.Eg.getItem(a);if(b==l){var c=b=new We(this.c,a,this.$),d=this.ga,e=this.Ua;if(d.length>0){c.rf=d.length;c.images=Array(c.rf);for(var f=0;f<d.length;f++)c.images[f]=l,d[f].Vb(c.g)?d[f].vb(c.c,c.g,f,Ze,$e,c):$e(0,c,f)}if(e&&e.length>0&&c.g.length>8&&e[0].Vb(c.g))c.Kg=1,e[0].vb(c.c,c.g,0,af,bf,c);this.Eg.setItem(a,b)}return b};
ef.prototype.ub=function(){var a=0,b=0;if(this.Ua.length>0)for(var c=0;c<this.Ua.length;c++)b=Math.max(b,this.Ua[c].ub());for(c=0;c<this.ga.length;c++)a=Math.max(a,this.ga[c].ub());if(b>0)return Math.min(b,a);return a};x("GlobeCache",ef);ef.prototype.IsReady=ef.prototype.xj;ef.prototype.RequestBlock=ef.prototype.uc;function ff(){this.o=new we;this.i=l;this.$=new X;this.coords=Array(4);this.Ic=1;this.aa=0;this.ia=function(){return this.o.hf};this.Wb=function(){return this.o.gf};this.vb=function(a,b,c,d,e,f){if(this.ia()){var g={};this.$.Yb(b,g);g=this.Fa[this.aa]+"/"+this.i+"/tiles/"+g.Ab+"/"+g.x+"/"+g.y+this.o.fd;a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;a.Ic=this.Ic;S(a,g,gf,hf,!0);this.aa++;if(this.aa>=this.Fa.length)this.aa=0}};this.Mc=t(0);this.ub=function(){return this.o.Da?this.o.Da:0};this.Vb=function(a){if(a.length>
this.o.Da)return!1;for(var b=a,c=a,d=0;d<this.o.Da-a.length;d++)b+="0",c+="3";d={};this.$.Yb(b,d);b=d.x;a=d.y;this.$.Yb(c,d);var c=d.x,d=d.y,e=this.o.za[0],f=this.o.za[1],g=this.o.za[3];return!(b>this.o.za[2]||c<e||a>g||d<f)};this.Oa=function(a,b,c){this.Ic=c==l?1:c;this.Fa=a;this.i=b;this.o.Pe(a[0]+"/"+b+"/layersettings.json")}}ff.prototype=new ye;function gf(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function hf(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}
x("owgImageLayer",ff);ff.prototype.Failed=ff.prototype.Wb;ff.prototype.Ready=ff.prototype.ia;ff.prototype.RequestTile=ff.prototype.vb;ff.prototype.Setup=ff.prototype.Oa;function jf(a){this.c=a;this.ga=[];this.Ua=[];this.$=new X;this.em=1E3;this.Va=l;this.r=[];this.xk=0;this.sf={};this.sf.Gg=0;this.jf=l;this.yi=0;this.$k=1;this.Xc=new se;this.V=Array(3);this.wi=new O;this.Xg=new Q(this.c);this.ah=new Q(this.c);this.Ld=[8/255,24/255,58/255];this.Ud=[1,1,1];this.Ii=cf;this.al={}}u=jf.prototype;
u.nh=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new ze;c.Oa(a.url[0],b,a.transparency);b=this.ga.length;this.ga.push(c);kf(this)}}else if(a.service=="osm"){if(a.url&&a.url.length>0)c=new Ce,c.Oa(a.url),b=this.ga.length,this.ga.push(c),kf(this)}else if(a.service=="owg"){if(a.url&&a.url.length>0)b=a.layer,c=new ff,c.Oa(a.url,b,a.transparency),b=this.ga.length,this.ga.push(c),kf(this)}else if(a.service=="goo"){if(a.url&&a.url.length>0)c=new Me,c.Oa(a.url),
b=this.ga.length,this.ga.push(c),kf(this)}else if(a.service=="oym"&&a.url&&a.url.length>0)c=new Ne,c.Oa(a.url),b=this.ga.length,this.ga.push(c),kf(this);return b};u.mh=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new Ge;c.Oa(a.url[0],b);b=this.Ua.length;this.Ua.push(c);kf(this)}}else if(a.service=="owg"&&a.url&&a.layer&&a.url.length>0){var d=a.url,b=a.layer,c=new Je;c.Oa(d,b);b=this.Ua.length;this.Ua.push(c);kf(this)}return b};
u.lg=function(a){a<0||a>=this.ga.length||(this.ga.splice(a,1),kf(this))};function kf(a){if(a.Va)a.Va.J(),a.Va=l;a.Va=new ef(a.c,a.ga,a.Ua,a.$,a.em)}
u.Na=function(a,b){this.wi.R(b);this.Xc.tg(b);this.jf=a;if(this.Va&&this.Va.xj()){this.yi=this.Va.ub();var c=this.Va.uc("0"),d=this.Va.uc("1"),e=this.Va.uc("2"),f=this.Va.uc("3");if(c.xb&&d.xb&&e.xb&&f.xb){this.r=[];this.r.push(c);this.r.push(d);this.r.push(e);this.r.push(f);for(this.sf.Gg=0;this.sf.Gg!=this.r.length;)a:{c=this.sf.Gg;if(this.r[c].g.length!=this.yi&&this.r[c].xb&&lf(this,c)){var g=this.r[c].g,d=this.Va.uc(g+"0"),e=this.Va.uc(g+"1"),f=this.Va.uc(g+"2"),g=this.Va.uc(g+"3");if(d.xb&&
e.xb&&f.xb&&g.xb){this.r.splice(c,1);this.r.push(d);this.r.push(e);this.r.push(f);this.r.push(g);break a}}this.sf.Gg++}for(c=0;c<this.r.length;)e=this.r[c],d=e.ta[4].a,e=e.Ag.a,f=this.jf.a,this.V[0]=f[0]-d[0],this.V[1]=f[1]-d[1],this.V[2]=f[2]-d[2],(this.V[0]*e[0]+this.V[1]*e[1]+this.V[2]*e[2])/Math.sqrt(this.V[0]*this.V[0]+this.V[1]*this.V[1]+this.V[2]*this.V[2])>=0.4?this.r.splice(c,1):c++;for(c=0;c<this.r.length;c++)this.r[c].Na();d=[];e=[];for(c=0;c<this.r.length;c++){var f=this.r[c].g,g=0,j=
f.charAt(0);if(j=="0"||j=="1")g=1;if(j=="2"||j=="3")g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if((j=="0"||j=="1")&&g=="2"){g=0;break}if((j=="2"||j=="3")&&g=="1"){g=0;break}}g==1&&d.push(this.r[c]);g==2&&e.push(this.r[c])}d.length>3&&mf(this,d);e.length>3&&nf(this,e)}}};
function lf(a,b){var c=!0,d=a.r[b],e=d.g.length;if(e>a.yi)return!1;if(e<3)return!0;c=a.Xc.sg(d.k.D[0],d.k.D[1],d.k.D[2],d.k.U[0],d.k.U[1],d.k.U[2]);if(!c)return!1;var f=d.ta[4].a,g=d.Ag.a,e=a.jf.a;a.V[0]=e[0]-f[0];a.V[1]=e[1]-f[1];a.V[2]=e[2]-f[2];f=Math.sqrt(a.V[0]*a.V[0]+a.V[1]*a.V[1]+a.V[2]*a.V[2]);f>0&&(a.V[0]/=f,a.V[1]/=f,a.V[2]/=f);a.V[0]*g[0]+a.V[1]*g[1]+a.V[2]*g[2]>0.4&&(c=!1);if(!c)return!1;for(var c=[0,0,0],g=0,f=1.0E20,j=d.k.m.length/d.k.w,k=0;k<j;k++)c[0]=e[0]-(d.k.m[5*k]+d.ma[0]),c[1]=
e[1]-(d.k.m[5*k+1]+d.ma[1]),c[2]=e[2]-(d.k.m[5*k+2]+d.ma[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.$k;g=d.ta[0].Le();g.Hh(d.ta[1]);return c*g.vh()/e>1}
u.qd=function(a,b,c){for(var a=this.c.md(a,b,this.wi,!0),b=[],d=0;d<this.r.length;d++){var e=this.r[d].k.D,f=this.r[d].k.U;this.r[d].k.Bg.Se(a.x,a.y,a.e,a.Cc,a.Dc,a.Ec,e[0],e[1],e[2],f[0],f[1],f[2])&&b.push(this.r[d])}e=1.0E20;c.hit=!1;c.numhits=b.length;for(d=0;d<b.length;d++)if((f=b[d].k.Pc(a.x,a.y,a.e,a.Cc,a.Dc,a.Ec))&&f.p<e)c.hit=!0,e=f.p;c.tmin=e;if(c.hit)c.x=a.x+e*a.Cc,c.y=a.y+e*a.Dc,c.z=a.e+e*a.Ec,a=new T(0,0,0),a.Xb(c.x,c.y,c.z),c.lng=a.t[0],c.lat=a.t[1],c.elv=a.t[2]};
u.kg=function(a,b,c){var d=1,e={};this.qd(a,b,e);if(e.hit){var d=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),f=this.c.md(a,b,this.wi,!0);c.hit=!1;var g=f.x,b=f.y,a=f.e,j=f.Cc,e=f.Dc,f=f.Ec,k=j*j+e*e+f*f,m=g*j+b*e+a*f,d=m*m-k*(g*g+b*b+a*a-d*d);if(!(d<=0))d=(0-m-Math.sqrt(d))/k,g+=j*d,b+=e*d,a+=f*d,e=1/Math.sqrt(g*g+b*b+a*a),c.hit=!0,c.x=g*e,c.y=b*e,c.z=a*e,a=new T(0,0,0),a.Xb(c.x,c.y,c.z),c.lng=a.t[0],c.lat=a.t[1],c.elv=a.t[2]}};
u.bg=function(a,b){var c={hasvalue:!1,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new T(a,b,0);f.ja(e);f.q(a,b,-1);f.ja(d);var g,j,f=d[0];g=d[1];j=d[2];var k=e[0]-d[0],m=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+m*m+d*d);k/=e;m/=e;d/=e;for(var e=[],q=0;q<this.r.length;q++){var r=this.r[q].k.D,o=this.r[q].k.U;this.r[q].k.Bg.Se(f,g,j,k,m,d,r[0],r[1],r[2],o[0],o[1],o[2])&&e.push(this.r[q])}r=1.0E20;for(q=0;q<e.length;q++)if((o=e[q].k.Pc(f,g,j,k,m,d))&&o.p<r)c.hasvalue=!0,c.lod=e[q].k.Ab,r=o.p;if(c.hasvalue)c.x=
f+r*k,c.y=g+r*m,c.z=j+r*d,f=new T(0,0,0),f.Xb(c.x,c.y,c.z),c.lng=f.t[0],c.lat=f.t[1],c.elevation=f.t[2];return c};
function mf(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].g.length>c)c=b[d].g.length;for(d=0;d<b.length;d++)for(b[d].ob=b[d].g;b[d].ob.length<c;)b[d].ob+="0";b.sort(function(a,b){return parseInt(a.ob,2)-parseInt(b.ob,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.Ld[0],a.Ld[1],a.Ld[2],1],e=[],d=0;d<b.length;d++)for(var f=2;b[d].k.m[f]==0;)c.push(b[d].ma[0]+b[d].k.m[f-2]),c.push(b[d].ma[1]+b[d].k.m[f-1]),c.push(b[d].ma[2]+b[d].k.m[f]),c.push(a.Ld[0]),c.push(a.Ld[1]),c.push(a.Ld[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.Xg.J();a.Xg=new Q(a.c);a.Xg.ld({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.Xg.ha()}
function nf(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].g.length>c)c=b[d].g.length;for(d=0;d<b.length;d++){b[d].ob=b[d].g;b[d].ob=b[d].ob.replace(/2/g,"0");for(b[d].ob=b[d].ob.replace(/3/g,"1");b[d].ob.length<c;)b[d].ob+="0"}b.sort(function(a,b){return parseInt(b.ob,2)-parseInt(a.ob,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.Ud[0],a.Ud[1],a.Ud[2],1],e=[],d=0;d<b.length;d++){var f=b[d].k.m.length;for(f-=1;b[d].k.m[f]==0;)c.push(b[d].ma[0]+b[d].k.m[f-4]),c.push(b[d].ma[1]+b[d].k.m[f-
3]),c.push(b[d].ma[2]+b[d].k.m[f-2]),c.push(a.Ud[0]),c.push(a.Ud[1]),c.push(a.Ud[2]),c.push(1),f-=5}for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.ah.J();a.ah=new Q(a.c);a.ah.ld({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.ah.ha()}
u.Zf=function(){if(!this.jf)return NaN;var a=[],b=this.jf.a,c=new N;if(this.Ua.length==0)return c=new T,c.Xb(b[0],b[1],b[2]),c.t[2];c.q(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.r.length;d++){var e=this.r[d].k.D,f=this.r[d].k.U;this.r[d].k.Bg.Se(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.r[d])}e=1.0E20;f=!1;for(d=0;d<a.length;d++){var g=a[d].k.Pc(b[0],b[1],b[2],c[0],c[1],c[2]);if(g&&g.p<e)f=!0,e=g.p}if(f)return b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*8388607,
e<0&&(b=-b),this.xk=b;return this.xk};u.pg=p("Ii");var cf=0,df=1;function of(){this.name="ogGeometry";this.type=ua;this.mb=[];this.re=[];this.dc=-1;this.H=!1;this.ne="";this.options=this.Rc=this.Vc=l;this.tf=-1;this.dd=l}of.prototype=new G;u=of.prototype;u.va=function(a){this.options=a;a.url&&pf(this,a.url);a.jsonobject&&this.ld(a.jsonobject)};u.Pa=function(){qf(this).Dh(this.dc);if(this.dd!=l)I(this.dd);else{for(var a=0;a<this.mb.length;a++)I(this.mb[a]);this.W=l}};function qf(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.K)b=a.d.K.Pg;return b}
u.sd=function(a,b,c,d,e,f){for(var g=0;g<this.mb.length;g++)this.mb[g].sd(a,b,c,d,e,f)};u.af=function(a,b,c,d){for(var e=0;e<this.mb.length;e++)this.mb[e].af(a,b,c,d)};u.X=function(){if(this.dd!=l)this.dd.X();else for(var a=0;a<this.mb.length;a++)this.mb[a].X()};u.Y=function(){if(this.dd!=l)this.dd.Y();else for(var a=0;a<this.mb.length;a++)this.mb[a].Y()};
u.ld=function(a){if(a.Type=="pointcloud")this.options=a,this.dd=Y(Ga,this,this.options),a=qf(this),this.dc=a.Ke(this.dd.Pb);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=Y(va,this,this.options);this.mb.push(c);this.re.push(c.Mi)}this.Vc&&this.Vc(this.id);a=qf(this);this.dc=a.Ke(this.re)}};
function pf(a,b){b==l?alert("invalid json-url"):(a.ne=b,a.O=new window.XMLHttpRequest,a.O.open("GET",a.ne,!0),a.O.onreadystatechange=function(){a.O.readyState==4&&(a.O.status==404?a.Rc&&a.Rc(a.id):a.ld(kc(a.O.responseText)))},a.O.send())};function rf(a){this.c=a;this.W=[];this.Xc=new se;this.Rn=1E5*L*1E5*L}
rf.prototype.Na=function(a,b){this.Xc.tg(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.W.length;f++)if(this.W[f]instanceof vc){var g=this.W[f];g.H||g.ha()}else for(var g=this.W[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var q=k[m];if(!q.H){var r=q.D[0]-c,o=q.D[1]-d,s=q.D[2]-e,r=r*r+o*o+s*s,o=q.ul*q.ul;this.Xc.sg(q.D[0],q.D[1],q.D[2],q.U[0],q.U[1],q.U[2])&&!(r>o)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),
q.ha(),this.c.b.disable(this.c.b.BLEND))}}};rf.prototype.Ke=function(a){this.W.push(a);return this.W.length-1};rf.prototype.Dh=function(a){this.W.splice(a,1)};rf.prototype.rd=function(a,b){for(var c=this.c.md(a,b,this.c.wa,!0),d=1E4,e=l,f=0;f<this.W.length;f++)for(var g=this.W[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var q=k[m];if(!q.H){q.Sj(c.x,c.y,c.e,c.Cc,c.Dc,c.Ec);var r=q.Pc(c.x,c.y,c.e,c.Cc,c.Dc,c.Ec);if(r&&r.p<d)d=r.p,e=q}}if(e)return e.Lm;return-1};function sf(){this.Ja=l;this.eb=new N;this.Th=this.Dg=this.Pg=this.$g=l;this.hb=n();this.ib=function(){this.Ja.Na(this.eb,this.c.wa);this.$g.Na(this.eb,this.c.wa);this.Pg.Na(this.eb,this.c.wa);this.Dg.Na(this.eb,this.c.wa);this.Th.Na(this.eb,this.c.wa)};this.jb=function(a){a=a.nd();this.eb.q(a.x,a.y,a.e)};this.od=function(){this.Ja=new jf(this.c);this.$g=new re(this.c);this.Pg=new rf(this.c);this.Dg=new te(this.c);this.Th=new qe(this.c)};this.Zd=n();this.pd=n()}sf.prototype=new Vd;function tf(a){dd.call(this);this.um=a;this.yk=W(this.um,Hc?"DOMMouseScroll":"mousewheel",this)}ka(tf,Xd);var uf="mousewheel";
tf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Fc;if(a.type=="mousewheel"){c=1;if(Gc||Ic&&(Lc||Uc("532.0")))c=40;d=Ic&&Bc&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;a.wheelDeltaX!==i?(b=Ic&&Bc&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Ic&&Bc&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),a.axis!==i&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;typeof this.Bk=="number"&&(b=Math.min(Math.max(b,-this.Bk),this.Bk));typeof this.Ck==
"number"&&(c=Math.min(Math.max(c,-this.Ck),this.Ck));b=new vf(d,a,b,c);try{this.dispatchEvent(b)}finally{b.pf()}};tf.prototype.bc=function(){tf.Fe.bc.call(this);Jd(this.yk);delete this.yk};function vf(a,b,c,d){b&&this.ad(b,i);this.type=uf;this.detail=a;this.vn=c;this.Ig=d}ka(vf,id);function wf(){this.pm=this.ui=0;this.La=new O;this.ef=new N;this.ef.q(1,0,0);this.T=0;this.Z=-0.03;this.Mb=0;this.P=7.616;this.N=45.9088;this.u=17E3;this.ge=this.fe=this.Zl=this.yg=this.zg=0;this.gn=!1;this.Yl=this.$l=0;this.Lh=this.Vl=this.df=this.Wj=this.Vj=this.xc=1;this.am=this.bm=this.Zb=this.$b=0;this.Tl=!1;this.cn=0.0010;this.jn=-0.4;this.ud=!1;this.Ha=this.Ga=this.Ul=0;this.Uj=!1;this.he=new N;this.Sh=this.Rh=0;this.td=!1;this.Q=Array(3);this.Nd=new T(0,0,0);this.qe=new O;this.zf=new O;this.xf=
new O;this.Jd=new O;this.La=new O;this.Gc=new O;this.yf=new O;this.Jd.$f();this.hc=100;this.Xa=l;this.hb=function(){this.c.Gh(this.La)};this.ib=n();this.jb=function(a){a.ic=0;this.Nd.q(this.P,this.N,this.u);this.Nd.ja(this.Q);this.ef.q(this.Q[0],this.Q[1],this.Q[2]);this.zf.wc(this.Q[0],this.Q[1],this.Q[2]);this.xf.kd(this.P,this.N);this.qe.oh(this.T,this.Z,this.Mb);this.Gc.S(this.zf,this.xf);this.yf.S(this.Gc,this.qe);this.Gc.S(this.yf,this.Jd);this.La.Xd(this.Gc);a.gk=this.T;a.ea(this.Q[0],this.Q[1],
this.Q[2]);var b=this.N,c=this.u;a.zb.longitude=this.P;a.zb.latitude=b;a.zb.elevation=c;if(this.Xa)this.Xa.fc=this.P,this.Xa.ec=this.N,this.Xa.cc=this.u,this.Xa.pitch=this.Z*57.29577951308232,this.Xa.ua=this.T*57.29577951308232,this.Xa.Gb=this.Mb*57.29577951308232};this.od=n();this.Zd=n();this.pd=function(a){W(window,$c,this.xh,!1,this);W(window,ad,this.yh,!1,this);W(a,Xc,this.Te,!1,this);W(a,Yc,this.Ve,!1,this);W(a,Zc,this.Ue,!1,this);a=new tf(a);W(a,uf,this.Ah,!1,this)};this.Ah=function(a){a.Ig>
0?this.Zb>0?this.$b=this.Zb=0:this.$b+=0.05:this.$b>0?this.Zb=this.$b=0:this.Zb+=0.05};this.xh=function(a){if(a.keyCode==81)this.ge=this.xc*this.Lh;else if(a.keyCode==65)this.ge=-this.xc*this.Lh;else if(a.keyCode==83)this.fe=0.5*this.df;else if(a.keyCode==88)this.fe=-0.5*this.df;this.ui=a.keyCode};this.yh=function(a){if(a.keyCode==81)this.ge=0;else if(a.keyCode==65)this.ge=0;else if(a.keyCode==83)this.fe=0;else if(a.keyCode==88)this.fe=0;this.ui=0};this.Te=function(a){if(nd(a,jd))this.Mh=0,this.he.q(0,
0,0),this.Rh=a.offsetX,this.Sh=a.offsetY,this.Uj=this.td=!0;this.Ga=a.offsetX;this.Ha=a.offsetY};this.Ve=function(a){if(nd(a,jd))this.td=this.Uj=!1;this.Ga=a.offsetX;this.Ha=a.offsetY;this.zg=this.yg=this.Mh=0};this.Ue=function(a){this.Ga=a.offsetX;this.Ha=a.offsetY;if(this.td){var b=(this.Rh-a.offsetX)/this.c.width,c=(this.Sh-a.offsetY)/this.c.height;b*=b;c*=c;this.Mh=Math.sqrt(b+c);this.he.q(a.offsetX-this.Rh,this.c.height-1-a.offsetY-(this.c.height-1-this.Sh),0);this.he.Lb();var a=this.he.a[0],
d=this.he.a[1],e=0,f=0;a>0?e=1:a<0&&(e=-1);d>0?f=1:d<0&&(f=-1);this.yg=this.xc*this.Vj*c*f;this.zg=this.Wj*b*e}};this.rc=function(a){var b=this.fe*a/500,c=this.zg*a/500,d=this.ge*a,e=0,e=0,f=this.u/5E5*(this.u/5E5);f>10?f=10:f<0.0010&&(f=0.0010);var g=f*this.yg*a/250;if(this.$b>0){var j=0.5*this.df*a/1E3;this.Z+=j;this.$b-=j;if(this.$b<0)this.Z+=this.$b,this.$b=0;this.ud=!0}if(this.Zb>0){j=0.5*this.df*a/1E3;this.Z-=j;this.Zb-=j;if(this.Zb<0)this.Z-=this.Zb,this.Zb=0;this.ud=!0}if(b)this.Z+=b,this.ud=
!0;if(c){this.T+=c;this.T>2*Math.PI&&(this.T-=2*Math.PI);if(this.T<0)this.T=2*Math.PI-this.T;this.ud=!0}if(this.ud&&(e=this.c.Zf(),isNaN(e)))e=this.hc;if(d&&(a=1E3*d*f,this.u+=a,e+=a,this.u>7E6))this.u=7E6;if(g){a=this.N*0.017453292519943295;d=Math.sin(a);f=Math.cos(a);c=this.T;b=this.P*0.017453292519943295;d=Bb/Math.sqrt(1-Cb*d*d);f=Bb/(d/(1+Db*f*f))*g*Math.cos(c);j=Bb/d*g*Math.sin(c)/Math.cos(a);g=Bb/d*g*Math.sin(c)*Math.tan(a)+c;this.P=57.29577951308232*(j+b);this.N=57.29577951308232*(f+a);for(this.T=
g;this.P>180;)this.P-=360;for(;this.P<-180;)this.P+=360;for(;this.N>90;)this.N=180-this.N;for(;this.N<-90;)this.N=-180-this.N;this.ud=!0}e<this.hc&&this.ud&&(this.u+=this.hc-e);if(this.Xa)this.Xa.fc=this.P,this.Xa.ec=this.N,this.Xa.cc=this.u,this.Xa.pitch=this.Z*57.29577951308232,this.Xa.ua=this.T*57.29577951308232,this.Xa.Gb=this.Mb*57.29577951308232}}wf.prototype=new Vd;u=wf.prototype;u.ea=function(a,b,c){this.P=a;this.N=b;this.u=c};u.nd=function(){return{longitude:this.P,latitude:this.N,elevation:this.u}};
u.$d=function(a,b,c){this.T=a;this.Z=b;this.Mb=c};u.og=n();u.Re=function(){return{ua:this.T,pitch:this.Z,Gb:this.Mb}};function xf(){this.pm=this.ui=0;this.La=new O;this.ee=!1;this.ef=new N;this.ef.q(1,0,0);this.T=0;this.Z=-1.5707963267948966;this.Mb=0;this.P=7.77442050946391;this.N=47.472720418012834;this.u=75E5;this.Qc=yf;this.Oh=this.Nh=this.M=0;this.hn=!0;this.Yl=this.$l=this.ge=this.fe=this.Zl=this.yg=this.zg=this.Ph=this.Qh=0;this.Lh=this.Vl=this.df=this.Wj=this.Vj=this.xc=1;this.am=this.bm=this.Zb=this.$b=0;this.Tl=!1;this.Ul=0;this.mn=new O;this.Xl=this.Wl=this.Ha=this.Ga=0;this.he=new N;this.Kh=this.wg=this.td=
!1;this.kn=this.ln=this.Mh=0;this.Q=Array(3);this.Nd=new T(0,0,0);this.qe=new O;this.zf=new O;this.xf=new O;this.Jd=new O;this.La=new O;this.Gc=new O;this.yf=new O;this.Jd.$f();this.xg=!1;this.ak=this.$j=this.Zj=0;this.Yj=1;this.de=!1;this.dn=this.en=this.fn=0;this.Ra={};this.Qa={};this.Jh=new O;this.Tj=new O;this.vg=new O;this.nn=new O;this.on=new O;this.hc=50;this.Wg=1E7;this.Ea=Mb;this.sa=0;this.je=!1;this.Nb=[0,0];this.Cd=0;this.Cg=this.ac=!1;this.hb=function(){this.c.Gh(this.La)};this.ib=n();
this.jb=function(a){this.u<2E3?(this.c.d.jc.Ci=1.0E-7,this.c.d.jc.hi=1.2):(this.c.d.jc.Ci=1.0E-5,this.c.d.jc.hi=10);this.Ea=a.Ea;this.sa=a.sa;a.je=this.je;a.Nb[0]=this.Nb[0];a.Nb[1]=this.Nb[1];a.ic=1;this.ee=a.Rk!=0?!0:!1;if(this.Qc==zf&&!this.ee&&!this.c.Ia.Fd){if(this.wg)this.wg=!1,this.dm(this.Ga,this.Ha);if(this.td&&this.Kh)this.Kh=!1,this.cm(this.Ga,this.Ha)}this.Nd.q(this.P,this.N,this.u);this.Nd.ja(this.Q);this.ef.q(this.Q[0],this.Q[1],this.Q[2]);this.zf.wc(this.Q[0],this.Q[1],this.Q[2]);this.xf.kd(this.P,
this.N);this.xg?(this.qe.ag(this.Zj,this.$j,this.ak,this.Yj),this.Jd.mj()):this.qe.oh(this.T,this.Z,this.Mb);this.Gc.S(this.zf,this.xf);this.yf.S(this.Gc,this.qe);this.Gc.S(this.yf,this.Jd);this.La.Xd(this.Gc);a.gk=this.T;a.ea(this.Q[0],this.Q[1],this.Q[2]);var b=this.N,c=this.u;a.zb.longitude=this.P;a.zb.latitude=b;a.zb.elevation=c};this.od=n();this.Zd=n();this.pd=function(a){W(window,$c,this.xh,!1,this);W(window,ad,this.yh,!1,this);W(a,Xc,this.Te,!1,this);W(a,Zc,this.Ue,!1,this);W(a,Yc,this.Ve,
!1,this);W(a,Wc,this.zh,!1,this);a=new tf(a);W(a,uf,this.Ah,!1,this)};this.cf=function(){var a=yf;(this.M&Af)==Bf&&((this.M&Cf)==0?a=zf:(this.M&Cf)==Df?a=Ef:(this.M&Cf)==Ff&&(a=Gf));(this.M&Af)==Hf&&(a=Gf);if(a!=this.Qc){if(this.Qc==Gf)this.T=this.Qh+45*Math.PI*this.xc*(this.Ga-this.Nh)/(180*this.c.height),this.Z=this.Ph+45*Math.PI*this.xc*(this.Oh-this.Ha)/(180*this.c.height);this.Qc=a;if(this.Qc==Gf)this.Nh=this.Ga,this.Oh=this.Ha,this.Qh=this.T,this.Ph=this.Z}if(this.Qc==Gf)this.T=this.Qh+45*Math.PI*
this.xc*(this.Ga-this.Nh)/(180*this.c.height),this.Z=this.Ph+45*Math.PI*this.xc*(this.Oh-this.Ha)/(180*this.c.height)};this.Ah=function(a){if(this.Qc==yf)if((this.M&Cf)==0){var b={},c,d;this.Cd>0?(c=this.Nb[0],d=this.Nb[1]):(c=this.Ga,d=this.Ha);this.c.qd(c,d,b);if(b.hit){this.Nb=[c,d];this.Cd=500;this.Nd.q(this.P,this.N,this.u);this.Nd.ja(this.Q);c=this.Q[0]-b.x;d=this.Q[1]-b.y;b=this.Q[2]-b.z;a.Ig>0?(c*=0.1,d*=0.1,b*=0.1):(c*=-1/0.9+1,d*=-1/0.9+1,b*=-1/0.9+1);var e=new T(0,0,0);e.Xb(this.Q[0]+c,
this.Q[1]+d,this.Q[2]+b);this.P=e.t[0];this.N=e.t[1];if(this.Cg){if(e.t[2]>this.u)this.u=e.t[2]}else this.u=e.t[2];this.ac=!0;if(this.u<this.hc)this.u=this.hc,this.ac=!0;else if(this.u>this.Wg)this.u=this.Wg,this.ac=!0}}else(this.M&Cf)==Df&&(this.Z+=5*a.Ig*Math.PI*this.xc/180);return this.Ba(a)};this.xh=function(a){if(!this.ee&&!this.c.Ia.Fd){if(a.keyCode==66)this.xg=!1;if(a.keyCode==16)return this.M|=Df,this.Ba(a);else if(a.keyCode==17)return this.M|=Ff,this.Ba(a);else if(a.keyCode==37||a.keyCode==
65)return this.M|=If,this.Ba(a);else if(a.keyCode==38||a.keyCode==87)return this.M|=Jf,this.Ba(a);else if(a.keyCode==39||a.keyCode==68)return this.M|=Kf,this.Ba(a);else if(a.keyCode==40||a.keyCode==83)return this.M|=Lf,this.Ba(a);this.cf();return!0}};this.yh=function(a){if(a.keyCode==16)return this.M&=~Df,this.Ba(a);else if(a.keyCode==17)return this.M&=~Ff,this.Ba(a);else if(a.keyCode==37||a.keyCode==65)return this.M&=~If,this.Ba(a);else if(a.keyCode==38||a.keyCode==87)return this.M&=~Jf,this.Ba(a);
else if(a.keyCode==39||a.keyCode==68)return this.M&=~Kf,this.Ba(a);else if(a.keyCode==40||a.keyCode==83)return this.M&=~Lf,this.Ba(a);this.cf();return!0};this.zh=function(a){if(!this.ee&&!this.c.Ia.Fd){var b={};this.c.qd(this.Ga,this.Ha,b);if(b.hit){this.c.ng(2E3);var c=this.u;c>1E6?le(this.c.Ia,b.lng,b.lat,1E6,i,i,i):c>25E4?le(this.c.Ia,b.lng,b.lat,25E4,i,i,i):c>5E4?le(this.c.Ia,b.lng,b.lat,5E4,i,i,i):(c=b.elv+5E3,le(this.c.Ia,b.lng,b.lat,c,0,-90,0));this.Nb=[this.Ga,this.Ha];this.Cd=2500}return this.Ba(a)}};
this.Te=function(a){if(!this.ee&&!this.c.Ia.Fd)return this.Ga=a.offsetX-this.c.L.offsetLeft,this.Ha=a.offsetY-this.c.L.offsetTop,nd(a,jd)?(this.M|=Bf,document.body.style.cursor="move",this.wg=!0):nd(a,kd)?this.M|=Mf:nd(a,ld)&&(this.M|=Hf),this.cf(),this.Ba(a)};this.Ve=function(a){this.td=!0;this.Ga=a.offsetX-this.c.L.offsetLeft;this.Ha=a.offsetY-this.c.L.offsetTop;nd(a,jd)?(this.M&=~Bf,this.de=!1,document.body.style.cursor="default",this.wg=!1):nd(a,kd)?this.M&=~Mf:nd(a,ld)&&(this.M&=~Hf);this.cf();
return this.Ba(a)};this.Ue=function(a){if(!this.ee&&!this.c.Ia.Fd)return this.td=this.Qc==zf?!0:!1,this.Kh=!0,this.Wl=a.offsetX-this.c.L.offsetLeft-this.Ga,this.Xl=a.offsetY-this.c.L.offsetTop-this.Ha,this.Ga=a.offsetX-this.c.L.offsetLeft,this.Ha=a.offsetY-this.c.L.offsetTop,this.cf(),this.Ba(a)};this.rc=function(a){if(this.Ea==Nb){var b=this.sa*this.u/5E3;this.Cg||(this.u-=a*b);if(this.u<this.hc)this.u=this.hc;this.ac=!0}else if(this.Ea==ec){b=this.sa*this.u/5E3;this.u+=a*b;if(this.u>this.Wg)this.u=
this.Wg;this.ac=!0}else if(this.Ea==gc)this.T=this.sa;else if(this.Ea==hc)if(b=Math.sin(this.sa),this.Z+=a/5E3*-Math.cos(this.sa),this.T+=a/5E3*b,this.Z<-Math.PI/2)this.Z=-Math.PI/2;else if(this.Z>0)this.Z=0;if(this.Cd>0&&(this.je=!0,this.Cd-=a,this.Cd<=0))this.Cd=0,this.je=!1;if((this.M&Nf||this.Ea==fc)&&(this.M&Cf)==0){b=0;this.M&Jf&&(b+=1);this.M&Lf&&(b-=1);var c=0;this.M&If&&(c-=1);this.M&Kf&&(c+=1);var d;d=this.Ea==fc?Math.PI*this.sa/180:Math.atan2(c,b);b=this.u/5E5;b>10?b=10:b<0.0010&&(b=0.0010);
var a=b*a/5E4,b=Math.PI*this.N/180,e=Math.sin(b),c=Math.cos(b),f=this.T+d;d=Math.PI*this.P/180;var g=Bb/Math.sqrt(1-Cb*e*e),e=Bb/g*a*Math.sin(f)/Math.cos(b),a=Bb/(g/(1+Db*c*c))*a*Math.cos(f)+b;this.P=180*(e+d)/Math.PI;this.N=180*a/Math.PI}for(;this.P>180;)this.P-=180;for(;this.P<-180;)this.P+=180;for(;this.N>90;)this.N-=180;for(;this.N<-90;)this.N+=180;if(this.ac)if(this.ac=!1,a=this.c.bg(this.P,this.N),a.hasvalue){if(this.u-this.hc<a.elevation)this.u=a.elevation+this.hc,this.ac=!0;this.Cg=!1}else if(this.u<
5E3)this.ac=this.Cg=!0};this.$d=function(a,b,c){this.xg=!1;this.Jd.$f();this.T=a;this.Z=b;this.Mb=c};this.og=function(a,b,c,d){this.xg=!0;this.Zj=a;this.$j=b;this.ak=c;this.Yj=d;var e=a,a=b,b=e,e=a*b+c*d;if(e>0.499)this.T=2*Math.atan2(a,d),this.Z=Math.PI/2,this.Mb=0;else if(e<-0.499)this.T=-2*Math.atan2(a,d),this.Z=-Math.PI/2,this.Mb=0;else{var f=c*c;this.T=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.Z=Math.asin(2*e);this.Mb=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.pn=function(a,b,c){a.a[0]=b.a[0]*
c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.dm=function(a,b){this.Jh.R(this.vg);var c={};this.c.kg(a,b,c);
c.hit?(this.Ra.x=c.x,this.Ra.y=c.y,this.Ra.e=c.z,this.de=!0):this.de=!1};this.cm=function(a,b){if(this.de){var c={};this.c.kg(a,b,c);if(c.hit)if(this.Qa.x=c.x,this.Qa.y=c.y,this.Qa.e=c.z,this.de=!0,this.Qa.x==this.Ra.x&&this.Qa.y==this.Ra.y&&this.Qa.e==this.Ra.e)this.vg.R(this.Jh);else{var d=this.Ra.x*this.Qa.x+this.Ra.y*this.Qa.y+this.Ra.e*this.Qa.e,c=Math.sqrt((1-d)*0.5),d=Math.sqrt((1+d)*0.5),e={};e.x=this.Ra.y*this.Qa.e-this.Ra.e*this.Qa.y;e.y=this.Qa.x*this.Ra.e-this.Ra.x*this.Qa.e;e.e=this.Ra.x*
this.Qa.y-this.Ra.y*this.Qa.x;c/=Math.sqrt(e.x*e.x+e.y*e.y+e.e*e.e);e.x*=c;e.y*=c;e.e*=c;this.Tj.ag(e.x,e.y,e.e,d);this.vg.S(this.Jh,this.Tj);c=[];(new T(this.P,this.N,this.u)).ja(c);c=this.vg.Aa(new N(c[0],c[1],c[2]));d=new T(0,0,0);d.Xb(c.a[0],c.a[1],c.a[2]);this.P=d.t[0];this.N=d.t[1];this.ac=!0}else this.de=!1}};this.Ba=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1}}ka(xf,wf);
var Bf=1,Mf=2,Hf=4,Af=7,If=16,Jf=32,Kf=64,Lf=128,Nf=240,Df=256,Ff=512,Cf=768,yf=0,zf=1,Gf=2,Ef=3;function Of(){this.gc=new O;this.Ci=1.0E-5;this.hi=10;this.xm=45;this.hb=function(){this.c.Oj(this.gc)};this.ib=n();this.jb=function(a){this.gc.Cj(this.xm,this.c.width/this.c.height,this.Ci,this.hi);a.Yd[a.Yd.length-1].R(this.gc)};this.od=n();this.Zd=n();this.pd=n()}Of.prototype=new Vd;function Pf(){this.hb=n();this.ib=n();this.jb=n();this.od=n();this.Zd=n();this.pd=n()}Pf.prototype=new Vd;function Qf(){}Qf.prototype=new Vd;function Rf(){}Rf.prototype=new Vd;function Sf(a){this.c=a;this.Bi=new xf;this.Bi.c=a;Wd(this.Bi);this.Hc=this.Bi;this.jc=new Of;this.xe=new Pf;this.K=new sf;this.Ae=new Rf;this.ye=new Qf;this.ze=new Yd;this.jc.c=a;Wd(this.jc);this.xe.c=a;Wd(this.xe);this.K.c=a;Wd(this.K);this.Ae.c=a;Wd(this.Ae);this.ye.c=a;Wd(this.ye);this.ze.c=a;Wd(this.ze);this.tb=new Lb;this.Bb=new O;this.La=new O;this.Bm=new O}
Sf.prototype.Na=function(){this.Hc.hb();this.Hc.ib();this.jc.hb();this.jc.ib();this.xe.hb();this.xe.ib();this.K.hb();this.K.ib();this.Ae.hb();this.Ae.ib();this.ye.hb();this.ye.ib();this.ze.hb();this.ze.ib()};function Tf(a){this.b=a;this.ad=!1;this.qi=this.jj=this.rb=this.oi=this.hj=this.Eb=this.ni=this.gj=this.Db=this.ii=this.bj=this.Cb=this.li=this.ej=this.qb=this.pi=this.ij=this.Fb=this.ki=this.dj=this.Qb=this.mi=this.fj=this.Ya=this.ji=this.cj=this.Rd=l}
function Uf(a){a.ad=!0;a.cj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.ji=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");if(a.cj&&a.ji)a.Rd=a.b.createProgram(),a.b.attachShader(a.Rd,a.cj),a.b.attachShader(a.Rd,a.ji),a.b.bindAttribLocation(a.Rd,0,"aPosition"),a.b.linkProgram(a.Rd),a.b.getProgramParameter(a.Rd,
a.b.LINK_STATUS)||alert("Shader Link: "+a.b.getProgramInfoLog(a.Rd));a.fj=Z(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.mi=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");if(a.fj&&a.mi)a.Ya=a.b.createProgram(),a.b.attachShader(a.Ya,a.fj),a.b.attachShader(a.Ya,a.mi),a.b.bindAttribLocation(a.Ya,0,"aPosition"),
a.b.bindAttribLocation(a.Ya,1,"aNormal"),a.b.bindAttribLocation(a.Ya,2,"aTexCoord"),a.b.linkProgram(a.Ya),a.b.getProgramParameter(a.Ya,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Ya));a.dj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.ki=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");
if(a.dj&&a.ki)a.Qb=a.b.createProgram(),a.b.attachShader(a.Qb,a.dj),a.b.attachShader(a.Qb,a.ki),a.b.bindAttribLocation(a.Qb,0,"aPosition"),a.b.bindAttribLocation(a.Qb,1,"aColor"),a.b.linkProgram(a.Qb),a.b.getProgramParameter(a.Qb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Qb));a.ij=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.pi=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord);\n}\n\n");if(a.ij&&a.pi)a.Fb=a.b.createProgram(),a.b.attachShader(a.Fb,a.ij),a.b.attachShader(a.Fb,a.pi),a.b.bindAttribLocation(a.Fb,0,"aPosition"),a.b.bindAttribLocation(a.Fb,1,"aTexCoord"),a.b.linkProgram(a.Fb),a.b.getProgramParameter(a.Fb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Fb));a.ej=Z(a,
a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.li=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.ej&&a.li)a.qb=a.b.createProgram(),a.b.attachShader(a.qb,a.ej),a.b.attachShader(a.qb,a.li),a.b.bindAttribLocation(a.qb,0,"aPosition"),a.b.bindAttribLocation(a.qb,1,"aNormal"),a.b.bindAttribLocation(a.qb,2,"aTexCoord"),a.b.bindAttribLocation(a.qb,3,"aColor"),a.b.linkProgram(a.qb),a.b.getProgramParameter(a.qb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.qb));a.bj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.ii=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");if(a.bj&&a.ii)a.Cb=a.b.createProgram(),a.b.attachShader(a.Cb,a.bj),a.b.attachShader(a.Cb,a.ii),a.b.bindAttribLocation(a.Cb,0,"aPosition"),a.b.bindAttribLocation(a.Cb,1,"aTexCoord"),a.b.linkProgram(a.Cb),a.b.getProgramParameter(a.Cb,a.b.LINK_STATUS)||alert("font shader: "+
a.b.getProgramInfoLog(a.Cb));a.gj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.ni=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.gj&&a.ni)a.Db=a.b.createProgram(),a.b.attachShader(a.Db,a.gj),a.b.attachShader(a.Db,a.ni),a.b.bindAttribLocation(a.Db,0,"aPosition"),a.b.bindAttribLocation(a.Db,1,"aTexCoord"),a.b.linkProgram(a.Db),a.b.getProgramParameter(a.Db,a.b.LINK_STATUS)||alert("poi shader: "+a.b.getProgramInfoLog(a.Db));a.hj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.oi=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");if(a.hj&&a.oi)a.Eb=a.b.createProgram(),a.b.attachShader(a.Eb,a.hj),a.b.attachShader(a.Eb,a.oi),a.b.bindAttribLocation(a.Eb,0,"aPosition"),a.b.bindAttribLocation(a.Eb,1,"aColor"),a.b.linkProgram(a.Eb),a.b.getProgramParameter(a.Eb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Eb));a.jj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.qi=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
if(a.jj&&a.qi)a.rb=a.b.createProgram(),a.b.attachShader(a.rb,a.jj),a.b.attachShader(a.rb,a.qi),a.b.bindAttribLocation(a.rb,0,"aPosition"),a.b.bindAttribLocation(a.rb,1,"aTexCoord"),a.b.linkProgram(a.rb),a.b.getProgramParameter(a.rb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.rb))}
function Z(a,b,c){var d=a.b.createShader(b);if(!d)return l;a.b.shaderSource(d,c);a.b.compileShader(d);if(!a.b.getShaderParameter(d,a.b.COMPILE_STATUS))return b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),l;return d};function Vf(a){this.c=a;this.eh=[];this.Rb=[]}x("TextureManager",Vf);Vf.prototype.rj=function(a,b,c,d){var e=this.eh[a];e?(this.Rb[a]+=1,b(e)):(e=new R(this.c),S(e,a,b,c,d),this.Rb[a]=1,this.eh[a]=e);return e};Vf.prototype.CreateTexture=Vf.prototype.rj;Vf.prototype.tj=function(a){this.Rb[a]-=1;this.Rb[a]==0&&(this.eh[a].J(),delete this.eh[a],delete this.Rb[a])};Vf.prototype.DestroyTexture=Vf.prototype.tj;var Wf=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function Xf(a){this.c=a;this.b=a.b;var b=0,c=0;this.Og=new Q(this.c);for(var a=[],d=[],e=0;e<16;e++)for(var f=0;f<16;f++){var b=e*0.0625,g=f*0.0625;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=c*4;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Og;if(a.length%5==0)c.m=new Float32Array(a),c.mode="font",c.w=5;rc(this.Og,d,"TRIANGLES");a=new R(this.c);S(a,U+"font.png");this.Og.wb(a);this.Fn=new O;this.Sm=0}
Xf.prototype.Lc=function(a,b,c,d,e){d==l&&(d=1);this.c.tc();this.c.Fh();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new O,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=Wf[g]/2*d,f.Nc(d,d,1),f.Bj(f,b+j,c,0),this.c.vc(f),this.Og.ha(!0,6,g*12,e),j+=Wf[g]/2*d;this.c.sc();this.c.b.disable(this.c.b.BLEND);this.Sm=b-b};Xf.prototype.vj=function(a){for(var b=0,c=0;c<a.length;c++)b+=Wf[a.charCodeAt(c)];return b};
Xf.prototype.Il=t(32);x("Font",Xf);Xf.prototype.DrawText=Xf.prototype.Lc;Xf.prototype.GetStringHeight=Xf.prototype.Il;Xf.prototype.GetStringWidth=Xf.prototype.vj;function Yf(a){this.c=a;this.b=a.b;this.Md=!1;this.Zi=this.pb=this.l=l;this.j=this.h=0}
Yf.prototype.Oe=function(a,b){this.Vd=document.createElement("canvas");this.v=this.Vd.getContext("2d");this.pa=new R(this.c);this.pa.f=this.b.createTexture();this.text=a;this.v.save();this.v.font=b.fontString;this.v.textAlign="left";this.v.textBaseline="top";this.v.lineWidth=b.lineWidth;this.v.strokeStyle=b.strokeStyle;var c=this.v.measureText(this.text),c=Math.round(c.width);this.v.restore();this.h=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.j=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.Jb=Fb(this.h);this.Ib=Fb(this.j);this.pa.width=this.Jb;this.pa.height=this.Ib;this.v.canvas.width=this.Jb;this.v.canvas.height=this.Ib;this.v.fillStyle=b.backgroundColor;this.v.fillRect(0,0,this.h,this.j);this.v.shadowOffsetX=b.shadowOffsetX;this.v.shadowOffsetY=b.shadowOffsetY;this.v.shadowBlur=b.shadowBlur;this.v.shadowColor=b.shadowColor;this.v.fillStyle=b.fontColor;this.v.font=b.fontString;this.v.textAlign=
"left";this.v.textBaseline="middle";this.v.lineWidth=b.lineWidth;this.v.strokeStyle=b.strokeStyle;this.v.strokeText(a,b.lineWidth,this.j/2);this.v.fillText(a,b.lineWidth,this.j/2);this.bf();this.l=new Q(this.c);this.l.wb(this.pa);c=[];c.push(-this.h/2,this.j/2,0,0,0);c.push(-this.h/2,-this.j/2,0,0,1/this.Ib*this.j);c.push(this.h/2,-this.j/2,0,1/this.Jb*this.h,1/this.Ib*this.j);c.push(this.h/2,this.j/2,0,1/this.Jb*this.h,0);qc(this.l,c);rc(this.l,[0,1,2,0,2,3],"TRIANGLES");this.l.h=this.h;this.l.j=
this.j;return this.l};
Yf.prototype.Me=function(a,b){this.Vd=document.createElement("canvas");this.v=this.Vd.getContext("2d");this.pa=new R(this.c);this.pa.f=this.b.createTexture();Zf(this,a,b);this.l=new Q(this.c);this.l.wb(this.pa);var c=[];c.push(-this.h/2,this.j/2,0,0,0);c.push(-this.h/2,-this.j/2,0,0,1/this.Ib*this.j);c.push(this.h/2,-this.j/2,0,1/this.Jb*this.h,1/this.Ib*this.j);c.push(this.h/2,this.j/2,0,1/this.Jb*this.h,0);qc(this.l,c);rc(this.l,[0,1,2,0,2,3],"TRIANGLES");this.l.D=[-this.h/2,-this.j/2,0];this.l.U=
[this.h/2,this.j/2,0];this.l.h=this.h;this.l.j=this.j;return this.l};
function Zf(a,b,c){a.h=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.j=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.Jb=Fb(a.h);a.Ib=Fb(a.j);a.pa.width=a.Jb;a.pa.height=a.Ib;a.v.canvas.width=a.Jb;a.v.canvas.height=a.Ib;a.v.fillStyle=c.backgroundColor;a.v.fillRect(0,0,a.h,a.j);a.v.shadowOffsetX=c.shadowOffsetX;a.v.shadowOffsetY=c.shadowOffsetY;a.v.shadowBlur=c.shadowBlur;a.v.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.v.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.bf()};d.src=b}
Yf.prototype.bf=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.pa.f);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Vd);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.pa.ab=!0};Yf.prototype.J=function(){if(this.l)this.l.J(),this.l=l;if(this.pb)this.pb.J(),this.pb=l;if(this.Zi)this.Zi.J(),this.Zi=l;if(this.pa)this.pa.J(),this.pa=l;if(this.Vd)document.removeChild(this.Vd),this.Vd=l};function $f(a){this.c=a;this.b=a.b;this.cc=this.fc=this.ec=0;this.Mn=l;this.Md=!1;this.la=this.fa=this.pb=l;this.scale=20;this.text=this.me="";this.kf=new Yf(a);this.Bf=this.Ef=0;this.Wk=this.Xk=1;this.Vk=0;this.Uk=1;this.aj=0;this.$i=Infinity;this.Hi=new P(1,1,1,1);this.Qg={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.Lf={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"}}u=$f.prototype;u.Pl=function(a,b,c,d){this.me=c?c:"";if(b)this.Lf=b;this.text=a;if(d)this.Qg=d;if(c)this.fa=this.kf.Me(this.me,this.Qg);this.kf=new Yf(this.c);if(a)this.la=this.kf.Oe(a,this.Lf)};
u.ea=function(a,b,c,d){if(this.fa&&this.la)this.Ef=this.fa.h+this.la.h,this.Bf=this.fa.j;else if(this.fa)this.Ef=this.fa.h,this.Bf=this.fa.j;else if(this.la)this.Ef=this.la.h,this.Bf=this.la.j;this.fa&&this.fa.$e(a,b,c,-(this.fa.h/2+(this.Ef/2-this.fa.h))*L*this.scale,this.Bf/2*L*this.scale,0);this.la&&this.la.$e(a,b,c,(this.la.h/2+(this.Ef/2-this.la.h))*L*this.scale,this.Bf/2*L*this.scale,0);this.Od=a;this.Pd=b;this.Qd=c;if(d!=l){this.Md=!0;var d=this.kf,e=this.Xk,f=this.Wk,g=this.Vk,j=this.Uk;d.pb=
new Q(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);nc(d.pb,k);rc(d.pb,[0,1],"LINES");this.pb=d.pb}};u.ha=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Md&&this.pb.ha();this.fa&&uc(this.fa);this.la&&uc(this.la);this.c.tc();var a=new O;a.Nc(L*this.scale,L*this.scale,1);this.c.vc(a);this.fa&&this.fa.ha(!1,0,0,l,this.Hi);this.la&&this.la.ha(!1,0,0,l,this.Hi);this.c.sc();this.c.b.disable(this.c.b.BLEND)};
u.qg=function(a){this.scale=a;this.Md?this.ea(this.Od,this.Pd,this.Qd,0):this.ea(this.Od,this.Pd,this.Qd,l)};u.We=function(a,b){var c=!1,d=!1;if(this.fa)var e=this.c.md(a,b,this.c.wa,!0),c=this.fa.Pc(e.x,e.y,e.e,e.Cc,e.Dc,e.Ec);this.la&&(e=this.c.md(a,b,this.c.wa,!0),d=this.la.Pc(e.x,e.y,e.e,e.Cc,e.Dc,e.Ec));return c||d};u.J=function(){this.kf=l;this.cc=this.fc=this.ec=0;this.fa&&this.fa.J();this.la&&this.la.J();this.pb&&this.pb.J();this.Md=!1;this.pb=l;this.scale=0};x("Poi",$f);
$f.prototype.Draw=$f.prototype.ha;$f.prototype.SetContent=$f.prototype.Pl;$f.prototype.SetPosition=$f.prototype.ea;$f.prototype.SetSize=$f.prototype.qg;$f.prototype.Destroy=$f.prototype.J;function ag(a){this.c=a;this.Cf=[];this.Rb=[];this.ie=l;this.Df=[];this.Gf=[]}u=ag.prototype;u.qj=function(a,b,c,d){var e=new $f(this.c);if(b)e.Lf=b;e.text=a;if(d)e.Qg=d;if(c)e.me=c,e.fa=this.Me(c,e.Qg);if(a)e.la=this.Oe(a,e.Lf);return e};u.sj=function(a){a.fa&&bg(this,a.me);a.la&&cg(this,a.text,a.Lf)};u.Me=function(a,b){var c=this.Cf[a];if(c){this.Rb[a]+=1;var d=new Q(this.c);d.R(c);d.h=c.h;d.j=c.j;this.Cf[a]=d}else this.ie=new Yf(this.c),d=this.ie.Me(a,b),this.Rb[a]=1,this.Cf[a]=d,this.ie=l;return d};
function bg(a,b){a.Rb[b]-=1;a.Rb[b]==0&&(a.Cf[b].f.J(),delete a.Cf[b],delete a.Rb[b])}u.Oe=function(a,b){var c=this.Df[a+b.id];if(c){this.Gf[a+b.id]+=1;var d=new Q(this.c);d.R(c);d.h=c.h;d.j=c.j;this.Df[a+b.id]=d}else this.ie=new Yf(this.c),d=this.ie.Oe(a,b),this.Gf[a+b.id]=1,this.Df[a+b.id]=d,this.ie=l;return d};function cg(a,b,c){a.Gf[b+c.id]-=1;a.Gf[b+c.id]==0&&(a.Df[b+c.id].f.J(),delete a.Df[b+c.id],delete a.Gf[b+c.id])}
u.nj=function(a,b,c){a.fa=this.Me(b,c);a.ea(a.Od,a.Pd,a.Qd,l);bg(this,a.me);a.me=b};u.oj=function(a,b,c){a.la=this.Oe(b,c);a.ea(a.Od,a.Pd,a.Qd,l);cg(this,a.text,c);a.text=b};x("PoiManager",ag);ag.prototype.CreatePoi=ag.prototype.qj;ag.prototype.DestroyPoi=ag.prototype.sj;ag.prototype.ChangePoiIcon=ag.prototype.nj;ag.prototype.ChangePoiText=ag.prototype.oj;var dg=new Date,eg=new Date,fg=[],gg=0,hg=l,ig=l;function jg(){for(var a=0;a<fg.length;a++){var b=fg[a];if(b.ck)b.kj>0&&b.si>0?(b.L.width=window.innerWidth-b.kj,b.L.height=window.innerHeight-b.si):(b.L.width=window.innerWidth-20,b.L.height=window.innerHeight-20);kg(b,b.L.width,b.L.height)}}
function $(){this.Bc=this.km=this.jm=this.Ac=this.mm=this.nm=this.lm=this.Tc=this.Uc=this.Sc=l;this.ad=!1;this.sn="";this.height=this.width=0;this.ck=!1;this.Ub=this.L=this.b=l;this.Yh=0.670588;this.Xh=0.921569;this.Vh=this.Wh=1;this.vl=this.wl=this.yl=this.xl=0;this.Yf=this.Xf=20;this.Bb=new O;this.La=new O;this.gc=new O;this.Vg=new O;this.wa=new O;this.vi=new O;this.ce=new Lb;this.sl=[];this.tl=[];fg[gg]=this;gg++;this.Di=this.d=this.Ge=l;this.jd=1;this.Ia=this.dh=this.Ce=l;this.si=this.kj=0}
function lg(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),l;var c=mg(a);c||b('It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');
return c}function mg(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=l,d=0;d<b.length;++d){try{c=a.getContext(b[d])}catch(e){}if(c)break}return c}u=$.prototype;
u.wj=function(a,b){var c=document.getElementById(a);if(this.b=lg(c)){this.L=c;if(b)this.Yf=this.Xf=20,c.width=window.innerWidth-this.Xf,c.height=window.innerHeight-this.Yf,this.ck=!0;for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(kg(this,this.L.width,this.L.height),this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.Ub=new Tf(this.b),
Uf(this.Ub),this.Ge=new Xf(this),this.Di=new R(this),S(this.Di,U+"nodata.png"),this.Ce=new ag(this),this.dh=new Vf(this),this.Ia=new ng(this),this.Sc&&this.Sc(this),W(window,"resize",jg,!1,this),eg=new Date,typeof window!="undefined"&&window.bl(og,this.L),this.L.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1}):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
u.yj=function(){this.Ub=this.L=this.b=this.Bc=this.km=this.jm=this.Ac=this.mm=this.nm=this.lm=this.Tc=this.Uc=this.Sc=l;this.sl=[];this.tl=[];this.dh=this.Ce=this.d=this.Ge=l;W(window,"resize",l,!1,this)};u.Gj=function(a,b,c,d){if(a>=0&&a<=1&&b>=0&&b<=1&&c>=0&&c<=1&&d>=0&&d<=1)this.Yh=a,this.Xh=b,this.Wh=c,this.Vh=d};u.Hl=function(){return{Jn:this.Yh,wn:this.Xh,rn:this.Wh,qn:this.Vh}};u.pj=function(){this.b.clearColor(this.Yh,this.Xh,this.Wh,this.Vh);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT)};
u.Rj=function(a,b,c,d){this.xl=a;this.yl=b;this.wl=c;this.vl=d;this.b.viewport(a,b,c,d)};u.Jl=function(){return{x:this.xl,y:this.yl,Sn:this.wl,xn:this.vl}};u.Oj=function(a){this.gc.R(a);pg(this)};u.Gh=function(a){this.La.R(a);pg(this)};u.vc=function(a){this.Bb.R(a);pg(this)};function pg(a){a.Vg.S(a.La,a.Bb);a.wa.S(a.gc,a.Vg);a.vi.Xd(a.Vg);a.vi.be()}u.Ll=function(a){var b=new R(this);S(b,a);this.tl.push(b);return b};u.Kl=function(a){var b=new Q(this);sc(b,a);this.sl.push(b);return b};
u.tc=function(){var a=this.ce,b=this.La,c=new O;c.R(b);a.fg.push(c);a=this.ce;b=this.Bb;c=new O;c.R(b);a.eg.push(c);a=this.ce;b=this.gc;c=new O;c.R(b);a.Yd.push(c)};u.sc=function(){this.Bb.R(this.ce.eg.pop());this.La.R(this.ce.fg.pop());this.gc.R(this.ce.Yd.pop());pg(this)};u.Fh=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Bb.dg();this.La.dg();this.gc.Aj(0,b,0,a);pg(this)};
u.Ne=function(){this.jd==0?J(K("owg.engine3d"),"** WARNING: not implemented"):this.jd==1?this.d=new Sf(this):this.jd==2?J(K("owg.engine3d"),"** WARNING: not implemented"):this.jd==3&&J(K("owg.engine3d"),"** WARNING: not implemented")};u.Lc=function(a,b,c,d,e){this.Ge&&this.Ge.Lc(a,b,c,d,e)};u.sh=function(a){var b=Array(2);b[0]=0;b[1]=0;this.Ge&&(b[0]=this.Ge.vj(a),b[1]=32);return b};
u.md=function(a,b,c,d){var e=new O;e.Xd(c);var f=this.height-b-1,b=(a-0)*2/this.width-1,c=(f-0)*2/this.height-1,a=(a-0)*2/this.width-1,f=(f-0)*2/this.height-1,g=new N;g.q(b,c,-1);b=e.Aa(g);c=new N;c.q(a,f,1);c=e.Aa(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.e=d[2];b.Cc=e;b.Dc=a;b.Ec=c;return b};
if(typeof window!="undefined")window.bl=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)};
function og(){dg=new Date;var a=dg.valueOf()-eg.valueOf();eg=dg;for(var b=0;b<fg.length;b++){var c=fg[b];if(c.d){var d=c.d,e=a;d.Hc.rc(e);d.jc.rc(e);d.xe.rc(e);d.K.rc(e);d.Ae.rc(e);d.ye.rc(e);d.ze.rc(e)}c.Uc&&c.Uc(a,c);c.Rj(0,0,c.width,c.height);c.pj();if(c.d){var d=c.d,e=d.tb,f=d.Bb,g=new O;g.R(f);e.eg.push(g);e=d.tb;f=d.La;g=new O;g.R(f);e.fg.push(g);e=d.tb;f=d.Bm;g=new O;g.R(f);e.Yd.push(g);d.Hc.jb(d.tb);d.jc.jb(d.tb);d.xe.jb(d.tb);d.K.jb(d.tb);d.Ae.jb(d.tb);d.ye.jb(d.tb);d.ze.jb(d.tb);d.tb.eg.pop();
d.tb.fg.pop();d.tb.Yd.pop();c.d.Na()}c.Tc&&c.Tc(c);typeof window!="undefined"&&window.bl(og,c.L)}}function kg(a,b,c){a.width=b;a.height=c;a.Bc&&a.Bc(b,c,a)}u=$.prototype;u.Hj=p("Sc");u.rg=p("Uc");u.Pj=p("Tc");u.Kj=function(a){if(this.yd)Jd(this.yd),this.yd=l;if(a)this.yd=W(this.L,Xc,function(b){a(b.button,b.clientX-this.Xf/2,b.clientY-this.Yf/2,this)},!1,this)};
u.Mj=function(a){if(this.Ad)Jd(this.Ad),this.Ad=l;if(a)this.Ad=W(this.L,Yc,function(b){a(b.button,b.clientX-this.Xf/2,b.clientY-this.Yf/2,this)},!1,this)};u.Lj=function(a){if(this.zd)Jd(this.zd),this.zd=l;if(a)this.zd=W(this.L,Zc,function(b){a(b.clientX-this.Xf/2,b.clientY-this.Yf/2,this)},!1,this)};u.Nj=function(a){if(this.Ac)Jd(this.Ac),this.Ac=l;if(a){var b=new tf(this.L);this.Ac=W(b,Zc,function(b){b.preventDefault();a(b.Ig,this)},!1,this)}};u.Qj=p("Bc");
u.Ij=function(a){hg&&(Jd(hg),hg=l);a&&(hg=W(window,$c,function(b){a(b.keyCode,this)},!1,this))};u.Jj=function(a){ig&&(Jd(ig),ig=l);a&&(ig=W(window,ad,function(b){a(b.keyCode,this)},!1,this))};u.qd=function(a,b,c){this.d&&this.d.K.Ja.qd(a,b,c)};u.kg=function(a,b,c){this.d&&this.d.K.Ja.kg(a,b,c)};u.Ye=function(a,b){if(this.d)return this.d.K.$g.Ye(a,b);return l};u.rd=function(a,b){if(this.d)return this.d.K.Pg.rd(a,b);return-1};u.Xe=function(a,b){if(this.d)return this.d.K.Dg.Xe(a,b);return-1};
u.Zf=function(){if(this.d)return this.d.K.Ja.Zf();return 0};u.Al=function(){if(this.d)return this.d.Hc.nd().elevation;return 0};u.bg=function(a,b){if(this.d)return this.d.K.Ja.bg(a,b);return{hasvalue:!1,elevation:0,lod:-1}};u.rh=function(a,b,c,d,e,f,g){this.Ia.rh(a,b,c,d,e,f,g)};u.ng=function(a){this.Ia.ng(a)};x("engine3d",$);$.prototype.AltitudeAboveEllipsoid=$.prototype.Al;$.prototype.AltitudeAboveGround=$.prototype.Zf;$.prototype.Clear=$.prototype.pj;$.prototype.CreateScene=$.prototype.Ne;
$.prototype.DrawText=$.prototype.Lc;$.prototype.GetClearColor=$.prototype.Hl;$.prototype.GetDirectionMousePos=$.prototype.md;$.prototype.GetViewport=$.prototype.Jl;$.prototype.InitEngine=$.prototype.wj;$.prototype.LoadMesh=$.prototype.Kl;$.prototype.LoadTexture=$.prototype.Ll;$.prototype.PickGlobe=$.prototype.qd;$.prototype.PopMatrices=$.prototype.sc;$.prototype.PushMatrices=$.prototype.tc;$.prototype.SetClearColor=$.prototype.Gj;$.prototype.SetInitCallback=$.prototype.Hj;
$.prototype.SetKeyDownCallback=$.prototype.Ij;$.prototype.SetKeyUpCallback=$.prototype.Jj;$.prototype.SetModelMatrix=$.prototype.vc;$.prototype.SetMouseDownCallback=$.prototype.Kj;$.prototype.SetMouseMoveCallback=$.prototype.Lj;$.prototype.SetMouseUpCallback=$.prototype.Mj;$.prototype.SetMouseWheelCallback=$.prototype.Nj;$.prototype.SetOrtho2D=$.prototype.Fh;$.prototype.SetProjectionMatrix=$.prototype.Oj;$.prototype.SetRenderCallback=$.prototype.Pj;$.prototype.SetResizeCallback=$.prototype.Qj;
$.prototype.SetTimerCallback=$.prototype.rg;$.prototype.SetViewMatrix=$.prototype.Gh;$.prototype.SetViewport=$.prototype.Rj;$.prototype.GetElevationAt=$.prototype.bg;$.prototype.OnDestroy=$.prototype.yj;function qg(a){a=a.fb;a.Sc&&a.Sc(a.id)}function rg(a,b){var c=b.fb;c.Uc&&c.Uc(c.id,a)}function sg(a){a=a.fb;a.Tc&&a.Tc(a.id)}function tg(a,b,c,d){d=d.fb;d.yd&&d.yd(d.id,a,b,c)}function ug(a,b,c,d){a=d.fb;a.Ad&&a.Ad(a.id)}function vg(a,b,c){c=c.fb;c.zd&&c.zd(c.id,a,b)}function wg(a,b){var c=b.fb;c.Ac&&c.Ac(c.id,a)}function xg(a,b,c){c=c.fb;c.Bc&&c.Bc(c.id,a,b)}function yg(a,b){var c=b.fb;c.Zh&&c.Zh(c.id,a)}function zg(a,b){var c=b.fb;c.$h&&c.$h(c.id,a)}
function Ag(a){var b=a.fb;b.wd&&b.wd(a.fb.id)}function Bg(a){var b=a.fb;b.xd&&b.xd(a.fb.id)}function Cg(){this.name="ogContext";this.type=z;this.rk=!1;this.d=this.c=l;this.fontcolor=new P(1,1,1,1);this.Jm=1;this.xd=this.wd=this.im=this.Sc=this.hm=this.gm=this.un=this.Uc=this.Tc=this.Bc=this.$h=this.Zh=this.zd=this.Ac=this.Ad=this.yd=l}Cg.prototype=new G;
Cg.prototype.va=function(a){this.Sc=a.cbfInit;this.im=a.cbfExit;this.Bc=a.cbfResize;if(a.fullscreen)this.rk=!0;this.c=new $;this.c.fb=this;a.canvas?this.c.wj(a.canvas,this.rk):J(K("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.Hj(qg);this.c.rg(rg);this.c.Pj(sg);this.c.Kj(tg);this.c.Mj(ug);this.c.Lj(vg);this.c.Nj(wg);this.c.Qj(xg);this.c.Ij(yg);this.c.Jj(zg);this.c.Ia.wd=Ag;this.c.Ia.xd=Bg};Cg.prototype.Lc=function(a,b,c){this.c&&this.c.Lc(a,b,c,1,this.fontcolor)};
Cg.prototype.sh=function(a){if(this.c)return this.c.sh(a);return l};Cg.prototype.Pa=function(){this.c.yj();this.c=l};function Dg(){this.name="ogWorld";this.type=B}Dg.prototype=new G;Dg.prototype.va=function(a){if(a==l)J(K("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;if(a.scenetype==D){if(b.jd=1,b.Ne(),b.d)b.d.Ie=this}else if(a.scenetype==Ia){if(b.jd=2,b.Ne(),b.d)b.d.Ie=this}else if(a.scenetype==Ja){if(b.jd=3,b.Ne(),b.d)b.d.Ie=this}else if(a.scenetype==Ka&&(b.jd=0,b.Ne(),b.d))b.d.Ie=this}};
Dg.prototype.pg=function(a,b){var c=this.parent.parent.c.d.K.Ja;switch(a){case 0:c.pg(cf);c.al=b!=l?b:{};break;case 1:c.pg(df),c.al=b!=l?b:{}}};function Eg(){this.name="ogScene";this.type=A;this.vd=this.Ie=l;this.Fg=[];this.oc=D}Eg.prototype=new G;u=Eg.prototype;u.va=function(a){if(a==l)J(K("owg.ogScene"),"** ERROR: no options for scene creation!");else if(a.type)this.oc=a.type};u.We=function(a,b){var c={};this.parent.c.qd(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;return d};u.Ye=function(a,b){var c=this.parent.c.Ye(a,b);if(c)return c.Mm.id;return-1};u.rd=function(a,b){return this.parent.c.rd(a,b)};
u.Xe=function(a,b){return this.parent.c.Xe(a,b)};function Fg(a,b){var c=F(b);if(c&&c.type==xa){var d=Hb(c);d.ea(c.fc,c.ec,c.cc);d.$d(M(c.ua),M(c.pitch),M(c.Gb));d.Xa=c}a.vd=c};function Gg(){this.name="ogPOI";this.type=C;this.H=!1;this.i=this.da=l}Gg.prototype=new G;
Gg.prototype.va=function(a){var b="",c=40,d=l;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new T(e[0],e[1],e[2])).ja(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);if(a.textstyle)this.Wd=a.textstyle;if(a.iconstyle)this.Ed=a.iconstyle;this.da=this.parent.parent.c.Ce.qj(b,this.Wd,d,this.Ed);this.da.H=!1;if(a.flagpoleColor)b=this.da,d=a.flagpoleColor,b.Xk=d[0],b.Wk=d[1],b.Vk=d[2],b.Uk=d[3];a.flagpole==!0?this.da.ea(f[0],f[1],f[2],0):this.da.ea(f[0],f[1],f[2],l);this.da.qg(c);this.da.Mm=this;(c=
Hg(this))&&c.ka.push(this.da);if(a.visibilityRange)c=this.da,a=a.visibilityRange,c.aj=a[0]*1E3*L,c.$i=a[1]*1E3*L};Gg.prototype.Pa=function(){var a=this.parent.parent,b=Hg(this);if(b)for(var c=this.da,d=0;d<b.ka.length;d++)if(b.ka[d]==c){b.ka.splice(d,1);break}a.c.Ce.sj(this.da)};Gg.prototype.X=function(){this.H=!0;this.da.H=!0};Gg.prototype.Y=function(){this.H=!1;this.da.H=!1};function Hg(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.K)b=a.d.K.$g;return b};function Ig(){this.name="ogPOILayer";this.type=oa;this.H=!1;this.ka=[];this.Hd="";this.Ed=this.Wd=l;this.sm={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.rm={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
Ig.prototype=new G;
function Jg(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")"}if(a.fontColor)b=a.fontColor,a.fontColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.strokeColor)b=a.strokeColor,a.strokeStyle="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.shadowColor)b=a.shadowColor,a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}Ig.prototype.va=function(a){if(a.name)this.Hd=a.name;a.textstyle?(Jg(a.textstyle),this.Wd=a.textstyle):this.Wd=this.sm;a.iconstyle?(Jg(a.iconstyle),this.Ed=a.iconstyle):this.Ed=this.rm};Ig.prototype.Pa=function(){for(var a=0;a<this.ka.length;a++)I(this.ka[a])};Ig.prototype.X=function(){this.H=!0;for(var a=0;a<this.ka.length;a++)this.ka[a].X()};Ig.prototype.Y=function(){this.H=!1;for(var a=0;a<this.ka.length;a++)this.ka[a].Y()};function Kg(){this.name="ogElevationLayer";this.type=ma;this.uf=-1}Kg.prototype=new G;Kg.prototype.cg=function(){var a=l,b=this.parent.parent.parent.c;if(b.d&&b.d.K)a=b.d.K.Ja;return a};Kg.prototype.mh=function(a){var b=this.cg();if(b)this.uf=b.mh(a)};Kg.prototype.va=function(a){this.mh(a)};function ng(a){this.c=a;this.b=a.b;this.Kd=l;this.wk=this.Fd=!1;this.gg=[];this.hg=[];this.ig=[];this.jg=[];this.ol=2E3;this.ym=new T;this.xd=this.wd=l}function Lg(a,b,c,d){var e=a.Kd.nd(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.Jg=Bb*Math.acos(Math.sin(M(f[1]))*Math.sin(M(g[1]))+Math.cos(M(f[1]))*Math.cos(M(g[1]))*Math.cos(M(g[0]-f[0])));if(isNaN(a.Jg))a.Jg=0;e=[e.longitude,e.latitude,e.elevation+a.Jg/4];b=[b,c,d+a.Jg/4];a.gg=f;a.hg=e;a.ig=b;a.jg=g;a.wk=!0}
function le(a,b,c,d,e,f,g){a.Kd=a.c.d.Hc;var j=a.Kd.Re();a.Li=j.ua;a.Ji=j.pitch;a.Ki=j.Gb;e!=l&&f!=l&&g!=l?(a.hl=M(e),a.fl=M(f),a.gl=M(g)):(a.hl=a.Li,a.fl=a.Ji,a.gl=a.Ki);a.of=a.hl-a.Li;Math.abs(a.of)>Math.PI&&(a.of>0?a.of-=2*Math.PI:a.of+=2*Math.PI);a.mf=a.fl-a.Ji;Math.abs(a.mf)>Math.PI&&(a.mf>0?a.mf-=2*Math.PI:a.mf+=2*Math.PI);a.nf=a.gl-a.Ki;Math.abs(a.nf)>Math.PI&&(a.nf>0?a.nf-=2*Math.PI:a.nf+=2*Math.PI);Lg(a,b,c,d);a.wd&&a.wd(a.c);a.c.rg(function(b){if(a.wk){a.Dk+=b;b=a.Dk/a.ol;a.p=0.5*Math.sin(Math.PI*
b-Math.PI/2)+0.5;if(b>1)a.p=1,Mg(a);var b=Math.pow(1-a.p,3)*a.gg[0]+3*a.p*Math.pow(1-a.p,2)*a.hg[0]+3*a.p*a.p*(1-a.p)*a.ig[0]+Math.pow(a.p,3)*a.jg[0],c=Math.pow(1-a.p,3)*a.gg[1]+3*a.p*Math.pow(1-a.p,2)*a.hg[1]+3*a.p*a.p*(1-a.p)*a.ig[1]+Math.pow(a.p,3)*a.jg[1],d=Math.pow(1-a.p,3)*a.gg[2]+3*a.p*Math.pow(1-a.p,2)*a.hg[2]+3*a.p*a.p*(1-a.p)*a.ig[2]+Math.pow(a.p,3)*a.jg[2];a.ym.Xb(b,c,d);a.Kd.ea(b,c,d);a.Kd.$d(a.Li+a.p*a.of,a.Ji+a.p*a.mf,a.Ki+a.p*a.nf);a.p==1&&Mg(a)}});a.p=0;a.Dk=0;a.Fd=!0}
function Mg(a){a.c.rg(l);a.Fd=!1;a.xd&&a.xd(a.c)}
ng.prototype.rh=function(a,b,c,d,e,f,g){this.Kd=this.c.d.Hc;d*=L;var j=new T(a,b,c),k=[];j.ja(k);var m=new O;m.kd(a,b);a=new O;a.wc(k[0],k[1],k[2]);k=new O;k.S(a,m);m={};e!=l&&f!=l&&g!=l?(m.ua=M(e),m.pitch=M(f),m.Gb=M(g)):m=this.Kd.Re();a=m.pitch-Math.PI/2;d=new N(d*Math.sin(a)*Math.cos(m.ua),d*Math.sin(a)*Math.sin(m.ua),d*Math.cos(a));d=k.Aa(d).a;j.Xb(d[0],d[1],d[2]);d=j.t[1];k=j.t[0];j=j.t[2];j>c?le(this,k,d,j,e,f,g):le(this,k,d,-j,m.ua,-Eb(m.pitch),m.Gb)};ng.prototype.ng=p("ol");function Ng(a){this.c=a;this.b=a.b;this.cc=this.fc=this.ec=0;this.canvas=l;this.j=this.h=0;this.v=this.l=l;this.Tk=-1}u=Ng.prototype;
u.bf=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.pa.f);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.pa.ab=!0};u.ea=function(a,b,c){var d=[];(new T(a,b,c)).ja(d);this.l.$e(d[0],d[1],d[2],0,0,0)};u.ha=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.l&&uc(this.l);this.c.tc();var a=new O;a.Nc(L*this.scale,L*this.scale,1);this.c.vc(a);this.l&&this.l.ha(!1,0,0,l,l);this.c.sc();this.c.b.disable(this.c.b.BLEND)};
u.qg=p("scale");u.We=function(a,b){if(this.l)var c=this.c.md(a,b,this.c.wa,!0),d=this.l.Pc(c.x,c.y,c.e,c.Cc,c.Dc,c.Ec);if(d){var e=c=0,f=d.Kb,g=d.qc,j=1-f-g;d.pl==0?(c=f*-this.h/2+g*this.h/2+j*-this.h/2/(f+g+j)+this.h/2,e=f*this.j/2+g*this.j/2+j*-this.j/2/(f+g+j)+this.j/2):d.pl==1&&(c=f*this.h/2+g*this.h/2+j*-this.h/2/(f+g+j)+this.h/2,e=f*this.j/2+g*-this.j/2+j*-this.j/2/(f+g+j)+this.j/2);c/=this.h;e/=this.j;d={};d.id=this.Tk;d.x=c;d.y=e;return d}return l};u.J=function(){this.l&&(this.l.J(),this.pa.J())};function Og(){this.name="ogBillboard";this.type=Ca;this.status=Ma;this.i=-1;this.H=!1}Og.prototype=new G;u=Og.prototype;
u.va=function(a){if(a==l)J(K("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==l)J(K("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=A)J(K("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.yb=new Ng(this.parent.parent.c);this.yb.Tk=this.id;var b=this.yb,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.v=b.canvas.getContext("2d");b.h=b.v.canvas.width;b.j=b.v.canvas.height;
break;case "[object HTMLVideoElement]":b.h=c.videoWidth,b.j=c.videoHeight}b.pa=new R(b.c);b.pa.f=b.b.createTexture();b.l=new Q(b.c);b.l.wb(b.pa);b.Jb=b.h;b.Ib=b.j;c=[];c.push(-b.h/2,b.j/2,0,0,0);c.push(-b.h/2,-b.j/2,0,0,1/b.Ib*b.j);c.push(b.h/2,-b.j/2,0,1/b.Jb*b.h,1/b.Ib*b.j);c.push(b.h/2,b.j/2,0,1/b.Jb*b.h,0);qc(b.l,c);rc(b.l,[0,1,2,0,2,3],"TRIANGLES");b.l.D=[-b.h/2,-b.j/2,0];b.l.U=[b.h/2,b.j/2,0];b.l.h=b.h;b.l.j=b.j;b.bf();a=a.position;this.yb.ea(a[0],a[1],a[2]);Pg(this).lh(this.yb)}};
u.Pa=function(){if(this.yb)Pg(this).Ch(this.yb),this.yb.J(),this.status=3};u.ha=function(){this.yb.ha()};function Pg(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.K)b=a.d.K.Dg;return b}u.X=function(){this.H=!0;this.yb.H=!0};u.Y=function(){this.H=!1;this.yb.H=!1};function Qg(){this.name="ogMeshObject";this.type=va;this.sb=[];this.Mi=[]}Qg.prototype=new G;u=Qg.prototype;u.va=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=Y(wa,this,this.options);this.sb.push(c);this.Mi.push(c.l)}};u.Pa=function(){for(var a=0;a<this.sb.length;a++)I(this.sb[a]);this.Mi=this.sb=l};u.X=function(){for(var a=0;a<this.sb.length;a++)this.sb[a].X()};
u.sd=function(a,b,c,d,e,f){for(var g=0;g<this.sb.length;g++)this.sb[g].sd(a,b,c,d,e,f)};u.af=function(a,b,c,d){for(var e=0;e<this.sb.length;e++)this.sb[e].af(a,b,c,d)};u.Y=function(){for(var a=0;a<this.sb.length;a++)this.sb[a].Y()};function Rg(){this.name="ogAoeImageLayer";this.type=Ea;this.H=!1;this.Wa=[];this.Hd=""}Rg.prototype=new G;u=Rg.prototype;u.va=function(a){if(a.name)this.Hd=a.name};u.Pa=function(){for(var a=0;a<this.Wa.length;a++){for(var b=a;b<this.Wa.length;b++)this.Wa[a].dc-=1;I(this.Wa[a])}};u.X=function(){this.H=!0;for(var a=0;a<this.Wa.length;a++)this.Wa[a].X()};u.Y=function(){this.H=!1;for(var a=0;a<this.Wa.length;a++)this.Wa[a].Y()};u.kh=function(a){this.Wa.push(a);a.tf=this.id};
u.Bh=function(a){for(var b=0;b<this.Wa.length;b++)if(this.Wa[b]==a){for(var c=b+1;c<this.Wa.length;c++)this.Wa[c].dc-=1;I(this.Wa[b]);this.Wa.splice(b,1)}};function Sg(){this.name="ogImageLayer";this.type=la;this.uf=-1}Sg.prototype=new G;Sg.prototype.cg=function(){var a=l,b=this.parent.parent.parent.c;if(b.d&&b.d.K)a=b.d.K.Ja;return a};Sg.prototype.nh=function(a){var b=this.cg();if(b)this.uf=b.nh(a)};Sg.prototype.lg=function(){var a=this.cg();a&&this.uf!=-1&&a.lg(this.uf)};Sg.prototype.va=function(a){this.nh(a)};function Tg(){this.name="ogBillboardLayer";this.type=Da;this.H=!1;this.na=[];this.Hd=""}Tg.prototype=new G;u=Tg.prototype;u.va=function(a){if(a.name)this.Hd=a.name};u.Pa=function(){for(var a=0;a<this.na.length;a++)I(this.na[a])};u.X=function(){this.H=!0;for(var a=0;a<this.na.length;a++)this.na[a].X()};u.Y=function(){this.H=!1;for(var a=0;a<this.na.length;a++)this.na[a].Y()};u.Ch=function(a){for(var b=0;b<this.na.length;b++)this.na[b]==a&&(I(this.na[b]),this.na.splice(b,1))};u.lh=function(a){this.na.push(a)};function Ug(){this.name="ogPointSpriteObject";this.type=Ga;this.ed=this.options=this.Pb=l;this.Yg=this.Hg=0}Ug.prototype=new G;u=Ug.prototype;u.va=function(a){this.options=a;this.Pb=new vc(this.parent.parent.parent.c);a.Vertices&&wc(this.Pb,a.Vertices);if(a.PointUrl)Vg(this,a.PointUrl),this.Km=a.NumberOfPoints,this.Pb.fh=this.Km;this.Pb.mg(a.Center[0],a.Center[1],a.Center[2])};u.Pa=function(){if(this.Pb)this.Pb.J(),this.Pb=l,this.status=3};u.X=function(){this.Pb.H=!0};u.sd=n();
u.Y=function(){this.Pb.H=!1};function Vg(a,b){b==l?alert("invalid xyzurl"):(a.$m=b,a.O=new window.XMLHttpRequest,a.O.open("GET",a.$m,!0),a.O.onreadystatechange=function(){a.O.readyState==4&&(a.O.status==404?alert("xyz-file not found..."):Wg(a))},a.O.onprogress=function(){Wg(a)},a.O.send(),a.Hg=0,a.Yg=0)}
function Wg(a){var b=a.O.responseText;a.Hg=b.lastIndexOf("\n");for(var b=b.substr(a.Yg,a.Hg-a.Yg-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}wc(a.Pb,c);a.Yg=a.Hg};function Xg(){this.name="ogGeometryLayer";this.type=pa;this.H=!1;this.W=[];this.Hd=""}Xg.prototype=new G;u=Xg.prototype;u.va=function(a){if(a.name)this.Hd=a.name};u.Pa=function(){for(var a=0;a<this.W.length;a++){for(var b=a;b<this.W.length;b++)this.W[a].dc-=1;I(this.W[a])}};u.X=function(){this.H=!0;for(var a=0;a<this.W.length;a++)this.W[a].X()};u.Y=function(){this.H=!1;for(var a=0;a<this.W.length;a++)this.W[a].Y()};u.Ke=function(a){this.W.push(a);a.tf=this.id};
u.Dh=function(a){for(var b=0;b<this.W.length;b++)if(this.W[b]==a){for(var c=b+1;c<this.W.length;c++)this.W[c].dc-=1;I(this.W[b]);this.W.splice(b,1)}};function Yg(){this.name="ogSurface";this.type=wa;this.On=this.Dn=!1;this.elevation=this.latitude=this.longitude=0;this.status=Ma;this.l=l}Yg.prototype=new G;u=Yg.prototype;u.sd=function(a,b,c,d,e,f){this.l.mg(a,b,c,d,e,f)};
u.af=function(a,b,c,d){var e=this.l,f=new T(a,b,c),c=Array(3);f.ja(c);f=new O;f.kd(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new O;c.Oc(a);a=new O;a.Oc([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.be();b=new O;b.ag(d[0],d[1],d[2],d[3]);b.be();f=new O;f.S(a,b);d=new O;d.S(a,f);b=new O;b.Oc([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.be();a=new O;a.S(b,d);d=new O;d.S(c,
a);c=new O;c.Nc(L,L,L);a=new O;a.S(d,c);e.ba=a;tc(e)};
u.va=function(a){if(a==l)J(K("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==l)J(K("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=va)J(K("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.l=new Q(this.parent.parent.parent.parent.c);this.l.H=!1;this.l.Lm=this.id;var b=this;this.l.ld(a.jsonobject,function(){b.longitude!=0&&b.latitude!=0&&b.sd(b.longitude,b.latitude,b.elevation);b.status=La;b.G&&b.G(b.id)},function(){b.status=
3;b.F&&b.F(b.id)});this.ne=a.url;this.l.ul=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*L:5E4*L}if(a.longitude&&a.latitude&&a.elevation)this.longitude=a.longitude,this.latitude=a.latitude,this.elevation=a.elevation}};u.Pa=function(){if(this.l)this.l.J(),this.l=l,this.status=3};u.Y=function(){if(this.l)this.l.H=!1};u.X=function(){if(this.l)this.l.H=!0};var Zg=-1;function Y(a,b,c){var d=l;a==z?d=new Cg:a==A?d=new Eg:a==B?d=new Dg:a==la?d=new Sg:a==ma?d=new Kg:a!=na&&(a==oa?d=new Ig:a==pa?d=new Xg:a!=qa&&a!=ra&&(a==sa?d=new Ab:a==C?d=new Gg:a!=ta&&(a==ua?d=new of:a==va?d=new Qg:a==wa?d=new Yg:a==xa?d=new Gb:a!=ya&&a!=za&&a!=Aa&&a!=Ba&&(a==Ca?d=new Og:a==Da?d=new Tg:a==Ea?d=new Rg:a==Fa?d=new me:a==Ga&&(d=new Ug)))));if(d!=l)Zg++,d.id=Zg,d.parent=b,E.push(d),d.va(c);return d}x("_CreateObject",Y);
x("ogGetObjectType",function(a){return(a=F(a))?a.type:Ha});x("ogGetObjectName",function(a){return(a=F(a))?a.name:""});x("ogGetNumObjects",function(){return E.length});x("ogGetObjectAt",function(a){a=a<0||a>E.length-1?l:E[a];return a==l?-1:a.id});x("ogGetParentObject",function(a){if((a=F(a))&&a.parent)return a.parent.id;return-1});x("ogSetObjectName",function(a,b){var c=F(a);if(c)c.name=b});
x("ogGetObjectByName",function(a){a:{for(var b=0;b<E.length;b++)if(E[b].name==a){a=E[b];break a}a=l}if(a)return a.id;return-1});x("ogGetObjectStatus",function(a){if(a=F(a))return a.status;return 3});x("ogOnLoad",function(a,b){var c=F(a);if(c)c.status==La?b(a):c.G=b});x("ogOnFailure",function(a,b){var c=F(a);if(c)c.status==3?b(a):c.F=b});function $g(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=Y(z,l,a);if(a!=l)return a.id;return-1}x("ogCreateContext",$g);
x("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?!0:!1;f.canvas=a;return $g(f,c,d,e)});x("ogDestroyContext",function(a){(a=F(a))&&a.type==z&&I(a)});x("ogGetWidth",function(a){if((a=F(a))&&a.type==z)return a=a.c?a.c.width:0,a;return 0});x("ogGetHeight",function(a){if((a=F(a))&&a.type==z)return a=a.c?a.c.height:0,a;return 0});x("ogGetScene",function(a){if((a=F(a))&&a.type==z&&a.d)return a.d.id;return-1});
x("ogSetBackgroundColor",function(a,b,c,d,e){(a=F(a))&&a.type==z&&a.c&&a.c.Gj(b,c,d,e)});x("ogSetTextColor",function(a,b,c,d){(a=F(a))&&a.type==z&&a.fontcolor.q(b,c,d,1)});x("ogDrawText",function(a,b,c,d){(a=F(a))&&a.type==z&&a.Lc(b,c,d)});x("ogGetTextSize",function(a,b){var c=F(a);if(c&&c.type==z&&(c=c.sh(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});x("ogSetMouseDownFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.yd=b});
x("ogSetMouseUpFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Ad=b});x("ogSetMouseMoveFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.zd=b});x("ogSetMouseWheelFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Ac=b});x("ogSetKeyDownFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Zh=b});x("ogSetKeyUpFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.$h=b});x("ogSetResizeFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Bc=b});
x("ogSetRenderFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Tc=b});x("ogSetTimerFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Uc=b});x("ogSetRenderGeometryFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.tn=b});x("ogSetBeginRenderFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.gm=b});x("ogSetEndRenderFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.hm=b});x("ogSetFlyToStartedFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.wd=b});
x("ogSetInPositionFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.xd=b});x("ogSetNumRenderPasses",function(a,b){var c=F(a);if(c&&c.type==z)c.Jm=b});x("ogExec",n());x("ogSetArtworkDirectory",function(a){U=a});function ah(a,b){var c=F(a);if(c&&c.type==z){var d={};d.type=b;return b==D||b==Ia||b==Ja||b==Ka?(d=Y(A,c,d),c.d=d,d.id):(J(K("owg.og"),"** WARNING: wrong scene type"),-1)}J(K("owg.og"),"** WARNING: context is not valid");return-1}x("ogCreateScene",ah);
x("ogGetContext",function(a){if((a=F(a))&&a.type==A)if(a=a.parent)return a.id;return-1});x("ogGetWorld",function(a){if((a=F(a))&&a.type==A)if(a=a.Ie)return a.id;return-1});x("ogPickGlobe",function(a,b,c){if((a=F(a))&&a.type==A&&a.oc==D)return a.We(b,c);return[!1,0,0,0]});x("ogToCartesian",function(a,b,c,d){if((a=F(a))&&a.type==A&&a.oc==D){var e=[];(new T(b,c,d)).ja(e)}return e||l});
x("ogToWGS84",function(a,b,c,d){if((a=F(a))&&a.type==A&&a.oc==D){var e=new T;e.Xb(b,c,d);e=[e.t[0],e.t[1],e.t[2]]}return e||l});x("ogCreateCamera",function(a){if((a=F(a))&&a.type==A){var b=Y(xa,a,l);a.Fg.push(b);return b.id}return-1});x("ogDestroyCamera",function(a){(a=F(a))&&a.type==xa&&I(a)});x("ogSetPosition",function(a,b,c,d){(a=F(a))&&a.type==xa&&a.ea(b,c,d)});function bh(a){if((a=F(a))&&a.type==A)return a=a.vd,Ib(a),a.nd();return l}x("ogGetPosition",bh);
function ch(a,b,c,d){if((a=F(a))&&a.type==xa)return b>360&&(b-=360),b<0&&(b=360+b),a.$d(b,c,d);return l}x("ogSetOrientation",ch);x("ogSetOrientationFromQuaternion",function(a,b,c,d,e){if((a=F(a))&&a.type==xa)return a.og(b,c,d,e);return l});function dh(a){if((a=F(a))&&a.type==A)return a=a.vd,Ib(a),a.Re();return l}x("ogGetOrientation",dh);function eh(a){if((a=F(a))&&a.type==A)return a.vd.id;return-1}x("ogGetActiveCamera",eh);x("ogSetActiveCamera",function(a){(a=F(a))&&a.type==xa&&Fg(a.parent,a.id)});
x("ogGetNumCameras",function(a){if((a=F(a))&&a.type==A)return a.Fg.length});x("ogGetCameraAt",function(a,b){var c=F(a);if(c&&c.type==A)return c.Fg[b].id;return-1});
x("ogLookAt",function(a,b,c,d){var e=eh(a);Ib(F(e));var f=bh(a),g=[];(new T(f.longitude,f.latitude,f.elevation)).ja(g);var j=new N(g[0],g[1],g[2]),k=[];(new T(b,c,d)).ja(k);b=(new N(k[0],k[1],k[2])).Le();b.Hh(j);j=new O;j.kd(f.longitude,f.latitude);f=new O;f.wc(g[0],g[1],g[2]);g=new O;g.S(f,j);g.be();g=g.Aa(b);g.Lb();g=g.a;f=g[0];j=g[1];b=g[2];g=Math.acos(f/Math.sqrt(1-b*b))*57.29577951308232;j<0&&f>0&&(g=360-g);j<0&&f<0&&(g=360-g);f=-(90-Math.acos(b)*57.29577951308232);b<-0.9&&(g=180+g,f=-f);a=dh(a);
ch(e,g,f,a.roll)});function fh(a){if((a=F(a))&&a.type==A){var b={};b.scenetype=a.oc;b=Y(B,a,b);a.Ie=b;return b.id}return-1}x("ogCreateWorld",fh);x("ogCreateGlobe",function(a){var b=ah(a,D),a=fh(b),b=F(b),c=Y(xa,b,l);Ib(c);Fg(b,c.id);b.Fg.push(c);return a});x("ogSetNorthpoleColor",function(a,b,c,d){if((a=F(a))&&a.type==B)a.parent.parent.c.d.K.Ja.Ld=[b,c,d]});x("ogSetSouthpoleColor",function(a,b,c,d){if((a=F(a))&&a.type==B)a.parent.parent.c.d.K.Ja.Ud=[b,c,d]});
x("ogSetRenderQuality",function(a,b){var c=F(a);if(c&&c.type==B&&(c=c.parent.parent.c.d.K.Ja,b>0&&b<=3))c.$k=b});x("ogSetRenderEffect",function(a,b,c){(a=F(a))&&a.type==B&&a.pg(b,c)});x("ogLoadTextureAsync",function(a,b){var c=F(a);if(c&&c.type==A){var d={};d.url=b;return Y(sa,c,d).id}return-1});x("ogDestroyTexture",function(a){(a=F(a))&&a.type==sa&&I(a)});x("ogBlitTexture",function(a,b,c,d){(a=F(a))&&a.type==sa&&a.A(b,c,d)});
x("ogAddImageLayer",function(a,b){var c=F(a);if(c&&c.type==B)return Y(la,c,b).id;return-1});x("ogRemoveImageLayer",function(a){if((a=F(a))&&a.type==la)a.lg(),I(a)});x("ogAddElevationLayer",function(a,b){var c=F(a);if(c&&c.type==B)return Y(ma,c,b).id;return-1});x("ogRemoveElevationLayer",function(a){if((a=F(a))&&a.type==ma)a.lg(),I(a)});x("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;if((a=F(a))&&a.type==B)return Y(oa,a,e).id;return-1});
x("ogRemovePOILayer",function(a){(a=F(a))&&a.type==oa&&I(a)});x("ogHidePOILayer",function(a){(a=F(a))&&a.type==oa&&a.X()});x("ogShowPOILayer",function(a){(a=F(a))&&a.type==oa&&a.Y()});x("ogCreatePOI",function(a,b){var c=F(a);if(c&&c.type==oa){b.textstyle=c.Wd;b.iconstyle=c.Ed;var d=Y(C,c.parent.parent,b);c.ka.push(d);d.Hn=c;return d.id}return-1});
x("ogDestroyPOI",function(a){if((a=F(a))&&a.type==C)if(a.i){var b=F(a.i);if(b&&b.type==oa)for(var c=0;c<b.ka.length;c++)b.ka[c]==a&&(I(b.ka[c]),b.ka.splice(c,1))}else I(a);return-1});x("ogChangePOIText",function(a,b){var c=F(a);if(c&&c.type==C){var d=c.parent.parent;c.Wd&&d.c.Ce.oj(c.da,b,c.Wd)}});x("ogChangePOIIcon",function(a,b){var c=F(a);if(c&&c.type==C){var d=c.parent.parent;c.Ed&&d.c.Ce.nj(c.da,b,c.Ed)}});x("ogChangePOISize",function(a,b){var c=F(a);c&&c.type==C&&c.da.qg(b)});
x("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=F(a))&&a.type==C){var e=[];(new T(b,c,d)).ja(e);b=e[0];c=e[1];e=e[2];a.da.Md?a.da.ea(b,c,e,0):a.da.ea(b,c,e,l)}});x("ogChangePOIPosition",function(a,b,c,d){(a=F(a))&&a.type==C&&(a.da.Md?a.da.ea(b,c,d,0):a.da.ea(b,c,d,l))});x("ogHidePOI",function(a){(a=F(a))&&a.type==C&&a.X()});x("ogShowPOI",function(a){(a=F(a))&&a.type==C&&a.Y()});x("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=F(a))&&a.type==C)a.da.Hi=new P(b,c,d,e)});
x("ogPickPOI",function(a,b,c){if((a=F(a))&&a.type==A&&a.oc==D)return a.Ye(b,c);return-1});x("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=F(a);if(d&&d.type==B)return Y(pa,d,c).id;return-1});x("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=F(a);if(d&&d.type==B)return Y(Ea,d,c).id;return-1});x("ogCreateAoeImage",function(a,b){var c=F(a);if(c&&c.type==Ea){var d=Y(Fa,c.parent.parent,b);c.kh(d);return d.id}return-1});
x("ogDestroyAoeImage",function(a){if((a=F(a))&&a.type==Fa){var b=F(a.tf);b&&b.type==Ea&&b.Bh(a)}return-1});x("ogHideGeometryLayer",function(a){(a=F(a))&&a.type==pa&&a.X()});x("ogShowGeometryLayer",function(a){(a=F(a))&&a.type==pa&&a.Y()});x("ogRemoveGeometryLayer",function(a){(a=F(a))&&a.type==pa&&I(a);return-1});x("ogCreateGeometry",function(a,b){var c={};c.jsonobject=b;var d=F(a);if(d&&d.type==pa)return c=Y(ua,d.parent.parent,c),d.Ke(c),c.id;return-1});
x("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=F(a);if(d&&d.type==pa)return c=Y(ua,d.parent.parent,c),d.Ke(c),c.id;return-1});x("ogDestroyGeometry",function(a){if((a=F(a))&&a.type==ua){var b=F(a.tf);b&&b.type==pa&&b.Dh(a)}return-1});x("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){if((a=F(a))&&a.type==ua)return a.sd(b,c,d,e,f,g);return-1});x("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){if((a=F(a))&&a.type==ua)return a.af(b,c,d,e);return-1});
x("ogGetNumMeshes",function(a){if((a=F(a))&&a.type==ua)return a.mb.length;return-1});x("ogGetMeshAt",function(a,b){var c=F(a);if(c&&c.type==ua)return c.mb[b].id;return-1});x("ogHideGeometry",function(a){(a=F(a))&&a.type==ua&&a.X()});x("ogShowGeometry",function(a){(a=F(a))&&a.type==ua&&a.Y()});x("ogPickGeometry",function(a,b,c){if((a=F(a))&&a.type==A&&a.oc==D)if(b=a.rd(b,c),b=F(b))return b.parent.parent.id;return-1});x("ogGetSurfaceAt",function(a,b){var c=F(a);if(c&&c.type==va)return c.sb[b].id;return-1});
x("ogHideMesh",function(a){(a=F(a))&&a.type==va&&a.X()});x("ogShowMesh",function(a){(a=F(a))&&a.type==va&&a.Y()});x("ogPickMesh",function(a,b,c){if((a=F(a))&&a.type==A&&a.oc==D)if(b=a.rd(b,c),b=F(b))return b.parent.id;return-1});x("ogHideSurface",function(a){(a=F(a))&&a.type==wa&&a.X()});x("ogShowSurface",function(a){(a=F(a))&&a.type==wa&&a.Y()});x("ogPickSurface",function(a,b,c){if((a=F(a))&&a.type==A&&a.oc==D)return a.rd(b,c);return-1});
x("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=F(a);if(d&&d.type==B)return Y(Da,d,c).id;return-1});x("ogRemoveBillboardLayer",function(a){(a=F(a))&&a.type==Da&&I(a)});x("ogHideBillboardLayer",function(a){(a=F(a))&&a.type==Da&&a.X()});x("ogShowBillboardLayer",function(a){(a=F(a))&&a.type==Da&&a.Y()});x("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=F(a))&&a.type==Da){var f={};f.canvas=b;f.position=[c,d,e];b=Y(Ca,a.parent.parent,f);a.lh(b);b.i=a.id;return b.id}return-1});
x("ogDestroyBillboard",function(a){if((a=F(a))&&a.type==Ca)if(a.i){var b=F(a.i);b&&b.type==Da&&b.Ch(a)}else I(a);return-1});x("ogHideBillboard",function(a){(a=F(a))&&a.type==Ca&&a.X();return-1});x("ogShowBillboard",function(a){(a=F(a))&&a.type==Ca&&a.Y();return-1});x("ogPickBillboard",function(a,b,c){if((a=F(a))&&a.type==A&&a.oc==D)return a.Xe(b,c);return-1});x("ogUpdateBillboard",function(a,b){var c=F(a);if(c&&c.type==Ca)c.yb.canvas=b,c.yb.bf();else return-1});
x("ogFlyTo",function(a,b,c,d,e,f,g){(a=F(a).parent.c)&&le(a.Ia,b,c,d,e,f,g)});x("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=F(a).parent.c)&&a.rh(b,c,d,e,f,g,j)});x("ogSetFlightDuration",function(a,b){var c=F(a).parent.c;c&&c.ng(b)});x("ogSetCanvasSizeOffset",function(a,b,c){a=F(a).parent.c;a.kj=b;a.si=c;jg()});
