function aa(a){throw a;}var h=void 0,i=!0,m=null,o=!1;function p(){return function(){}}function ca(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function ea(a){return function(){return a}}var s,t=this;function fa(a){for(var a=a.split("."),b=t,c;c=a.shift();)if(b[c]!=m)b=b[c];else return m;return b}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function w(a){return a!==h}function ka(a){return"array"==ga(a)}function la(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function pa(a){return"string"==typeof a}function qa(a){return"function"==ga(a)}function ra(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function sa(a){return a[ta]||(a[ta]=++ua)}var ta="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ua=0;
function va(a,b,c){return a.call.apply(a.bind,arguments)}function wa(a,b,c){a||aa(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function xa(a,b,c){xa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:wa;return xa.apply(m,arguments)}var ya=Date.now||function(){return+new Date};
function x(a,b){var c=a.split("."),d=t;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&w(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function za(a,b){function c(){}c.prototype=b.prototype;a.Ee=b.prototype;a.prototype=new c;a.prototype.constructor=a};var A=0,C=1,Aa=2,Ba=3,Ca=4,Da=5,Ea=6,Fa=7,Ga=8,Ha=9,Ia=10,Ja=11,Ka=12,La=13,Ma=14,Na=15,Oa=16,Pa=17,Qa=18,Ra=19,Sa=20,Ta=21,Ua=22,Va=23,Wa=24,Xa=65533,Ya=65534,Za=25,$a=26,ab=65535;x("OG_OBJECT_CONTEXT",A);x("OG_OBJECT_SCENE",C);x("OG_OBJECT_WORLD",Aa);x("OG_OBJECT_IMAGELAYER",Ba);x("OG_OBJECT_ELEVATIONLAYER",Ca);x("OG_OBJECT_WAYPOINTLAYER",Da);x("OG_OBJECT_GEOMETRYLAYER",Fa);x("OG_OBJECT_POILAYER",Ea);x("OG_OBJECT_VOXELLAYER",Ga);x("OG_OBJECT_VECTORLAYER",Ha);x("OG_OBJECT_IMAGE",Ia);
x("OG_OBJECT_TEXTURE",Ja);x("OG_OBJECT_PIXELBUFFER",Ka);x("OG_OBJECT_GEOMETRY",La);x("OG_OBJECT_MESH",Ma);x("OG_OBJECT_SURFACE",Na);x("OG_OBJECT_VECTOR",Oa);x("OG_OBJECT_CAMERA",Pa);x("OG_OBJECT_TEXT",Qa);x("OG_OBJECT_BINARYDATA",Ra);x("OG_OBJECT_LIGHT",Sa);x("OG_OBJECT_NAVIGATIONCONTROLLER",Ta);x("OG_OBJECT_POI",Ua);x("OG_OBJECT_BILLBOARD",Va);x("OG_OBJECT_BILLBOARDLAYER",Wa);x("OG_OBJECT_AOEIMAGELAYER",Xa);x("OG_OBJECT_AOEIMAGE",Ya);x("OG_OBJECT_POINTSPRITE",Za);x("OG_OBJECT_EARTHPOLYLINE",$a);
x("OG_OBJECT_INVALID",ab);x("OG_RENDEREFFECT_RGB",0);x("OG_RENDEREFFECT_CHROMADEPTH",1);var bb=1,cb=2,db=3,eb=4;x("OG_SCENE_3D_ELLIPSOID_WGS84",bb);x("OG_SCENE_3D_FLAT_CARTESIAN",cb);x("OG_SCENE_2D_SCREEN",db);x("OG_SCENE_CUSTOM",eb);var fb=1,gb=2;x("OG_OBJECT_READY",fb);x("OG_OBJECT_BUSY",gb);x("OG_OBJECT_FAILED",3);var hb=[];function D(a){if(-1==a)return m;for(var b=0;b<hb.length;b++)if(hb[b].id==a)return hb[b];return m}function E(){this.parent=m;this.name="ogObject";this.type=ab;this.id=-1;this.status=fb;this.P=this.Q=m}E.prototype.Na=p();function F(a){for(var a=a.id,b=0;b<hb.length;b++)if(hb[b].id==a){hb[b].Na();hb.splice(b,1);break}}E.prototype.ya=p();function ib(a,b){for(var c=1;c<arguments.length;c++)var d=(""+arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function jb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function kb(a){if(!lb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(mb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(nb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ob,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(pb,"&quot;"));return a}var mb=/&/g,nb=/</g,ob=/>/g,pb=/\"/g,lb=/[&<>\"]/;
function qb(a){return jb(a.replace(/  /g," &#160;"),h)};var rb,sb,tb,ub,vb;function wb(){return t.navigator?t.navigator.userAgent:m}ub=tb=sb=rb=o;var xb;if(xb=wb()){var yb=t.navigator;rb=0==xb.indexOf("Opera");sb=!rb&&-1!=xb.indexOf("MSIE");tb=!rb&&-1!=xb.indexOf("WebKit");ub=!rb&&!tb&&"Gecko"==yb.product}var zb=rb,Ab=sb,Bb=ub,Cb=tb,Db,Eb=t.navigator;Db=Eb&&Eb.platform||"";vb=-1!=Db.indexOf("Mac");var Fb=-1!=Db.indexOf("Win"),Gb;
a:{var Hb="",Ib;if(zb&&t.opera)var Jb=t.opera.version,Hb="function"==typeof Jb?Jb():Jb;else if(Bb?Ib=/rv\:([^\);]+)(\)|;)/:Ab?Ib=/MSIE\s+([^\);]+)(\)|;)/:Cb&&(Ib=/WebKit\/(\S+)/),Ib)var Kb=Ib.exec(wb()),Hb=Kb?Kb[1]:"";if(Ab){var Lb,Mb=t.document;Lb=Mb?Mb.documentMode:h;if(Lb>parseFloat(Hb)){Gb=""+Lb;break a}}Gb=Hb}var Nb={};
function Ob(a){var b;if(!(b=Nb[a])){b=0;for(var c=(""+Gb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var n=k.exec(g)||["","",""],r=l.exec(j)||["","",""];if(0==n[0].length&&0==r[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==n[2].length)<(0==r[2].length)?-1:(0==n[2].length)>(0==r[2].length)?1:0)||(n[2]<r[2]?-1:n[2]>r[2]?1:0)}while(0==b)}b=Nb[a]=0<=b}return b}var Pb={};function Qb(){return Pb[9]||(Pb[9]=Ab&&!!document.documentMode&&9<=document.documentMode)};function Rb(a,b){for(var c in a)b.call(h,a[c],c,a)}function Sb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Tb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Ub(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Tb.length;f++)c=Tb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Vb(a){this.stack=Error().stack||"";a&&(this.message=""+a)}za(Vb,Error);Vb.prototype.name="CustomError";function Wb(a,b){b.unshift(a);Vb.call(this,ib.apply(m,b));b.shift()}za(Wb,Vb);Wb.prototype.name="AssertionError";function Xb(a,b){aa(new Wb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Yb=Array.prototype,Zb=Yb.indexOf?function(a,b,c){return Yb.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(pa(a))return!pa(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},$b=Yb.forEach?function(a,b,c){Yb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=pa(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function ac(a){return Yb.concat.apply(Yb,arguments)}
function bc(a){if(ka(a))return ac(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function cc(a,b,c){return 2>=arguments.length?Yb.slice.call(a,b):Yb.slice.call(a,b,c)};var dc="StopIteration"in t?t.StopIteration:Error("StopIteration");function ec(){}ec.prototype.next=function(){aa(dc)};ec.prototype.Vi=function(){return this};function fc(a){if(a instanceof ec)return a;if("function"==typeof a.Vi)return a.Vi(o);if(la(a)){var b=0,c=new ec;c.next=function(){for(;;){b>=a.length&&aa(dc);if(b in a)return a[b++];b++}};return c}aa(Error("Not implemented"))}
function gc(a,b){if(la(a))try{$b(a,b,h)}catch(c){c!==dc&&aa(c)}else{a=fc(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==dc&&aa(d)}}};function hc(a,b){this.ac={};this.Ya=[];var c=arguments.length;if(1<c){c%2&&aa(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){if(a instanceof hc)c=a.Rh(),d=a.Ej();else{var c=Sb(a),e=[],f=0;for(d in a)e[f++]=a[d];d=e}for(e=0;e<c.length;e++)this.set(c[e],d[e])}}s=hc.prototype;s.ta=0;s.ui=0;s.je=da("ta");s.Ej=function(){ic(this);for(var a=[],b=0;b<this.Ya.length;b++)a.push(this.ac[this.Ya[b]]);return a};s.Rh=function(){ic(this);return this.Ya.concat()};
s.h=function(a,b){if(this===a)return i;if(this.ta!=a.je())return o;var c=b||jc;ic(this);for(var d,e=0;d=this.Ya[e];e++)if(!c(this.get(d),a.get(d)))return o;return i};function jc(a,b){return a===b}s.clear=function(){this.ac={};this.ui=this.ta=this.Ya.length=0};
function ic(a){if(a.ta!=a.Ya.length){for(var b=0,c=0;b<a.Ya.length;){var d=a.Ya[b];Object.prototype.hasOwnProperty.call(a.ac,d)&&(a.Ya[c++]=d);b++}a.Ya.length=c}if(a.ta!=a.Ya.length){for(var e={},c=b=0;b<a.Ya.length;)d=a.Ya[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Ya[c++]=d,e[d]=1),b++;a.Ya.length=c}}s.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.ac,a)?this.ac[a]:b};
s.set=function(a,b){Object.prototype.hasOwnProperty.call(this.ac,a)||(this.ta++,this.Ya.push(a),this.ui++);this.ac[a]=b};s.Vi=function(a){ic(this);var b=0,c=this.Ya,d=this.ac,e=this.ui,f=this,g=new ec;g.next=function(){for(;;){e!=f.ui&&aa(Error("The map has changed since the iterator was created"));b>=c.length&&aa(dc);var g=c[b++];return a?g:d[g]}};return g};function kc(a){return lc(a||arguments.callee.caller,[])}
function lc(a,b){var c=[];if(0<=Zb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(mc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=""+f;break;case "boolean":f=f?"true":"false";break;case "function":f=(f=mc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(lc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function mc(a){if(nc[a])return nc[a];a=""+a;if(!nc[a]){var b=/function ([^\(]+)/.exec(a);nc[a]=b?b[1]:"[Anonymous]"}return nc[a]}var nc={};function oc(a,b,c,d,e){this.reset(a,b,c,d,e)}oc.prototype.tj=m;oc.prototype.sj=m;var pc=0;oc.prototype.reset=function(a,b,c,d,e){"number"==typeof e||pc++;this.Am=d||ya();this.tc=a;this.Sl=b;this.Ml=c;delete this.tj;delete this.sj};oc.prototype.Lg=ca("tc");function qc(a){this.Jn=a}qc.prototype.bi=m;qc.prototype.tc=m;qc.prototype.oj=m;qc.prototype.rg=m;function rc(a,b){this.name=a;this.value=b}rc.prototype.toString=da("name");var sc=new rc("SHOUT",1200),tc=new rc("SEVERE",1E3),uc=new rc("WARNING",900),vc=new rc("INFO",800),wc=new rc("CONFIG",700),xc=[new rc("OFF",Infinity),sc,tc,uc,vc,wc,new rc("FINE",500),new rc("FINER",400),new rc("FINEST",300),new rc("ALL",0)],yc=m;
function zc(a){if(!yc){yc={};for(var b=0,c;c=xc[b];b++)yc[c.value]=c,yc[c.name]=c}return yc[a]||m}s=qc.prototype;s.getParent=da("bi");s.Lg=ca("tc");function Ac(a){if(a.tc)return a.tc;if(a.bi)return Ac(a.bi);Xb("Root logger has no level set.");return m}
s.log=function(a,b,c){if(a.value>=Ac(this).value){a=this.Fn(a,b,c);b="log:"+a.Sl;t.console&&(t.console.timeStamp?t.console.timeStamp(b):t.console.markTimeline&&t.console.markTimeline(b));t.msWriteProfilerMark&&t.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.rg)for(var e=0,f=h;f=c.rg[e];e++)f(d);b=b.getParent()}}};
s.Fn=function(a,b,c){var d=new oc(a,""+b,this.Jn);if(c){d.tj=c;var e;var f=arguments.callee.caller;try{var g;var j=fa("window.location.href");if(pa(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,l,n=o;try{k=c.lineNumber||c.po||"Not available"}catch(r){k="Not available",n=i}try{l=c.fileName||c.filename||c.sourceURL||j}catch(q){l="Not available",n=i}g=n||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,fileName:l,
stack:c.stack||"Not available"}:c}e="Message: "+kb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+kb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+kb(kc(f)+"-> ")}catch(u){e="Exception trying to expose exception! You win, we lose. "+u}d.sj=e}return d};function G(a,b){a.log(uc,b,h)}s.info=function(a,b){this.log(vc,a,b)};var Bc={},Cc=m;function Dc(){Cc||(Cc=new qc(""),Bc[""]=Cc,Cc.Lg(wc))}
function H(a){Dc();var b;if(!(b=Bc[a])){b=new qc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=H(a.substr(0,c));c.oj||(c.oj={});c.oj[d]=b;b.bi=c;Bc[a]=b}return b};function Ec(){this.name="ogTexture";this.type=Ja;this.f=m;this.zm="";this.status=gb}Ec.prototype=new E;
Ec.prototype.ya=function(a){if(a==m)G(H("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==m)G(H("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=C)G(H("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.f=this.parent.parent.c.ri.Ck(a.url,function(){b.status=fb;b.Q&&b.Q(b.id)},function(){b.status=3;b.P&&b.P(b.id)},o);this.zm=a.url}};
Ec.prototype.Na=function(){this.f&&(this.parent.parent.c.ri.Ek(this.zm),this.f=m,this.status=3)};Ec.prototype.B=function(a,b,c){this.status==fb&&this.f&&(c!=m?this.f.B(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.f.B(a,b))};var Fc=6378137,Gc=0.006694379990197,Hc=0.006739496742;function I(a){return 0.017453292519943295*a}function Ic(a){return 57.29577951308232*a}function Jc(a){for(var b=1;a>b;)b*=2;return b};function Kc(){this.name="ogCamera";this.type=Pa;this.hc=this.pitch=this.Ka=this.Mc=this.Oc=this.Pc=0}Kc.prototype=new E;s=Kc.prototype;s.Na=function(){this.hc=this.pitch=this.Ka=this.Mc=this.Oc=this.Pc=0};s.sa=function(a,b,c){this.Pc=a;this.Oc=b;this.Mc=c;this.parent.be==this&&Mc(this).sa(a,b,c)};s.Wd=function(){var a={};a.longitude=this.Pc;a.latitude=this.Oc;a.elevation=this.Mc;return a};s.Re=function(a,b,c){this.Ka=a;this.pitch=b;this.hc=c;this==this.parent.be&&Mc(this).Re(I(a),I(b),I(c))};
s.Of=function(){var a={};a.yaw=this.Ka;a.pitch=this.pitch;a.roll=this.hc;return a};s.nh=function(a,b,c,d){this==this.parent.be&&Mc(this).nh(a,b,c,d)};function Mc(a){var b=m,a=a.parent.parent.c;a.g&&a.g.bc&&(b=a.g.bc);return b}function Nc(a){var b=Mc(a),c=b.Wd(),b=b.Of();a.Pc=c.longitude;a.Oc=c.latitude;a.Mc=c.elevation;a.Ka=Ic(b.Ka);a.pitch=Ic(b.pitch);a.hc=Ic(b.hc)};function J(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.Eb=new Float32Array([a,b,c])}s=J.prototype;s.u=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};s.Ma=function(){this.Eb[0]=this.a[0];this.Eb[1]=this.a[1];this.Eb[2]=this.a[2];return this.Eb};s.Nf=da("a");s.If=function(){var a=new J;a.u(this.a[0],this.a[1],this.a[2]);return a};s.Rm=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};s.Ui=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
s.jn=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};s.Um=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Oc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}s.Vm=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
s.Hi=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return Math.sqrt(a*a+b*b+c*c)};s.hn=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return a*a+b*b+c*c};s.lc=function(){var a=this.Hi();0!=a&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};s.en=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};s.Se=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};x("Cross",Oc);x("vec3",J);J.prototype.Add=J.prototype.Rm;J.prototype.Cross=J.prototype.Um;
J.prototype.Dot=J.prototype.Vm;J.prototype.Get=J.prototype.Nf;J.prototype.Length=J.prototype.Hi;J.prototype.Neg=J.prototype.en;J.prototype.Normalize=J.prototype.lc;J.prototype.Set=J.prototype.u;J.prototype.SquaredLength=J.prototype.hn;J.prototype.Subtract=J.prototype.jn;J.prototype.Sub=J.prototype.Ui;J.prototype.ToString=J.prototype.Se;function K(){this.a=Array(16);this.ah();this.Eb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}s=K.prototype;s.xd=function(a){if(16==a.length)for(var b=0;16>b;b++)this.a[b]=a[b]};s.Ma=function(){for(var a=0;16>a;a++)this.Eb[a]=this.a[a];return this.Eb};s.Nf=da("a");s.If=function(){for(var a=new K,b=0;16>b;b++)a.a[b]=this.a[b];return a};s.da=function(a){for(var b=0;16>b;b++)this.a[b]=a.a[b]};
s.ah=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};s.kn=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.$c=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};s.Nk=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};s.wd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return i};
s.Ri=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};s.Qk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
s.Rk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
s.dn=function(a,b,c,d,e,f,g,j,k){var l,n,r,q,d=a-d,e=b-e,f=c-f;q=1/Math.sqrt(d*d+e*e+f*f);d*=q;e*=q;f*=q;l=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(q=Math.sqrt(l*l+k*k+g*g))?(q=1/q,l*=q,k*=q,g*=q):g=k=l=0;j=e*g-f*k;n=f*l-d*g;r=d*k-e*l;(q=Math.sqrt(j*j+n*n+r*r))?(q=1/q,j*=q,n*=q,r*=q):r=n=j=0;this.a[0]=l;this.a[4]=k;this.a[8]=g;this.a[12]=-(l*a+k*b+g*c);this.a[1]=j;this.a[5]=n;this.a[9]=r;this.a[13]=-(j*a+n*b+r*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
s.aa=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],l=a.a[7],n=a.a[8],r=a.a[9],q=a.a[10],u=a.a[11],v=a.a[12],y=a.a[13],z=a.a[14],ha=a.a[15],ia=b.a[0],P=b.a[1],ba=b.a[2],T=b.a[3],U=b.a[4],V=b.a[5],ma=b.a[6],na=b.a[7],oa=b.a[8],B=b.a[9],X=b.a[10],ja=b.a[11],Y=b.a[12],Z=b.a[13],N=b.a[14],Lc=b.a[15];this.a[0]=ia*c+P*g+ba*n+T*v;this.a[1]=ia*d+P*j+ba*r+T*y;this.a[2]=ia*e+P*k+ba*q+T*z;this.a[3]=ia*f+P*l+ba*u+T*ha;this.a[4]=U*c+V*g+ma*n+na*v;this.a[5]=U*d+V*j+ma*r+na*y;this.a[6]=
U*e+V*k+ma*q+na*z;this.a[7]=U*f+V*l+ma*u+na*ha;this.a[8]=oa*c+B*g+X*n+ja*v;this.a[9]=oa*d+B*j+X*r+ja*y;this.a[10]=oa*e+B*k+X*q+ja*z;this.a[11]=oa*f+B*l+X*u+ja*ha;this.a[12]=Y*c+Z*g+N*n+Lc*v;this.a[13]=Y*d+Z*j+N*r+Lc*y;this.a[14]=Y*e+Z*k+N*q+Lc*z;this.a[15]=Y*f+Z*l+N*u+Lc*ha};s.Te=function(){for(var a=this.If(),b=0;4>b;b++)for(var c=0;4>c;c++)this.a[4*b+c]=a.a[4*c+b]};
s.La=function(a){var b=new J;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
s.Ym=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2*e/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=2*e/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(2*f*e)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
s.Ok=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
s.Lk=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};s.Mk=function(a,b,c,d){this.Lk(a,b,c,d,-1,1)};
s.Ud=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.Tm=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.xk=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.zi=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.Wm=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];1.0E-6>Math.abs(b)&&1.0E-6>Math.abs(d)?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};
s.Xg=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};s.yk=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.Xm=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.Yg=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,k=a*c,l=b*c,a=d*a,b=d*b,c=d*c;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*l+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*l-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
s.fn=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],k=this.a[10],l=a+e+k;0<l?(l=2*Math.sqrt(l+1),a=0.25*l,e=(j-f)/l,k=(c-g)/l,b=(d-b)/l):a>e&a>k?(l=2*Math.sqrt(1+a-e-k),a=(j-f)/l,e=0.25*l,k=(b+d)/l,b=(c+g)/l):e>k?(l=2*Math.sqrt(1+e-a-k),a=(c-g)/l,e=(b+d)/l,k=0.25*l,b=(f+j)/l):(l=2*Math.sqrt(1+k-a-e),a=(d-b)/l,e=(c+g)/l,k=(f+j)/l,b=0.25*l);return[e,k,b,a]};
s.Le=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],l=a.a[8],n=a.a[9],r=a.a[10],q=a.a[11],u=a.a[12],v=a.a[13],y=a.a[14],a=a.a[15],z=1/(b*g*r*a+b*j*q*v+b*k*n*y+c*f*q*y+c*j*l*a+c*k*r*u+d*f*n*a+d*g*q*u+d*k*l*v+e*f*r*v+e*g*l*y+e*j*n*u-b*g*q*y-b*j*n*a-b*k*r*v-c*f*r*a-c*j*q*u-c*k*l*y-d*f*q*v-d*g*l*a-d*k*n*u-e*f*n*y-e*g*r*u-e*j*l*v);this.a[0]=(g*r*a+j*q*v+k*n*y-g*q*y-j*n*a-k*r*v)*z;this.a[4]=(f*q*y+j*l*a+k*r*u-f*r*a-j*q*u-k*l*y)*z;this.a[8]=(f*n*a+g*q*u+k*l*v-f*q*
v-g*l*a-k*n*u)*z;this.a[12]=(f*r*v+g*l*y+j*n*u-f*n*y-g*r*u-j*l*v)*z;this.a[1]=(c*q*y+d*n*a+e*r*v-c*r*a-d*q*v-e*n*y)*z;this.a[5]=(b*r*a+d*q*u+e*l*y-b*q*y-d*l*a-e*r*u)*z;this.a[9]=(b*q*v+c*l*a+e*n*u-b*n*a-c*q*u-e*l*v)*z;this.a[13]=(b*n*y+c*r*u+d*l*v-b*r*v-c*l*y-d*n*u)*z;this.a[2]=(c*j*a+d*k*v+e*g*y-c*k*y-d*g*a-e*j*v)*z;this.a[6]=(b*k*y+d*f*a+e*j*u-b*j*a-d*k*u-e*f*y)*z;this.a[10]=(b*g*a+c*k*u+e*f*v-b*k*v-c*f*a-e*g*u)*z;this.a[14]=(b*j*v+c*f*y+d*g*u-b*g*y-c*j*u-d*f*v)*z;this.a[3]=(c*k*r+d*g*q+e*j*n-c*
j*q-d*k*n-e*g*r)*z;this.a[7]=(b*j*q+d*k*l+e*f*r-b*k*r-d*f*q-e*j*l)*z;this.a[11]=(b*k*n+c*f*q+e*g*l-b*g*q-c*k*l-e*f*n)*z;this.a[15]=(b*g*r+c*j*l+d*f*n-b*j*n-c*f*r-d*g*l)*z};s.Se=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};x("mat4",K);K.prototype.CalcBodyFrame=K.prototype.zi;
K.prototype.CalcNavigationFrame=K.prototype.Ud;K.prototype.Cami3d=K.prototype.Xg;K.prototype.CopyFrom=K.prototype.da;K.prototype.Copy=K.prototype.If;K.prototype.Frustum=K.prototype.Ym;K.prototype.Get=K.prototype.Nf;K.prototype.Identity=K.prototype.ah;K.prototype.Inverse=K.prototype.Le;K.prototype.LookAt=K.prototype.dn;K.prototype.Multiply=K.prototype.aa;K.prototype.MultiplyVec3=K.prototype.La;K.prototype.Ortho2D=K.prototype.Mk;K.prototype.Ortho=K.prototype.Lk;K.prototype.OverwriteTranslation=K.prototype.Nk;
K.prototype.Perspective=K.prototype.Ok;K.prototype.RotationX=K.prototype.Ri;K.prototype.RotationY=K.prototype.Qk;K.prototype.RotationZ=K.prototype.Rk;K.prototype.Scale=K.prototype.wd;K.prototype.SetFromArray=K.prototype.xd;K.prototype.ToString=K.prototype.Se;K.prototype.Translation=K.prototype.$c;K.prototype.Transpose=K.prototype.Te;K.prototype.Zero=K.prototype.kn;K.prototype.CalcNavigationFrame2=K.prototype.Tm;K.prototype.CalcNavigationFrameZUp=K.prototype.xk;K.prototype.ExtractEulerAngles=K.prototype.Wm;
K.prototype.CamViewFrustum=K.prototype.yk;K.prototype.FromQuaternion=K.prototype.Xm;K.prototype.FromQuaternionComponents=K.prototype.Yg;K.prototype.Rot2Quat=K.prototype.fn;function Pc(){this.dh=[];this.bh=[];this.Me=[];this.nb={};this.nb.x=0;this.nb.y=0;this.nb.n=0;this.Zb={};this.Zb.longitude=0;this.Zb.latitude=0;this.Zb.elevation=0;this.bf=o;this.rc=[0,0];this.Rc=-1;this.em=0;this.$a=Qc;this.Da=0}var Qc=0,Rc=1,Sc=2,Tc=3,Uc=4,Vc=5;Pc.prototype.sa=function(a,b,c){this.nb.x=a;this.nb.y=b;this.nb.n=c};Pc.prototype.Wd=da("nb");function Wc(){this.result={};this.result.w=0;this.result.Rb=0;this.result.Cc=0;this.ob={};this.ob.x=0;this.ob.y=0;this.ob.n=0;this.pb={};this.pb.x=0;this.pb.y=0;this.pb.n=0;this.Ra={};this.Ra.x=0;this.Ra.y=0;this.Ra.n=0;this.wb={};this.wb.x=0;this.wb.y=0;this.wb.n=0;this.xb={};this.xb.x=0;this.xb.y=0;this.Vh=this.Gd=this.xb.n=0;this.Gk=2.220446049250313E-16}
Wc.prototype.Fi=function(a,b,c,d,e,f,g,j,k,l,n,r,q,u,v){this.ob.x=l-g;this.ob.y=n-j;this.ob.n=r-k;this.pb.x=q-g;this.pb.y=u-j;this.pb.n=v-k;this.wb.x=e*this.pb.n-f*this.pb.y;this.wb.y=f*this.pb.x-d*this.pb.n;this.wb.n=d*this.pb.y-e*this.pb.x;this.Gd=this.ob.x*this.wb.x+this.ob.y*this.wb.y+this.ob.n*this.wb.n;this.Ra.x=a-g;this.Ra.y=b-j;this.Ra.n=c-k;this.Vh=1/this.Gd;this.xb.x=this.Ra.y*this.ob.n-this.Ra.n*this.ob.y;this.xb.y=this.Ra.n*this.ob.x-this.Ra.x*this.ob.n;this.xb.n=this.Ra.x*this.ob.y-this.Ra.y*
this.ob.x;if(this.Gd>this.Gk){this.result.Rb=this.Ra.x*this.wb.x+this.Ra.y*this.wb.y+this.Ra.n*this.wb.n;if(0>this.result.Rb||this.result.Rb>this.Gd)return m;this.result.Cc=d*this.xb.x+e*this.xb.y+f*this.xb.n;if(0>this.result.Cc||this.result.Rb+this.result.Cc>this.Gd)return m}else if(this.Gd<-this.Gk){this.result.Rb=this.Ra.x*this.wb.x+this.Ra.y*this.wb.y+this.Ra.n*this.wb.n;if(0<this.result.Rb||this.result.Rb<this.Gd)return m;this.result.Cc=d*this.xb.x+e*this.xb.y+f*this.xb.n;if(0<this.result.Cc||
this.result.Rb+this.result.Cc<this.Gd)return m}else return m;this.result.w=this.pb.x*this.xb.x+this.pb.y*this.xb.y+this.pb.n*this.xb.n;this.result.Rb*=this.Vh;this.result.Cc*=this.Vh;this.result.w*=this.Vh;return this.result};x("TriangleIntersector",Wc);Wc.prototype.IntersectTriangle=Wc.prototype.Fi;function Xc(){this.Pg=this.Qg=this.Ng=this.Og=0;this.Oh=1;this.result={Qd:0,Pd:0}}
Xc.prototype.Pf=function(a,b,c,d,e,f,g,j,k,l,n,r){this.Oh=1;0<=d?(this.result.Qd=(g-a)/d,this.result.Pd=(l-a)/d):(this.result.Qd=(l-a)/d,this.result.Pd=(g-a)/d);0<=e?(this.Og=(j-b)/e,this.Ng=(n-b)/e):(this.Og=(n-b)/e,this.Ng=(j-b)/e);if(this.result.Qd>this.Ng||this.Og>this.result.Pd)this.Oh=-1;this.Og>this.result.Qd&&(this.result.Qd=this.Og);this.Ng<this.result.Pd&&(this.result.Pd=this.Ng);0<=f?(this.Qg=(k-c)/f,this.Pg=(r-c)/f):(this.Qg=(r-c)/f,this.Pg=(k-c)/f);if(this.result.Qd>this.Pg||this.Qg>
this.result.Pd)this.Oh=-1;this.Qg>this.result.Qd&&(this.result.Qd=this.Qg);this.Pg<this.result.Pd&&(this.result.Pd=this.Pg);return 0<this.Oh?this.result:m};x("AABB",Xc);Xc.prototype.HitBox=Xc.prototype.Pf;function Yc(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.Eb=new Float32Array([a,b,c,d])}Yc.prototype.u=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};Yc.prototype.Ma=function(){this.Eb[0]=this.a[0];this.Eb[1]=this.a[1];this.Eb[2]=this.a[2];this.Eb[3]=this.a[3];return this.Eb};Yc.prototype.Nf=da("a");Yc.prototype.Se=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};x("vec4",Yc);Yc.prototype.Get=Yc.prototype.Nf;Yc.prototype.Set=Yc.prototype.u;function Zc(a){a=""+a;if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}aa(Error("Invalid JSON string: "+a))};function L(a){this.c=a;this.b=a.b;this.q=this.f=this.rb=this.V=m;this.mode="";this.Bb=0;this.ld=this.J=m;this.ra=o;this.ql=this.md=this.L=m;this.xl=new Yc;this.xl.u(1,1,1,1);this.yl=new Yc;this.yl.u(1,1,1,1);this.sd=new Yc;this.sd.u(1,0,0,1);this.Fl=new Wc;this.na=this.ga=this.O=m;this.Ah=new Xc;this.ia=m;this.Bg=this.K=0;this.k={};this.cd=Array(3);this.bd=Array(3);this.pd=new K;this.Yh=o;this.$b=-1}function $c(a,b){0==b.length%3&&(a.q=new Float32Array(b),a.mode="p",a.K=3)}
function ad(a,b){0==b.length%8&&(a.q=new Float32Array(b),a.mode="pnt",a.K=8)}function bd(a,b){0==b.length%7&&(a.q=new Float32Array(b),a.mode="pc",a.K=7)}function cd(a,b){0==b.length%5&&(a.q=new Float32Array(b),a.mode="pt",a.K=5)}function dd(a,b){0==b.length%12&&(a.q=new Float32Array(b),a.mode="pnct",a.K=12)}function ed(a,b){0==b.length%5&&(a.q=new Float32Array(b),a.mode="poi",a.K=5)}
function fd(a,b,c){a.J=new Uint16Array(b);a.ld=c;a.Bb=b.length;a.ra=i;switch(c){case "TRIANGLES":a.Bg=b.length/3;break;case "TRIANGLESTRIP":a.Bg=b.length-2}}s=L.prototype;s.Ub=ca("f");s.Ad=function(){this.V=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bufferData(this.b.ARRAY_BUFFER,this.q,this.b.STATIC_DRAW);this.rb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.rb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.J,this.b.STATIC_DRAW)};
s.j=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=m);this.rb&&(this.b.deleteBuffer(this.rb),this.rb=m);this.Yh?this.f.j():this.f=m;this.q=m;this.mode="";this.Bb=0;this.ld=this.J=m};
s.fa=function(a,b,c,d,e){if(this.ra){b=b||0;c=c||0;this.V==m&&this.Ad();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.rb);this.ia&&(this.c.mc(),this.pd.aa(this.ia,this.c.Ab),this.c.nc(this.pd));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,12,0);gd(this.c.Qa,this.c.ha,this.sd);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,o,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,o,32,24);var d=this.c.Qa,e=this.c.Kj,f=this.c.wg,g=this.c.uc;d.vb&&(d.b.useProgram(d.vb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.vb,"matModelView"),o,f.Ma()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.vb,"matProjection"),o,g.Ma()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.vb,"matNormal"),o,e.Ma()),d.b.uniform1i(d.b.getUniformLocation(d.vb,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,o,28,12);hd(this.c.Qa,this.c.ha);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,o,20,12);d=this.c.Qa;e=this.c.ha;d.fc&&(d.b.useProgram(d.fc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.fc,
"matMVP"),o,e.Ma()),d.b.uniform1i(d.b.getUniformLocation(d.fc,"uTexture"),0));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,o,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,o,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,o,48,40);d=this.c.Qa;e=this.c.ha;d.Lb&&(d.b.useProgram(d.Lb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Lb,
"matMVP"),o,e.Ma()));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,o,20,12);d==m&&(d=this.xl);e=this.c.Qa;f=this.c.ha;e.cc&&(e.b.useProgram(e.cc),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.cc,"matMVP"),o,f.Ma()),e.b.uniform4fv(e.b.getUniformLocation(e.cc,"uColor"),d.Ma()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,o,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,o,20,12);e==m&&(e=this.yl);d=this.c.Qa;f=this.c.ha;d.dc&&(d.b.useProgram(d.dc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.dc,"matMVP"),o,f.Ma()),d.b.uniform4fv(d.b.getUniformLocation(d.dc,"uColor"),e.Ma()));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,o,20,12);d=this.c.Qa;e=this.c.ha;f=this.c.Ab;
d.Mb&&(d.b.useProgram(d.Mb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Mb,"matM"),o,f.Ma()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Mb,"matMVP"),o,e.Ma()),d.b.uniform1i(d.b.getUniformLocation(d.Mb,"uTexture"),0));break;default:alert("unknown surface mode!!")}this.f&&(d=this.f,d.yb&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.f)));switch(this.ld){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.Bb,
this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.Bb,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.Bb,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.Bb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,
this.Bb,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.ia&&this.c.Yc();this.f&&(a=this.f,a.yb&&a.b.bindTexture(a.b.TEXTURE_2D,m));this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
s.Fc=function(a,b,c,d){d||(d=this);c&&(this.qc=c);b&&(this.fd=b);a.BoundingBox&&(d.O=a.BoundingBox[0],d.ga=a.BoundingBox[1]);a.Offset&&(d.na=a.Offset);a.CurtainIndex&&(d.lo=a.CurtainIndex);switch(a.VertexSemantic){case "p":d.$h=a.Vertices.length/3;$c(d,a.Vertices);d.mode="p";break;case "pnt":d.$h=a.Vertices.length/8;ad(d,a.Vertices);d.mode="pnt";break;case "pc":d.$h=a.Vertices.length/7;d.mode="pc";bd(d,a.Vertices);break;case "pt":d.$h=a.Vertices.length/5;d.mode="pt";cd(d,a.Vertices);break;case "pnct":d.$h=
a.Vertices.length/12;d.mode="p";dd(d,a.Vertices);break;default:alert("unknown surface mode!!")}fd(d,a.Indices,a.IndexSemantic);a.DiffuseMap&&(d.f=new M(d.c),d.f.repeat=i,O(d.f,a.DiffuseMap,function(){var a=d;a.yb=i;a.fd&&a.fd(a)},function(){var a=d;G(H("owg.Mesh"),"Downloading Error: Texture not found...");a.qc&&a.qc(a)},i),d.Yh=i);a.Center&&d.lh(a.Center[0],a.Center[1],a.Center[2]);d.Bb=a.Indices.length;d.Yh||(d.yb=i);d.ql&&d.ql();d.fd&&!d.Yh&&d.fd(d)};
function id(a,b,c,d){b==m?alert("invalid json-url"):(a.md=b,a.L=new window.XMLHttpRequest,a.L.open("GET",a.md,i),a.fd=c,a.qc=d,a.L.onreadystatechange=function(){if(4==a.L.readyState)if(404==a.L.status)a.qc&&a.qc(a);else{var b=Zc(a.L.responseText);a.Fc(b,m,m,a)}},a.L.send())}
s.zd=function(a,b,c,d,e,f){var g=o,j,k,l,n;k=j=0;l=1.0E20;for(var r=0;r<this.Bg;r++){var q=r;switch(this.ld){case "TRIANGLES":this.k.Af=this.q[this.J[3*q]*this.K];this.k.Bf=this.q[this.J[3*q]*this.K+1];this.k.Cf=this.q[this.J[3*q]*this.K+2];this.k.Df=this.q[this.J[3*q+1]*this.K];this.k.Ef=this.q[this.J[3*q+1]*this.K+1];this.k.Ff=this.q[this.J[3*q+1]*this.K+2];this.k.Rg=this.q[this.J[3*q+2]*this.K];this.k.Sg=this.q[this.J[3*q+2]*this.K+1];this.k.Tg=this.q[this.J[3*q+2]*this.K+2];break;case "TRIANGLESTRIP":0==
q%2?(this.k.Af=this.q[this.J[q]*this.K],this.k.Bf=this.q[this.J[q]*this.K+1],this.k.Cf=this.q[this.J[q]*this.K+2],this.k.Df=this.q[this.J[q+1]*this.K],this.k.Ef=this.q[this.J[q+1]*this.K+1],this.k.Ff=this.q[this.J[q+1]*this.K+2]):(this.k.Af=this.q[this.J[q+1]*this.K],this.k.Bf=this.q[this.J[q+1]*this.K+1],this.k.Cf=this.q[this.J[q+1]*this.K+2],this.k.Df=this.q[this.J[q]*this.K],this.k.Ef=this.q[this.J[q]*this.K+1],this.k.Ff=this.q[this.J[q]*this.K+2]);this.k.Rg=this.q[this.J[q+2]*this.K];this.k.Sg=
this.q[this.J[q+2]*this.K+1];this.k.Tg=this.q[this.J[q+2]*this.K+2];break;default:G(H("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.na&&(this.k.Af+=this.na[0],this.k.Bf+=this.na[1],this.k.Cf+=this.na[2],this.k.Df+=this.na[0],this.k.Ef+=this.na[1],this.k.Ff+=this.na[2],this.k.Rg+=this.na[0],this.k.Sg+=this.na[1],this.k.Tg+=this.na[2]);if(!(this.J[q]==this.J[q+1]||this.J[q]==this.J[q+2]||this.J[q+1]==this.J[q+2])){if(this.ia){q=new K;q.da(this.pd);
var u=new J;u.u(this.k.Af,this.k.Bf,this.k.Cf);var v=new J;v.u(this.k.Df,this.k.Ef,this.k.Ff);var y=new J;y.u(this.k.Rg,this.k.Sg,this.k.Tg);u=q.La(u);v=q.La(v);q=q.La(y);q=this.Fl.Fi(a,b,c,d,e,f,u.a[0],u.a[1],u.a[2],v.a[0],v.a[1],v.a[2],q.a[0],q.a[1],q.a[2])}else q=this.Fl.Fi(a,b,c,d,e,f,this.k.Af,this.k.Bf,this.k.Cf,this.k.Df,this.k.Ef,this.k.Ff,this.k.Rg,this.k.Sg,this.k.Tg);q&&(g=i,q.w<l&&0<q.w&&(l=q.w,j=q.Rb,k=q.Cc,n=r))}}return g?(a={},a.w=l,a.Rb=j,a.Cc=k,a.Gm=n,a):m};
function jd(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,l,n=0;n<a.q.length;n++)j=a.q[n*a.K],k=a.q[n*a.K+1],l=a.q[n*a.K+2],j>e&&(e=j),k>f&&(f=k),l>g&&(g=l),j<b&&(b=j),k<c&&(c=k),l<d&&(d=l);a.ia&&(n=new J(b,c,d),l=new J(e,c,d),j=new J(e,f,d),d=new J(b,f,d),k=new J(b,c,g),c=new J(b,f,g),e=new J(e,f,g),g=new J(b,f,g),b=a.ia.La(n),f=a.ia.La(l),j=a.ia.La(j),d=a.ia.La(d),k=a.ia.La(k),c=a.ia.La(c),l=a.ia.La(e),n=a.ia.La(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],l.a[0],n.a[0]],
g=[b.a[1],f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],l.a[1],n.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],l.a[2],n.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.na&&(b+=a.na[0],c+=a.na[1],d+=a.na[2],e+=a.na[0],f+=a.na[1],g+=a.na[2]);a.O===m&&(a.O=Array(3));a.ga===m&&(a.ga=Array(3));a.O[0]=b;a.O[1]=c;a.O[2]=d;a.ga[0]=e;a.ga[1]=f;a.ga[2]=g}
s.dl=function(a,b,c,d,e,f){return this.Ah.Pf(a,b,c,d,e,f,this.O[0],this.O[1],this.O[2],this.ga[0],this.ga[1],this.ga[2])};s.Yf=function(a,b,c,d,e,f){var g=this.c.eb.a,j=new K;this.cd[0]=a;this.cd[1]=b;this.cd[2]=c;this.bd[0]=d||0;this.bd[1]=e||0;this.bd[2]=f||0;j.xd([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.cd[0],this.cd[1],this.cd[2],1]);a=new K;a.$c(this.bd[0],this.bd[1],this.bd[2]);b=new K;b.aa(j,a);this.ia=b};
function kd(a){a.Yf(a.cd[0],a.cd[1],a.cd[2],a.bd[0],a.bd[1],a.bd[2])}
s.lh=function(a,b,c,d,e,f){var g=new Q(a,b,c),c=Array(3);g.ja(c);(new K).$c(c[0],c[1],c[2]);g=new K;g.Ud(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new K;b.xd(a);a=new K;a.wd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);c=new K;c.aa(b,a);b=new K;g=new K;a=new K;d?b.Ri(e*Math.PI/180):b.Ri(-1.57079633);e&&g.Qk(d*Math.PI/180+1.57079633);
f&&a.Rk(f*Math.PI/180);d=new K;d.aa(b,g);e=new K;e.aa(d,a);d=new K;d.aa(c,e);this.ia=d;jd(this)};s.da=function(a){this.Ub(a.f);this.q=a.q;this.mode=a.mode;this.K=a.K;this.J=a.J;this.ld=a.ld;this.Bb=a.Bb;this.ra=a.ra;this.Bg=a.Bg;this.V=a.V;this.rb=a.rb;this.ia=a.ia;this.ld=a.ld};x("Surface",L);L.prototype.Draw=L.prototype.fa;L.prototype.CopyFrom=L.prototype.da;L.prototype.SetAsBillboard=L.prototype.Yf;L.prototype.SetTexture=L.prototype.Ub;L.prototype.TestBoundingBoxIntersection=L.prototype.dl;
L.prototype.TestRayIntersection=L.prototype.zd;var R="art/";function M(a,b,c,d,e){this.c=a;this.b=a.b;this.f=m;this.Nh=this.yb=o;this.Va=m;this.height=this.width=0;this.Cl=this.Im=o;b&&ld(this,c||0,d||0,e||o);this.repeat=o}
function ld(a,b,c,d){md(a);a.Ob=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Ob);a.Ob.width=b;a.Ob.height=c;a.f=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.f);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Ob.width,a.Ob.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,m);a.di=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.di);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Ob.width,a.Ob.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.f,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.di);a.b.bindTexture(a.b.TEXTURE_2D,m);a.b.bindRenderbuffer(a.b.RENDERBUFFER,m);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
m);a.yb=i;a.Im=i;a.width=b;a.height=c}function md(a){a.Ob!=m&&(a.b.deleteRenderbuffer(a.di),a.di=m,a.b.deleteFramebuffer(a.Ob),a.Ob=m,a.b.deleteTexture(a.f),a.f=m,a.Va&&(a.Va.j(),a.Va=m))}
function O(a,b,c,d,e){a.Cl=w(e)?e:o;a.f=a.b.createTexture();var f=a.f,g=a.b;a.f.Kd=new Image;a.f.Kd.crossOrigin="anonymous";a.f.Kd.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.Cl);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Kd);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);a.repeat?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.REPEAT)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE));g.bindTexture(g.TEXTURE_2D,m);a.width=f.Kd.width;a.height=f.Kd.height;c!=m&&c(a);a.yb=i};a.f.Kd.onerror=function(){G(H("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Nh=i;d&&d(a)};a.f.Kd.src=b}s=M.prototype;
s.B=function(a,b,c,d,e,f,g,j,k,l){c=c||0;d=d||0;e=e||1;f=f||1;g=g||o;j=j||o;k=k||1;if(this.yb){var n=this.width,r=this.height,q=this.width/2,u=this.height/2;this.c.mc();this.c.Si();var d=I(d),v=new K;0<d?v.xd([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*q+Math.sin(d)*e*u+e*q+a,-Math.cos(d)*f*u-Math.sin(d)*f*q+f*u+b,c,1]):(v.$c(a,b,c),a=new K,a.wd(e,f,1),v.aa(v,a));this.c.nc(v);this.Va===m&&(this.Va=new L(this.c),j?ed(this.Va,[0,0,0,0,0,n,0,0,1,0,n,r,0,1,
1,0,r,0,0,1]):ed(this.Va,[0,0,0,0,1,n,0,0,1,1,n,r,0,1,0,0,r,0,0,0]),fd(this.Va,[0,1,2,0,2,3],"TRIANGLES"),this.Va.Ub(this));g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);1>k&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Va.fa(m,m,m,m,l);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.Yc()}};s.j=function(){this.f.Kd=m;this.c.b.deleteTexture(this.f);this.f=m;this.Nh=this.yb=o;this.Va&&(this.Va.j(),this.Va=m);md(this)};s.bg=function(){this.Im&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Ob),this.b.viewport(0,0,this.Ob.width,this.Ob.height))};s.el=function(){this.b.bindTexture(this.b.TEXTURE_2D,m);this.b.bindFramebuffer(this.b.FRAMEBUFFER,m);this.b.viewport(0,0,this.c.width,this.c.height)};
s.da=function(a){this.f=a.f;this.yb=a.yb;this.Nh=a.Nh;this.height=this.width=this.Va=a.Va};x("Texture",M);M.prototype.CopyFrom=M.prototype.da;M.prototype.Blit=M.prototype.B;M.prototype._EnableRenderToTexture=M.prototype.bg;M.prototype._DisableRenderToTexture=M.prototype.el;function Q(a,b,c){this.H=new Float32Array([a,b,c])}Q.prototype.u=function(a,b,c){this.H[0]=a;this.H[1]=b;this.H[2]=c};Q.prototype.ja=function(a){var b=Math.sin(I(this.H[1])),c=Math.cos(I(this.H[1])),d=Math.sin(I(this.H[0])),e=Fc/Math.sqrt(1-Gc*b*b);a[0]=(e+this.H[2])*c*Math.cos(I(this.H[0]));a[1]=(e+this.H[2])*c*d;a[2]=(0.993305620011365*e+this.H[2])*b;a[0]*=1.1920930376163766E-7;a[1]*=1.1920930376163766E-7;a[2]*=1.1920930376163766E-7};
Q.prototype.Hc=function(a,b,c){for(var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0,a=8388607*a,b=8388607*b,c=8388607*c,k=0;10>k;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=Fc/Math.sqrt(1-Gc*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Gc/(g+f));this.H[0]=Ic(d);this.H[1]=Ic(e);this.H[2]=f};Q.prototype.Se=function(){return" Longitude: "+this.H[0].toPrecision(17)+" Latitude: "+this.H[1].toPrecision(17)+" Elevation: "+this.H[2].toPrecision(17)};x("GeoCoord",Q);
Q.prototype.FromCartesian=Q.prototype.Hc;Q.prototype.ToCartesian=Q.prototype.ja;Q.prototype.ToString=Q.prototype.Se;function nd(a){this.c=a;this.b=a.b;this.ia=this.V=this.rd=m;this.pd=new K;this.Vj=[];this.ti=this.Cg=this.na=0}s=nd.prototype;s.oh=function(a){this.Cg+=a.length/7;0==this.ti&&(this.ti=70*this.Cg);this.rd=m;this.rd=new Float32Array(a);this.Ad()};s.j=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=m);this.V=this.rd=m};
s.lh=function(a,b,c){var d=new Q(a,b,c),c=Array(3);d.ja(c);(new K).$c(c[0],c[1],c[2]);d=new K;d.xk(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new K;b.xd(a);a=new K;a.wd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);c=new K;c.aa(b,a);a=new K;b=new K;b.aa(c,a);this.ia=b};
s.fa=function(){if(this.rd!=m){this.V||this.Ad();this.ia&&(this.c.mc(),this.pd.aa(this.ia,this.c.Ab),this.c.nc(this.pd));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,o,28,12);var a=new K;a.Le(this.c.ha);var b=this.c.Qa,c=this.c.ha;b.ec&&(b.b.useProgram(b.ec),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.ec,"matMVP"),o,c.Ma()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.ec,
"matInvMVP"),o,a.Ma()));this.b.drawArrays(this.b.POINTS,0,this.Cg);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.ia&&this.c.Yc()}};s.Ad=function(){this.V===m?(this.V=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bufferData(this.b.ARRAY_BUFFER,this.ti,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.rd)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.na,this.rd));this.na+=4*this.rd.length};function od(){}var pd=0;s=od.prototype;s.key=0;s.uf=o;s.pl=o;s.Nc=function(a,b,c,d,e,f){qa(a)?this.Hl=i:a&&a.handleEvent&&qa(a.handleEvent)?this.Hl=o:aa(Error("Invalid listener argument"));this.vg=a;this.nm=b;this.src=c;this.type=d;this.capture=!!e;this.Fj=f;this.pl=o;this.key=++pd;this.uf=o};s.handleEvent=function(a){return this.Hl?this.vg.call(this.Fj||this.src,a):this.vg.handleEvent.call(this.vg,a)};var qd=!Ab||Qb(),rd=!Ab||Qb(),sd=Ab&&!Ob("8");!Cb||Ob("528");Bb&&Ob("1.9b")||Ab&&Ob("8")||zb&&Ob("9.5")||Cb&&Ob("528");Bb&&!Ob("8")||Ab&&Ob("9");var td="dblclick",ud="mousedown",vd="mouseup",wd="mousemove",xd="keydown",yd="keyup";function zd(){}zd.prototype.Al=o;zd.prototype.ie=function(){this.Al||(this.Al=i,this.Lc())};zd.prototype.Lc=function(){this.wn&&Ad.apply(m,this.wn)};function Ad(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];la(d)?Ad.apply(m,d):d&&"function"==typeof d.ie&&d.ie()}};function Bd(a,b){this.type=a;this.currentTarget=this.target=b}za(Bd,zd);s=Bd.prototype;s.Lc=function(){delete this.type;delete this.target;delete this.currentTarget};s.ze=o;s.Jg=i;s.stopPropagation=function(){this.ze=i};s.preventDefault=function(){this.Jg=o};function Cd(a){Cd[" "](a);return a}Cd[" "]=p();function Dd(a,b){a&&this.Nc(a,b)}za(Dd,Bd);var Ed=0,Fd=1,Gd=2,Hd=[1,4,2];s=Dd.prototype;s.target=m;s.relatedTarget=m;s.offsetX=0;s.offsetY=0;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.button=0;s.keyCode=0;s.charCode=0;s.ctrlKey=o;s.altKey=o;s.shiftKey=o;s.metaKey=o;s.kd=m;
s.Nc=function(a,b){var c=this.type=a.type;Bd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Bb){var e;a:{try{Cd(d.nodeName);e=i;break a}catch(f){}e=o}e||(d=m)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Cb||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=Cb||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.kd=a;delete this.Jg;delete this.ze};function Id(a,b){return qd?a.kd.button==b:"click"==a.type?b==Ed:!!(a.kd.button&Hd[b])}
s.stopPropagation=function(){Dd.Ee.stopPropagation.call(this);this.kd.stopPropagation?this.kd.stopPropagation():this.kd.cancelBubble=i};s.preventDefault=function(){Dd.Ee.preventDefault.call(this);var a=this.kd;if(a.preventDefault)a.preventDefault();else if(a.returnValue=o,sd)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};s.Lc=function(){Dd.Ee.Lc.call(this);this.relatedTarget=this.currentTarget=this.target=this.kd=m};var Jd={},Kd={},Ld={},Md={};
function S(a,b,c,d,e){if(b){if(ka(b)){for(var f=0;f<b.length;f++)S(a,b[f],c,d,e);return m}var d=!!d,g=Kd;b in g||(g[b]={ta:0,gc:0});g=g[b];d in g||(g[d]={ta:0,gc:0},g.ta++);var g=g[d],j=sa(a),k;g.gc++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.vg==c&&g.Fj==e){if(g.uf)break;return k[f].key}}else k=g[j]=[],g.ta++;f=Nd();f.src=a;g=new od;g.Nc(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Jd[c]=g;Ld[j]||(Ld[j]=[]);Ld[j].push(g);a.addEventListener?(a==t||!a.wl)&&a.addEventListener(b,f,d):a.attachEvent(b in
Md?Md[b]:Md[b]="on"+b,f);return c}aa(Error("Invalid event type"))}function Nd(){var a=Od,b=rd?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function Pd(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)Pd(a,b[f],c,d,e);else{d=!!d;a:{f=Kd;if(b in f&&(f=f[b],d in f&&(f=f[d],a=sa(a),f[a]))){a=f[a];break a}a=m}if(a)for(f=0;f<a.length;f++)if(a[f].vg==c&&a[f].capture==d&&a[f].Fj==e){Qd(a[f].key);break}}}
function Qd(a){if(Jd[a]){var b=Jd[a];if(!b.uf){var c=b.src,d=b.type,e=b.nm,f=b.capture;c.removeEventListener?(c==t||!c.wl)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Md?Md[d]:Md[d]="on"+d,e);c=sa(c);e=Kd[d][f][c];if(Ld[c]){var g=Ld[c],j=Zb(g,b);0<=j&&Yb.splice.call(g,j,1);0==g.length&&delete Ld[c]}b.uf=i;e.fm=i;Rd(d,f,c,e);delete Jd[a]}}}
function Rd(a,b,c,d){if(!d.Xh&&d.fm){for(var e=0,f=0;e<d.length;e++)d[e].uf?d[e].nm.src=m:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.fm=o;0==f&&(delete Kd[a][b][c],Kd[a][b].ta--,0==Kd[a][b].ta&&(delete Kd[a][b],Kd[a].ta--),0==Kd[a].ta&&delete Kd[a])}}function Sd(a){var b,c=0,d=b==m;b=!!b;if(a==m)Rb(Ld,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Qd(f.key),c++}});else if(a=sa(a),Ld[a])for(var a=Ld[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Qd(f.key),c++}}
function Td(a,b,c,d,e){var f=1,b=sa(b);if(a[b]){a.gc--;a=a[b];a.Xh?a.Xh++:a.Xh=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.uf&&(f&=Ud(k,e)!==o)}}finally{a.Xh--,Rd(c,d,b,a)}}return Boolean(f)}function Ud(a,b){var c=a.handleEvent(b);a.pl&&Qd(a.key);return c}
function Od(a,b){if(!Jd[a])return i;var c=Jd[a],d=c.type,e=Kd;if(!(d in e))return i;var e=e[d],f,g;if(!rd){f=b||fa("window.event");var j=i in e,k=o in e;if(j){if(0>f.keyCode||f.returnValue!=h)return i;a:{var l=o;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(n){l=i}if(l||f.returnValue==h)f.returnValue=i}}l=new Dd;l.Nc(f,this);f=i;try{if(j){for(var r=[],q=l.currentTarget;q;q=q.parentNode)r.push(q);g=e[i];g.gc=g.ta;for(var u=r.length-1;!l.ze&&0<=u&&g.gc;u--)l.currentTarget=r[u],f&=Td(g,r[u],d,i,l);
if(k){g=e[o];g.gc=g.ta;for(u=0;!l.ze&&u<r.length&&g.gc;u++)l.currentTarget=r[u],f&=Td(g,r[u],d,o,l)}}else f=Ud(c,l)}finally{r&&(r.length=0),l.ie()}return f}d=new Dd(b,this);try{f=Ud(c,d)}finally{d.ie()}return f};function Vd(a,b){this.Nl=b;this.pg=[];a>this.Nl&&aa(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.pg.push(this.Ih())}za(Vd,zd);s=Vd.prototype;s.tl=m;s.zl=m;function Wd(a,b){a.pg.length<a.Nl?a.pg.push(b):a.pj(b)}s.Ih=function(){return this.tl?this.tl():{}};s.pj=function(a){if(this.zl)this.zl(a);else if(ra(a))if(qa(a.ie))a.ie();else for(var b in a)delete a[b]};s.Lc=function(){Vd.Ee.Lc.call(this);for(var a=this.pg;a.length;)this.pj(a.pop());delete this.pg};function Xd(){this.og=[];this.Sj=new hc;this.Cm=this.Dm=this.Em=this.um=0;this.Sc=new hc;this.rl=this.Bm=0;this.Kn=1;this.qj=new Vd(0,4E3);this.qj.Ih=function(){return new Yd};this.vm=new Vd(0,50);this.vm.Ih=function(){return new Zd};var a=this;this.Hj=new Vd(0,2E3);this.Hj.Ih=function(){return""+a.Kn++};this.Hj.pj=p()}function Zd(){this.ek=this.time=this.count=0}
Zd.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.ek&&a.push(" [VarAlloc = ",this.ek,"]");return a.join("")};function Yd(){}function $d(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(ae(a.Bl-c));e.push(" ",be(a.Bl-b));0==a.rj?e.push(" Start        "):1==a.rj?(e.push(" Done "),e.push(ae(a.zo-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.Zn&&e.push("[VarAlloc ",a.Zn,"] ");return e.join("")}
Yd.prototype.toString=function(){return this.type==m?this.sn:"["+this.type+"] "+this.sn};Xd.prototype.reset=function(){for(var a=0;a<this.og.length;a++){var b=this.qj.id;b&&Wd(this.Hj,b);Wd(this.qj,this.og[a])}this.og.length=0;this.Sj.clear();this.um=ya();this.rl=this.Bm=this.Cm=this.Dm=this.Em=0;b=this.Sc.Rh();for(a=0;a<b.length;a++){var c=this.Sc.get(b[a]);c.count=0;c.time=0;c.ek=0;Wd(this.vm,c)}this.Sc.clear()};
Xd.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.og.length;d++){var e=this.og[d];1==e.rj&&c.pop();a.push(" ",$d(e,this.um,b,c.join("")));b=e.Bl;a.push("\n");0==e.rj&&c.push("|  ")}if(0!=this.Sj.je()){var f=ya();a.push(" Unstopped timers:\n");gc(this.Sj,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",be(b.startTime),")\n")})}b=this.Sc.Rh();for(d=0;d<b.length;d++)c=this.Sc.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Bm,"\n","Total comments created ",
this.rl,"\n","Overhead start: ",this.Em," ms\n","Overhead end: ",this.Dm," ms\n","Overhead comment: ",this.Cm," ms\n");return a.join("")};function ae(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function be(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new Xd;var ce=0;function de(){ce++;this.Wc=p();this.Xc=p();this.Vc=p();this.Oe=p();this.Ne=p();this.Pe=p();this.Qe=p();this.c=m}function ee(a){a.Pe(a.c.X);a.Oe()}de.prototype.vd=function(){this.Ne()};function fe(){}za(fe,zd);s=fe.prototype;s.wl=i;s.Tj=m;s.addEventListener=function(a,b,c,d){S(this,a,b,c,d)};s.removeEventListener=function(a,b,c,d){Pd(this,a,b,c,d)};
s.dispatchEvent=function(a){var b=a.type||a,c=Kd;if(b in c){if(pa(a))a=new Bd(a,this);else if(a instanceof Bd)a.target=a.target||this;else{var d=a,a=new Bd(b,this);Ub(a,d)}var d=1,e,c=c[b],b=i in c,f;if(b){e=[];for(f=this;f;f=f.Tj)e.push(f);f=c[i];f.gc=f.ta;for(var g=e.length-1;!a.ze&&0<=g&&f.gc;g--)a.currentTarget=e[g],d&=Td(f,e[g],a.type,i,a)&&a.Jg!=o}if(o in c)if(f=c[o],f.gc=f.ta,b)for(g=0;!a.ze&&g<e.length&&f.gc;g++)a.currentTarget=e[g],d&=Td(f,e[g],a.type,o,a)&&a.Jg!=o;else for(e=this;!a.ze&&
e&&f.gc;e=e.Tj)a.currentTarget=e,d&=Td(f,e,a.type,o,a)&&a.Jg!=o;a=Boolean(d)}else a=i;return a};s.Lc=function(){fe.Ee.Lc.call(this);Sd(this);this.Tj=m};function ge(){this.gi=this.qi=this.oi=this.pi=this.ni=this.li=this.mi=this.ki=this.ii=this.ji=this.hi=this.yf=this.zf=this.He=this.xf=this.Hh=this.Gh=m;this.Pj=this.Oj=0;this.Fb=o;this.elevation=this.latitude=this.longitude=this.Ka=0;this.Rc=-1;this.Ga=this.Pa=0;this.R=he;this.hf=0;this.sc=48;this.Pb=this.fi=this.Dc=this.hb=this.Hf=this.cb=this.sb=this.Ha=0;this.ml=o;this.vl=this.ul=0;this.Th=new Yc(0.7,0.9,1,1);this.Vc=p();this.Db=function(a){for(;360<a;)a-=360;for(;0>a;)a+=360;return a};this.Wc=
function(){if(0==this.Rc)this.Fb&&(this.Hh.B(this.Oj-64,this.Pj-64,0,this.Ka,1,1,i,o),this.Gh.B(this.Oj-64,this.Pj-64,0,0,1,1,i,o)),this.c.ud("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(1==this.Rc){this.ml&&this.gi.B(this.ul-16,this.vl-16,0,0,1,1,i,o,0.75);var a=this.c.width-1-64-this.hf,b=this.c.height-1-this.sc,c=this.Db(this.Hf+this.fi);this.R==ie?this.yf.B(a-64,b-64,0,c,1,1,i,o,1,this.Th):this.R==je?this.yf.B(a-
64,b-64,0,c,1,1,i,o,1,this.Th):this.yf.B(a-64,b-64,0,c,1,1,i,o);this.R==ke?(this.zf.B(a-32,b-32,0,0,1,1,i,o),this.He.B(a-32,b-32,0,this.cb,1,1,i,o,0.5)):this.R==le?(this.zf.B(a-32,b-32,0,0,1,1,i,o),this.He.B(a-32,b-32,0,this.cb,1,1,i,o,0.5)):this.zf.B(a-32,b-32,0,0,1,1,i,o);b=this.c.height-1-82-this.sc;this.R==me?(this.xf.B(a-32,b-32,0,0,1,1,i),this.He.B(a-32,b-32,0,this.Ha,1,1,i,o,0.5)):this.R==ne?(this.xf.B(a-32,b-32,0,0,1,1,i),this.He.B(a-32,b-32,0,this.Ha,1,1,i,o,0.5)):this.xf.B(a-32,b-32,0,0,
1,1,i,o);b=this.c.height-1-82-128-this.sc;this.qi.B(a-8,b-64,0,0,1,1,i,o);b=this.c.height-1-82-64-this.sc;this.R==oe?this.mi.B(a-16,b-16,0,0,1,1,i,o):this.R==pe?this.li.B(a-16,b-16,0,0,1,1,i,o):this.ki.B(a-16,b-16,0,0,1,1,i,o);b=this.c.height-1-82-128-64-this.sc;this.R==qe?this.ji.B(a-16,b-16,0,0,1,1,i,o):this.R==re?this.ii.B(a-16,b-16,0,0,1,1,i,o):this.hi.B(a-16,b-16,0,0,1,1,i,o);b=this.c.height-1-82-128-this.Pb-this.sc;this.R==se?this.pi.B(a-16,b-16,0,0,1,1,i,o):this.R==te?this.oi.B(a-16,b-16,0,
0,1,1,i,o):this.ni.B(a-16,b-16,0,0,1,1,i,o)}};this.Xc=function(a){this.Rc=a.Rc;this.Ka=57.29577951308232*a.sl;this.longitude=a.Zb.longitude;this.latitude=a.Zb.latitude;this.elevation=a.Zb.elevation;this.ml=a.bf;this.ul=a.rc[0];this.vl=this.c.height-a.rc[1]-1;this.R!=ie&&(this.fi=this.Ka,this.Hf=0);this.R==pe?(a.$a=Rc,a.Da=1):this.R==re?(a.$a=Sc,a.Da=1):this.R==te?0<this.Pb?(a.$a=Sc,a.Da=Math.sqrt(this.Pb)/4):0>this.Pb&&(a.Da=Math.sqrt(-this.Pb)/4,a.$a=Rc):this.R==ne?(a.$a=Tc,a.Da=this.sb):this.R==
ie?(a.$a=Uc,a.Da=this.fi+this.Hf,a.Da=this.Db(a.Da),a.Da*=Math.PI/180):this.R==ke?(a.$a=Vc,a.Da=Math.PI*this.cb/180):a.$a=Qc;a.em=this.R==he?0:1};this.Oe=function(){this.Gh=new M(this.c);O(this.Gh,R+"flightnavigation/cmpbg.png");this.Hh=new M(this.c);O(this.Hh,R+"flightnavigation/cmpr.png");this.xf=new M(this.c);O(this.xf,R+"globenavigation/MoveWheel.png");this.zf=new M(this.c);O(this.zf,R+"globenavigation/YawPitchWheel.png");this.yf=new M(this.c);O(this.yf,R+"globenavigation/yaw_pitch_adjust.png");
this.He=new M(this.c);O(this.He,R+"globenavigation/movewheel_marker.png",m,m,i);this.hi=new M(this.c);O(this.hi,R+"globenavigation/minus.png");this.ji=new M(this.c);O(this.ji,R+"globenavigation/minus_over.png");this.ii=new M(this.c);O(this.ii,R+"globenavigation/minus_clicked.png");this.ki=new M(this.c);O(this.ki,R+"globenavigation/plus.png");this.mi=new M(this.c);O(this.mi,R+"globenavigation/plus_over.png");this.li=new M(this.c);O(this.li,R+"globenavigation/plus_clicked.png");this.ni=new M(this.c);
O(this.ni,R+"globenavigation/slider.png");this.pi=new M(this.c);O(this.pi,R+"globenavigation/slider_over.png");this.oi=new M(this.c);O(this.oi,R+"globenavigation/slider_clicked.png");this.qi=new M(this.c);O(this.qi,R+"globenavigation/slider_rail.png");this.gi=new M(this.c);O(this.gi,R+"globenavigation/crosshair.png")};this.Ne=function(){this.Gh.j();this.Hh.j();this.xf.j();this.zf.j();this.yf.j();this.He.j();this.hi.j();this.ji.j();this.ii.j();this.ki.j();this.mi.j();this.li.j();this.ni.j();this.pi.j();
this.oi.j();this.qi.j();this.gi.j()};this.Pe=function(a){S(a,ud,this.Rf,o,this);S(a,vd,this.Tf,o,this);S(a,wd,this.Sf,o,this);S(a,td,this.Mi,o,this)};this.Rf=function(a){if(Id(a,Ed)){var b=a.offsetX-this.c.X.offsetLeft,a=a.offsetY-this.c.X.offsetTop;this.Oj=b;this.Pj=this.c.height-a-1;this.Pa=b;this.Ga=this.c.height-a-1;this.Fb=i;1==this.Rc&&this.Ei(0)}};this.Tf=function(a){if(Id(a,Ed)){var b=a.offsetY-this.c.X.offsetTop;this.Pa=a.offsetX-this.c.X.offsetLeft;this.Ga=this.c.height-b-1;this.Fb=o;1==
this.Rc&&this.Ei(0);this.Pb=0}};this.Sf=function(a){var b=a.offsetY-this.c.X.offsetTop,c=this.c.height-b-1-this.Ga;this.Pa=a.offsetX-this.c.X.offsetLeft;this.Ga=this.c.height-b-1;1==this.Rc&&this.Ei(c)};this.Mi=function(){this.R==je&&ue(this.c.Wa,this.longitude,this.latitude,this.elevation,0,-90,0)};this.Ei=function(a){var b=this.c.width-1-64-this.hf-8,c=this.c.height-1-82-64-this.sc+8,d=this.c.width-1-64-this.hf-8,e=this.c.height-1-82-128-64-this.sc+8,f=this.c.width-1-64-this.hf-8,g=this.c.height-
1-82-128-this.Pb-this.sc+8,j=this.c.width-1-64-this.hf,k=this.c.height-1-82-this.sc,l=Math.abs(this.Pa-j),n=Math.abs(this.Ga-k),r=this.c.width-1-64-this.hf,q=this.c.height-1-this.sc,u=Math.abs(this.Pa-r),u=u*u,v=Math.abs(this.Ga-q),v=v*v;this.Fb&&this.R==te?(this.Pb-=a,-40>this.Pb?this.Pb=-40:40<this.Pb&&(this.Pb=40)):this.Fb&&this.R==ne?(a=this.Pa-j,k=this.Ga-k,this.sb=this.Ha=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k?this.Ha=360-this.Ha:this.sb=360-this.sb,this.Ha+=90,this.sb+=90,this.Ha=this.Db(this.Ha),
this.sb=this.Db(this.sb)):this.Fb&&this.R==ie?(a=this.Pa-r,k=this.Ga-q,this.hb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.hb=360-this.hb),this.hb-=90,this.hb=this.Db(this.hb),this.Hf=this.Db(this.hb-this.Dc)):this.Fb&&this.R==ke?(a=this.Pa-r,k=this.Ga-q,this.cb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.cb=360-this.cb),this.cb+=90,this.cb=this.Db(this.cb)):(this.R=0,this.Pa>b&&this.Ga>c-16&&this.Pa<b+16&&this.Ga<c&&(this.R=this.Fb?pe:oe),this.Pa>d&&this.Ga>e-16&&this.Pa<d+16&&this.Ga<
e&&(this.R=this.Fb?re:qe),this.Pa>f&&this.Ga>g-16&&this.Pa<f+16&&this.Ga<g&&(this.R=this.Fb?te:se),729>=l*l+n*n?this.Fb?this.R=ne:(this.R=me,a=this.Pa-j,k=this.Ga-k,this.sb=this.Ha=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k?this.Ha=360-this.Ha:this.sb=360-this.sb,this.Ha+=90,this.sb+=90,this.Ha=this.Db(this.Ha),this.sb=this.Db(this.sb)):this.Ha=0,625>=u+v)?(this.R=this.Fb?ke:le,a=this.Pa-r,k=this.Ga-q,this.cb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.cb=360-this.cb),this.cb+=90,this.cb=this.Db(this.cb)):
1600>=u+v&&(this.Fb?(this.R=ie,a=this.Pa-r,k=this.Ga-q,this.hb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.hb=360-this.hb),this.hb-=90,this.hb=this.Db(this.hb),this.Hf=this.Db(this.hb-this.Dc),this.fi=this.Ka):(this.R=je,a=this.Pa-r,k=this.Ga-q,this.Dc=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.Dc=360-this.Dc),this.Dc-=90,this.Dc-=this.Hf,this.Dc=this.Db(this.Dc)))}}var he=0,oe=1,pe=2,qe=3,re=4,se=5,te=6,me=7,ne=8,je=9,ie=10,le=11,ke=12;ge.prototype=new de;function ve(){this.name="ogAoeImage";this.type=Ya;this.wa=-1;this.F=o;this.options=m;this.ne=-1;this.oe=-180;this.me=-90;this.lf=180;this.kf=90;this.yb=o;this.f=m;this.nf=[];this.ff=[]}ve.prototype=new E;s=ve.prototype;s.ya=function(a){this.options=a;this.oe=a.longitude0;this.me=a.latitude0;this.lf=a.longitude1;this.kf=a.latitude1;this.Gn=a.url;a=this.parent.parent.c;new M(a,i,256,256);this.f=new M(a);this.f.parent=this;O(this.f,this.Gn,we,xe,i);this.wa=ye(this).vi(this)};s.Na=function(){ye(this).Oi(this.wa)};
function ye(a){var b=m,a=a.parent.parent.c;a.g&&a.g.G&&(b=a.g.G.fj);return b}s.$=p();s.ba=p();
s.Ta=function(){var a=this.parent.parent.c;if(this.yb!=o){var b=a.g.G.Oa.C.length,c,d,e,f,g=m;this.ff=m;this.ff=[];for(var j=0;j<b;j++)if(g=a.g.G.Oa.C[j],!(1>g.i.length)&&!g.oo&&(c=g.oe,d=g.me,e=g.lf,f=g.kf,!(this.oe>e|this.lf<c|this.me>f|this.kf<d)&&(this.ff[g.i]=this.nf[g.i],!this.nf[g.i]))){var k=new L(g.c);k.da(g.o);var l=g.f,n=new M(g.c,i,256,256),r=n;a.Zd.push(r);r.bg();l.B(0,0,0,0,1,1,i,i,1);this.f.B(256*(this.oe-c)/(e-c),256*(this.me-d)/(f-d),0,0,(this.lf-this.oe)/this.f.width/((e-c)/256),
(this.kf-this.me)/this.f.height/((f-d)/256),i,i,1);ze(a);k.Ub(n);k.ao=g.oa[0];k.bo=g.oa[1];k.co=g.oa[2];this.nf[g.i]=k;this.ff[g.i]=k}}for(var q in this.ff)a=this.ff[q],b=new K,b.da(a.c.Ab),b.a[12]+=a.ao,b.a[13]+=a.bo,b.a[14]+=a.co,a.c.mc(),a.c.nc(b),a.fa(),a.c.Yc()};function we(a){a.parent.yb=i;a.Q&&a.Q(a.i,a,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}function xe(a){a.P&&a.P(a.i,a.caller,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m};function Ae(a){this.c=a;this.fg=[]}Ae.prototype.Ta=function(){for(var a=0;a<this.fg.length;a++)this.fg[a].Ta()};Ae.prototype.vi=function(a){this.fg.push(a);return this.fg.length-1};Ae.prototype.Oi=function(a){this.fg.splice(a,1)};function Be(a){this.c=a;this.Aa=[];this.Id=new Ce}Be.prototype.Ta=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Id.th(b);for(var k=0;k<this.Aa.length;k++){var l=this.Aa[k];l.F||(this.Id.sh(l.we,l.xe,l.ye,l.we+0.0010,l.xe+0.0010,l.ye+0.0010),f=l.we-c,g=l.xe-d,j=l.ye-e,f=f*f+g*g+j*j,g=l.ik*l.ik,l.hk*l.hk>f&&g<f&&l.fa())}};Be.prototype.Wf=function(a,b){for(var c=0;c<this.Aa.length;c++)if(this.Aa[c].Uf(a,b))return this.Aa[c];return m};function De(a){this.c=a;this.Ca=[]}De.prototype.Ta=function(){for(var a=0;a<this.Ca.length;a++){var b=this.Ca[a];b.F||b.fa()}};De.prototype.wi=function(a){this.Ca.push(a)};De.prototype.Pi=function(a){for(var b=0;b<this.Ca.length;b++)if(this.Ca[b]==a){this.Ca.splice(b,1);break}};De.prototype.Vf=function(a,b){for(var c=0;c<this.Ca.length;c++){var d=this.Ca[c].Uf(a,b);if(d)return d}return m};function Ee(){this.n=this.y=this.x=0}function Ce(){this.D=Array(6);this.D[0]=new Fe;this.D[1]=new Fe;this.D[2]=new Fe;this.D[3]=new Fe;this.D[4]=new Fe;this.D[5]=new Fe;this.M=Array(8);this.M[0]=new Ee;this.M[1]=new Ee;this.M[2]=new Ee;this.M[3]=new Ee;this.M[4]=new Ee;this.M[5]=new Ee;this.M[6]=new Ee;this.M[7]=new Ee}function Fe(){this.xc=this.wc=this.vc=this.Uc=0}
Fe.prototype.lc=function(){var a=Math.sqrt(this.vc*this.vc+this.wc*this.wc+this.xc*this.xc);this.vc/=a;this.wc/=a;this.xc/=a;this.Uc/=a};
Ce.prototype.sh=function(a,b,c,d,e,f){this.M[0].x=a;this.M[0].y=b;this.M[0].n=c;this.M[1].x=d;this.M[1].y=b;this.M[1].n=c;this.M[2].x=d;this.M[2].y=e;this.M[2].n=c;this.M[3].x=a;this.M[3].y=e;this.M[3].n=c;this.M[4].x=a;this.M[4].y=b;this.M[4].n=f;this.M[5].x=a;this.M[5].y=e;this.M[5].n=f;this.M[6].x=d;this.M[6].y=e;this.M[6].n=f;this.M[7].x=d;this.M[7].y=b;this.M[7].n=f;for(a=0;6>a;a++){b=8;for(c=0;8>c;c++)0>this.D[a].vc*this.M[c].x+this.D[a].wc*this.M[c].y+this.D[a].xc*this.M[c].n+this.D[a].Uc&&
--b;if(0==b)return o}return i};
Ce.prototype.th=function(a){this.fb=a.a;this.Tl=this.fb[0];this.Xl=this.fb[1];this.am=this.fb[2];this.of=this.fb[3];this.Ul=this.fb[4];this.Yl=this.fb[5];this.bm=this.fb[6];this.pf=this.fb[7];this.Vl=this.fb[8];this.Zl=this.fb[9];this.cm=this.fb[10];this.qf=this.fb[11];this.Wl=this.fb[12];this.$l=this.fb[13];this.dm=this.fb[14];this.rf=this.fb[15];this.D[0].vc=this.of+this.Tl;this.D[0].wc=this.pf+this.Ul;this.D[0].xc=this.qf+this.Vl;this.D[0].Uc=this.rf+this.Wl;this.D[0].lc();this.D[1].vc=this.of-
this.Tl;this.D[1].wc=this.pf-this.Ul;this.D[1].xc=this.qf-this.Vl;this.D[1].Uc=this.rf-this.Wl;this.D[1].lc();this.D[2].vc=this.of-this.Xl;this.D[2].wc=this.pf-this.Yl;this.D[2].xc=this.qf-this.Zl;this.D[2].Uc=this.rf-this.$l;this.D[2].lc();this.D[3].vc=this.of+this.Xl;this.D[3].wc=this.pf+this.Yl;this.D[3].xc=this.qf+this.Zl;this.D[3].Uc=this.rf+this.$l;this.D[3].lc();this.D[4].vc=this.of+this.am;this.D[4].wc=this.pf+this.bm;this.D[4].xc=this.qf+this.cm;this.D[4].Uc=this.rf+this.dm;this.D[4].lc();
this.D[5].vc=this.of-this.am;this.D[5].wc=this.pf-this.bm;this.D[5].xc=this.qf-this.cm;this.D[5].Uc=this.rf-this.dm;this.D[5].lc()};x("ViewFrustum",Ce);Ce.prototype.TestBox=Ce.prototype.sh;Ce.prototype.Update=Ce.prototype.th;function Ge(){this.gg=this.hg=o;this.version=this.Od=this.Be=this.Za=this.Sa=m}
Ge.prototype.Mf=function(a){this.L=new XMLHttpRequest;this.L.open("GET",a,i);var b=this;this.L.onreadystatechange=function(){a:if(4==b.L.readyState)if(200==b.L.status){var a=b.L.responseText,d;try{d=Zc(a)}catch(e){alert(e);break a}d.extent?(b.version=1,b.yo=d.name,b.Za=d.maxlod,b.In=256,a=d.extent,b.Sa=a,b.$n=[b.Za,a[0],a[1],a[2],a[3]],"image"==d.type?"png"==d.format?(b.Be="image/png",b.Od=".png"):"jpg"==d.format?(b.Be="image/jpg",b.Od=".jpg"):b.Be="image/png":"elevation"==d.type&&(b.Od=".json")):
(b.version=0,b.xo=d.layer,b.wo=d.copyright,b.so=d.srs,b.Sa=d.boundingbox,b.Za=d.levelofdetail,b.ro=d.imagewidth,b.qo=d.imageheight,b.In=d.tilesize,b.Bo=d.tilelayout,b.Be=d.tileformat,b.$n=d.bounds,b.Ao=d.center,"image/png"==b.Be?b.Od=".png":"image/jpg"==b.Be?b.Od=".jpg":"elevation/json"==b.Be&&(b.Od=".json"));b.hg=i}else G(H("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.gg=i};this.L.send()};x("DatasetInfo",Ge);Ge.prototype.Download=Ge.prototype.Mf;function He(){}He.prototype.Xf=function(a,b){this.Pk(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};He.prototype.Pk=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
He.prototype.Jc=function(a,b){b.x=0;b.y=0;b.$b=a.length;for(var c,d=b.$b;0<d;d--)switch(c=1<<d-1,a[b.$b-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};x("MercatorQuadtree",He);He.prototype.QuadKeyToMercatorCoord=He.prototype.Xf;He.prototype.QuadKeyToNormalizedCoord=He.prototype.Pk;He.prototype.QuadKeyToTileCoord=He.prototype.Jc;var Ie={Ji:function(a){for(var b="",c=0;c<a.length;c++)0==c%2&&0<c&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};x("GlobeUtils",Ie);x("GlobeUtils.MakeHierarchicalFilename",Ie.Ji);function Je(){this.ra=ea(o);this.Gc=ea(o);this.Tb=p();this.Sb=ea(0);this.Je=this.Ke=-1;this.Ec=ea(o)};function Ke(){this.t=new Ge;this.m=this.vf=m;this.ka=new He;this.coords=Array(4);this.td=1;this.ra=function(){return this.t.hg};this.Gc=function(){return this.t.gg};this.Tb=function(a,b,c,d,e,f){if(this.ra()){var g=this.vf+"/"+this.m+"/"+Ie.Ji(b+this.t.Od),a=new M(a);a.i=b;a.m=c;a.Q=d;a.P=e;a.caller=f;a.td=this.td;O(a,g,Le,Me,i)}};this.Sb=function(){return this.t.Za?this.t.Za:0};this.Ec=function(a){if(a.length>this.t.Za)return o;this.ka.Xf(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.t.Sa[0],f=this.t.Sa[1],g=this.t.Sa[2],j=this.t.Sa[3];return d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e?o:i};this.ib=function(a,b,c){this.td=c==m?1:c;this.vf=a;this.m=b;this.t.Mf(a+"/"+b+".json")}}Ke.prototype=new Je;function Le(a){a.Q(a.i,a,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}function Me(a){a.P(a.i,a.caller,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}x("i3dImageLayer",Ke);Ke.prototype.Failed=Ke.prototype.Gc;Ke.prototype.Ready=Ke.prototype.ra;Ke.prototype.RequestTile=Ke.prototype.Tb;
Ke.prototype.Setup=Ke.prototype.ib;function Ne(){this.m=this.bb=m;this.ka=new He;this.ma=0;this.ra=ea(i);this.Gc=ea(o);this.Tb=function(a,b,c,d,e,f){var g={};this.ka.Jc(b,g);g=this.bb[this.ma]+"/"+g.$b+"/"+g.x+"/"+g.y+".png";a=new M(a);a.i=b;a.m=c;a.Q=d;a.P=e;a.caller=f;O(a,g,Oe,Pe,i);this.ma++;this.ma>=this.bb.length&&(this.ma=0)};this.Sb=ea(16);this.Ec=function(a){return 17>a.length?i:o};this.ib=ca("bb")}Ne.prototype=new Je;function Oe(a){a.Q(a.i,a,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}
function Pe(a){a.P(a.i,a.caller,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m};function Qe(){this.ra=ea(o);this.Gc=ea(o);this.Tb=p();this.Sb=ea(0);this.Ec=ea(o)};function Re(){this.t=new Ge;this.m=this.vf=m;this.ka=new He;this.coords=Array(4);this.ra=function(){return this.t.hg};this.Gc=function(){return this.t.gg};this.Tb=function(a,b,c,d,e,f){if(this.ra()){var g=this.vf+"/"+this.m+"_JSON/"+(Ie.Ji(b+".jso")+"n"),a=new L(a);a.i=b;a.m=c;a.Q=d;a.P=e;a.caller=f;id(a,g,Se,Te)}};this.Sb=function(){return this.t.Za?this.t.Za:0};this.Ec=function(a){if(a.length>this.t.Za)return o;this.ka.Xf(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],d=this.coords[3],
e=this.t.Sa[0],f=this.t.Sa[1],g=this.t.Sa[2],j=this.t.Sa[3];return d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e?o:i};this.ib=function(a,b){this.vf=a;this.m=b;this.t.Mf(a+"/"+b+".json")}}Re.prototype=new Qe;function Se(a){a.Q(a.i,a,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}function Te(a){a.P(a.i,a.caller,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m};function Ue(){this.m=this.bb=m;this.ka=new He;this.ma=0;this.ra=ea(i);this.Gc=ea(o);this.Tb=function(a,b,c,d,e,f){var g={};this.ka.Jc(b,g);var j=Math.pow(2,g.$b),g=this.bb[this.ma]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.$b)+"&key=[KEY]",a=new M(a);a.i=b;a.m=c;a.Q=d;a.P=e;a.caller=f;O(a,g,Ve,We,i);this.ma++;this.ma>=this.bb.length&&(this.ma=0)};this.Sb=ea(16);this.Ec=function(a){return 17>a.length?i:o};this.ib=ca("bb")}Ne.prototype=new Je;
function Ve(a){a.Q(a.i,a,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}function We(a){a.P(a.i,a.caller,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m};function Xe(){this.t=new Ge;this.m=this.vf=m;this.ka=new He;this.coords=Array(4);this.ma=0;this.ra=function(){return this.t.hg};this.Gc=function(){return this.t.gg};this.Tb=function(a,b,c,d,e,f){if(this.ra()){var g={};this.ka.Jc(b,g);g=this.bb[this.ma]+"/"+this.m+"/tiles/"+g.$b+"/"+g.x+"/"+g.y+".json";a=new L(a);a.i=b;a.m=c;a.Q=d;a.P=e;a.caller=f;id(a,g,Ye,Ze);this.ma++;this.ma>=this.bb.length&&(this.ma=0)}};this.Sb=function(){return this.t.Za?this.t.Za:0};this.Ec=function(a){if(a.length>this.t.Za)return o;
for(var b=a,c=a,d=0;d<this.t.Za-a.length;d++)b+="0",c+="3";d={};this.ka.Jc(b,d);b=d.x;a=d.y;this.ka.Jc(c,d);var c=d.x,d=d.y,e=this.t.Sa[0],f=this.t.Sa[1],g=this.t.Sa[3];return!(b>this.t.Sa[2]||c<e||a>g||d<f)};this.ib=function(a,b){this.bb=a;this.m=b;this.t.Mf(a[0]+"/"+b+"/layersettings.json")}}Xe.prototype=new Qe;function Ye(a){a.Q(a.i,a,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}function Ze(a){a.P(a.i,a.caller,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m};function $e(){this.m=this.bb=m;this.ka=new He;this.sub=this.ma=0;this.Yn="Galile,Galil,Gali,Gal,Ga,G".split(",");this.ra=ea(i);this.Gc=ea(o);this.Tb=function(a,b,c,d,e,f){var g={};this.ka.Jc(b,g);g=this.bb[this.ma]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.$b+"&s="+this.Yn[this.sub];this.sub++;5==this.sub&&(this.sub=0);a=new M(a);a.i=b;a.m=c;a.Q=d;a.P=e;a.caller=f;O(a,g,Oe,Pe,i);this.ma++;this.ma>=this.bb.length&&(this.ma=0)};this.Sb=ea(19);this.Ec=function(a){return 20>a.length?i:o};this.ib=ca("bb")}
$e.prototype=new Ne;function af(a,b){this.qe=a||-1;this.tn=b||o;this.Md={};this.ta=0;this.om=Math.round(0.75*this.qe);this.Sc={};this.Sc.hits=0;this.Sc.misses=0;bf(this,"Initialized cache with size "+a)}af.prototype.getItem=function(a){var b=this.Md[a];b!=m&&(cf(b)?(df(this,a),b=m):b.Wh=(new Date).getTime());(b=b?b.value:m)?(this.Sc.hits++,bf(this,"Cache HIT for key "+a)):(this.Sc.misses++,bf(this,"Cache MISS for key "+a));return b};
af.prototype.setItem=function(a,b,c){this.Md[a]!=m&&df(this,a);ef(this,new function(a,b,c){(a==m||""==a)&&aa(Error("key cannot be null or empty"));this.key=a;this.value=b;c==m&&(c={});c.Mh!=m&&(c.Mh=c.Mh.getTime());c.Ig==m&&(c.Ig=2);this.options=c;this.Wh=(new Date).getTime()}(a,b,c));bf(this,"Setting key "+a);if(0<this.qe&&this.ta>this.qe){var d=this;setTimeout(function(){d.Rn.call(d)},0)}};af.prototype.clear=function(){for(var a in this.Md)df(this,a);bf(this,"Cache cleared")};
af.prototype.Rn=function(){var a=[],b;for(b in this.Md){var c=this.Md[b];cf(c)?df(this,b):a.push(c)}if(a.length>this.om)for(a=a.sort(function(a,b){return a.options.Ig!=b.options.Ig?b.options.Ig-a.options.Ig:b.Wh-a.Wh});a.length>this.om;)df(this,a.pop().key);bf(this,"Purged cached")};function ef(a,b){a.Md[b.key]=b;a.ta++}
function df(a,b){var c=a.Md[b];delete a.Md[b];a.ta--;bf(a,"removed key "+b);c.options.pn!=m&&setTimeout(function(){c.options.pn.call(m,c.key,c.value)},0);c.j!=m&&setTimeout(function(){c.j()},0)}function cf(a){var b=(new Date).getTime(),c=o;a.options.Mh&&a.options.Mh<b&&(c=i);!c&&a.options.An&&a.Wh+1E3*a.options.An<b&&(c=i);return c}function bf(a,b){a.tn&&H("owg.Cache").info(b)};function ff(a,b,c){a=I(a)-0;b=Math.log(Math.tan(Math.PI/4+I(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function gf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Ic(b);for(a=Ic(a/1+0);180<a;)a-=180;for(;-180>a;)a+=180;for(;90<b;)b-=180;for(;-90>b;)b+=180;c[0]=a;c[1]=b};function hf(a,b,c){this.c=a;this.i=b;this.ka=c;this.f=m;this.Xb=o;this.o=m;this.oa=[];this.Ia=Array(5);this.Ia[0]=new J;this.Ia[1]=new J;this.Ia[2]=new J;this.Ia[3]=new J;this.Ia[4]=new J;this.Ld=0;this.images=m;this.gj=o;this.gf=0;this.zh=new J;this.gb=new K;this.oe=-180;this.me=-90;this.lf=180;this.kf=90;var d=Array(4),e=Array(2);this.ka.Xf(this.i,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new Q;f=d[0];g=d[1];gf(f,g,e);f=e[0];g=e[1];this.oe=f;this.kf=g;j.u(f,g,0);j.ja(a);f=d[2];g=d[1];gf(f,g,
e);f=e[0];g=e[1];j.u(f,g,0);j.ja(b);f=d[2];g=d[3];gf(f,g,e);f=e[0];g=e[1];this.lf=f;this.me=g;j.u(f,g,0);j.ja(c);d=new J;e=new J;d.u(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.u(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Oc(this.zh,d,e);this.zh.lc()}var jf=0;
function kf(a){if(0==a.Ld&&0==a.gf){var b=0,c=0;if(a.images!==m)for(var d=0;d<a.images.length;d++)a.images[d]!=m&&(b++,c=d);0==b?(a.f=a.c.Rj,a.o===m&&lf(a),a.o.Ub(a.f),a.Xb=i,a.images=m):1==b?(a.f=a.images[c],a.o===m&&lf(a),a.o.Ub(a.f),a.Xb=i,a.images=m):(a.gj=i,a.o===m&&lf(a),a.Xb=i)}}function mf(a,b,c){a=b.caller;a.images[c]=b;a.Ld-=1;kf(a);jf--}function nf(a,b,c){0<=c?(b.images[c]=m,b.Ld-=1):(b.images=m,b.Ld=0);kf(b);jf--}
function of(a,b){var c=b.caller;c.o=b;c.o.$b=c.i.length;c.oa=b.na;c.Ia[0].u(b.O[0],b.O[1],b.O[2]);c.Ia[1].u(b.ga[0],b.O[1],b.O[2]);c.Ia[2].u(b.ga[0],b.ga[1],b.O[2]);c.Ia[3].u(b.O[0],b.ga[1],b.O[2]);c.Ia[4].u(0.5*(b.ga[0]-b.O[0]),0.5*(b.ga[1]-b.O[1]),0.5*(b.ga[2]-b.O[2]));c.gf-=1;kf(c);jf--}function pf(a,b){b.o=m;b.gf-=1;kf(b);jf--}hf.prototype.j=function(){this.f&&this.f.j();this.o&&this.o.j()};
function lf(a){a.o=new L(a.c);a.o.$b=a.i.length;var b;b=3>a.i.length?2:6>a.i.length?9:5;for(var c=Array(2*b*b),d=1/(b-1),e=0;e<b;e++)for(var f=0;f<b;f++)c[2*(e*b+f)+0]=f*d,c[2*(e*b+f)+1]=1-e*d;var f=[],g,j,d=Array(4),k=Array(2),l=Array(3);a.ka.Xf(a.i,d);g=d[0];j=d[1];for(var n=(d[3]-j)/(b-1),r=(d[2]-g)/(b-1),q,u,v,y=new Q,d=0;d<b;d++)for(e=0;e<b;e++)q=g+e*r,u=j+d*n,gf(q,u,k),y.u(k[0],k[1],0),y.ja(l),q=l[0],u=l[1],v=l[2],0==e&&0==d&&(a.oa=[q,u,v]),0==e&&0==d?a.Ia[0].u(q,u,v):e==b-1&&0==d?a.Ia[1].u(q,
u,v):e==b-1&&d==b-1?a.Ia[2].u(q,u,v):0==e&&d==b-1?a.Ia[3].u(q,u,v):e==(b-1)/2&&d==(b-1)/2&&a.Ia[4].u(q,u,v),f.push(q-a.oa[0]),f.push(u-a.oa[1]),f.push(v-a.oa[2]);g=Array(5*b*b);for(d=0;d<b*b;d++)g[5*d+0]=f[3*d+0],g[5*d+1]=f[3*d+1],g[5*d+2]=f[3*d+2],g[5*d+3]=c[2*d+0],g[5*d+4]=c[2*d+1];for(var c=[],z,e=j=f=0;e<=b-2;e+=1){for(d=0;d<=b-1;d+=1)k=e,z=e+1,n=0==j%2?l=b-1-d:l=d,z+=n*b,c[f++]=k+l*b,c[f++]=z;c[f++]=z;j+=1}cd(a.o,g);fd(a.o,c,"TRIANGLESTRIP");a.o.Ub(a.f);a.o.na=a.oa;jd(a.o)}
hf.prototype.Ta=function(a){if(!(3>this.i.length)){if(a){if(this.gb.da(this.c.Ab),this.gb.a[12]+=this.oa[0],this.gb.a[13]+=this.oa[1],this.gb.a[14]+=this.oa[2],this.c.mc(),this.c.nc(this.gb),a=this.o,a.ra){a.V==m&&a.Ad();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.V);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.rb);a.ia&&(a.c.mc(),a.pd.aa(a.ia,a.c.Ab),a.c.nc(a.pd));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,o,12,0);gd(a.c.Qa,a.c.ha,a.sd);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,o,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,o,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,o,32,24);gd(a.c.Qa,a.c.ha,a.sd);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,o,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,o,28,12);gd(a.c.Qa,a.c.ha,a.sd);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,
3,a.b.FLOAT,o,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,o,20,12);gd(a.c.Qa,a.c.ha,a.sd);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),a.b.enableVertexAttribArray(3),a.b.vertexAttribPointer(0,3,a.b.FLOAT,o,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,o,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,o,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,o,48,40),gd(a.c.Qa,a.c.ha,a.sd)}switch(a.ld){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,
a.Bb,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.Bb,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);a.b.disableVertexAttribArray(3)}}else{if(this.gj){this.gj=o;a=this.f=new M(this.c,i,256,256);this.c.Zd.push(a);a.bg();for(a=0;a<this.images.length;a++)this.images[a]!=m&&(1>this.images[a].td?this.images[a].B(0,0,0,0,1,1,i,i,this.images[a].td):this.images[a].B(0,0,0,0,1,1,i,i,1));ze(this.c);
for(a=0;a<this.images.length;a++)this.images[a]!=m&&this.images[a].j();this.images=m;this.o.Ub(this.f)}this.gb.da(this.c.Ab);this.gb.a[12]+=this.oa[0];this.gb.a[13]+=this.oa[1];this.gb.a[14]+=this.oa[2];this.c.mc();this.c.nc(this.gb);this.c.g.G.Oa.Yj==qf?this.o.mode="pt":this.c.g.G.Oa.Yj==rf&&(this.o.mode="pt_chroma");this.o.fa()}this.c.Yc()}};function sf(a,b,c,d,e){this.c=a;this.va=b;this.qb=c;this.ka=d;this.Dh=new af(e,o);this.bk={};this.bk.gm=0}sf.prototype.j=function(){this.ka=this.qb=this.va=this.c=m;this.Dh.clear();this.Dh=m};sf.prototype.Kk=function(){if(!this.va||0==this.va.length)return o;for(var a=0;a<this.va.length;a++)if(!this.va[a].ra())return o;if(this.qb)for(a=0;a<this.qb.length;a++)if(!this.qb[a].ra())return o;return i};
sf.prototype.Zc=function(a){var b=this.Dh.getItem(a);if(b==m){this.bk.gm++;var c=b=new hf(this.c,a,this.ka),d=this.va,e=this.qb;if(3>c.i.length)nf(0,c,-1);else{if(0<d.length){c.Ld=d.length;c.images=Array(c.Ld);for(var f=0;f<d.length;f++){c.images[f]=m;var g=c.i.length,g=(g<=d[f].Je||-1==d[f].Je)&&(g>=d[f].Ke||-1==d[f].Ke);d[f].Ec(c.i)&&g?(d[f].Tb(c.c,c.i,f,mf,nf,c),jf++):nf(0,c,f)}}e&&0<e.length&&8<c.i.length&&e[0].Ec(c.i)&&(c.gf=1,e[0].Tb(c.c,c.i,0,of,pf,c),jf++)}this.Dh.setItem(a,b)}return b};
sf.prototype.Sb=function(){var a=0,b=0;if(0<this.qb.length)for(var c=0;c<this.qb.length;c++)b=Math.max(b,this.qb[c].Sb());for(c=0;c<this.va.length;c++)a=Math.max(a,this.va[c].Sb());return 0<b?Math.min(b,a):a};x("GlobeCache",sf);sf.prototype.IsReady=sf.prototype.Kk;sf.prototype.RequestBlock=sf.prototype.Zc;function tf(){this.t=new Ge;this.m=m;this.ka=new He;this.coords=Array(4);this.td=1;this.ma=0;this.ra=function(){return this.t.hg};this.Gc=function(){return this.t.gg};this.Tb=function(a,b,c,d,e,f){if(this.ra()){var g={};this.ka.Jc(b,g);g=this.bb[this.ma]+"/"+this.m+"/tiles/"+g.$b+"/"+g.x+"/"+g.y+this.t.Od;a=new M(a);a.i=b;a.m=c;a.Q=d;a.P=e;a.caller=f;a.td=this.td;O(a,g,uf,vf,i);this.ma++;this.ma>=this.bb.length&&(this.ma=0)}};this.Sb=function(){return this.t.Za?this.t.Za:0};this.Ec=function(a){if(a.length>
this.t.Za)return o;for(var b=a,c=a,d=0;d<this.t.Za-a.length;d++)b+="0",c+="3";d={};this.ka.Jc(b,d);b=d.x;a=d.y;this.ka.Jc(c,d);var c=d.x,d=d.y,e=this.t.Sa[0],f=this.t.Sa[1],g=this.t.Sa[3];return!(b>this.t.Sa[2]||c<e||a>g||d<f)};this.ib=function(a,b,c){this.td=c==m?1:c;this.bb=a;this.m=b;this.t.Mf(a[0]+"/"+b+"/layersettings.json")}}tf.prototype=new Je;function uf(a){a.Q(a.i,a,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}function vf(a){a.P(a.i,a.caller,a.m);a.Q=m;a.P=m;a.i=m;a.caller=m;a.m=m}
x("owgImageLayer",tf);tf.prototype.Failed=tf.prototype.Gc;tf.prototype.Ready=tf.prototype.ra;tf.prototype.RequestTile=tf.prototype.Tb;tf.prototype.Setup=tf.prototype.ib;function wf(a){this.c=a;this.va=[];this.qb=[];this.ka=new He;this.on=1E3;this.Fa=m;this.C=[];this.Jl=0;this.tg={};this.tg.Fh=0;this.ig=m;this.Mj=0;this.pm=1;this.Id=new Ce;this.Z=Array(3);this.Lj=new K;this.se=new L(this.c);this.Ce=new L(this.c);this.te=[8/255,24/255,58/255];this.De=[1,1,1];this.Xj=1;this.Yj=qf}s=wf.prototype;s.j=function(){this.Fa&&(this.Fa.j(),this.Fa=m);this.se&&(this.se.j(),this.se=m);this.Ce&&(this.Ce.j(),this.Ce=m)};
s.yi=function(a){var b=-1;if(w(a.service))if("i3d"==a.service){if(w(a.url)&&w(a.layer)&&0<a.url.length){var b=a.url[0],c=a.layer,d=new Ke;w(a.minlod)&&(d.Ke=a.minlod);w(a.maxlod)&&(d.Je=a.maxlod);d.ib(b,c,a.transparency);b=this.va.length;this.va.push(d);xf(this)}}else"osm"==a.service?w(a.url)&&0<a.url.length&&(d=new Ne,w(a.minlod)&&(d.Ke=a.minlod),w(a.maxlod)&&(d.Je=a.maxlod),d.ib(a.url),b=this.va.length,this.va.push(d),xf(this)):"owg"==a.service?w(a.url)&&0<a.url.length&&(c=a.layer,d=new tf,w(a.minlod)&&
(d.Ke=a.minlod),w(a.maxlod)&&(d.Je=a.maxlod),d.ib(a.url,c,a.transparency),b=this.va.length,this.va.push(d),xf(this)):"goo"==a.service?w(a.url)&&0<a.url.length&&(d=new $e,w(a.minlod)&&(d.Ke=a.minlod),w(a.maxlod)&&(d.Je=a.maxlod),d.ib(a.url),b=this.va.length,this.va.push(d),xf(this)):"oym"==a.service&&w(a.url)&&0<a.url.length&&(d=new Ue,w(a.minlod)&&(d.Ke=a.minlod),w(a.maxlod)&&(d.Je=a.maxlod),d.ib(a.url),b=this.va.length,this.va.push(d),xf(this));return b};
s.xi=function(a){var b=-1;if("i3d"==a.service){if(a.url&&a.layer&&0<a.url.length){var b=a.layer,c=new Re;c.ib(a.url[0],b);b=this.qb.length;this.qb.push(c);xf(this)}}else if("owg"==a.service&&a.url&&a.layer&&0<a.url.length){var d=a.url,b=a.layer,c=new Xe;c.ib(d,b);b=this.qb.length;this.qb.push(c);xf(this)}return b};s.jh=function(a){0>a||a>=this.va.length||(this.va.splice(a,1),xf(this))};function xf(a){a.Fa&&(a.Fa.j(),a.Fa=m);a.Fa=new sf(a.c,a.va,a.qb,a.ka,a.on)}
s.Ta=function(a,b){this.Fa.bk.gm=0;this.Lj.da(b);this.Id.th(b);this.ig=a;if(this.Fa&&this.Fa.Kk()){this.Mj=this.Fa.Sb();var c=this.Fa.Zc("0"),d=this.Fa.Zc("1"),e=this.Fa.Zc("2"),f=this.Fa.Zc("3");if(c.Xb&&d.Xb&&e.Xb&&f.Xb){this.C=[];this.C.push(c);this.C.push(d);this.C.push(e);this.C.push(f);for(this.tg.Fh=0;this.tg.Fh!=this.C.length;)a:{c=this.tg.Fh;if(this.C[c].i.length!=this.Mj&&this.C[c].Xb&&yf(this,c)){var g=this.C[c].i,d=this.Fa.Zc(g+"0"),e=this.Fa.Zc(g+"1"),f=this.Fa.Zc(g+"2"),g=this.Fa.Zc(g+
"3");if(d.Xb&&e.Xb&&f.Xb&&g.Xb){this.C.splice(c,1);this.C.push(d);this.C.push(e);this.C.push(f);this.C.push(g);break a}}this.tg.Fh++}for(c=0;c<this.C.length;)e=this.C[c],d=e.Ia[4].a,e=e.zh.a,f=this.ig.a,this.Z[0]=f[0]-d[0],this.Z[1]=f[1]-d[1],this.Z[2]=f[2]-d[2],0.4<=(this.Z[0]*e[0]+this.Z[1]*e[1]+this.Z[2]*e[2])/Math.sqrt(this.Z[0]*this.Z[0]+this.Z[1]*this.Z[1]+this.Z[2]*this.Z[2])?this.C.splice(c,1):c++;for(c=0;c<this.C.length;c++)this.C[c].Ta(o);d=[];e=[];for(c=0;c<this.C.length;c++){var f=this.C[c].i,
g=0,j=f.charAt(0);if("0"==j||"1"==j)g=1;if("2"==j||"3"==j)g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if(("0"==j||"1"==j)&&"2"==g){g=0;break}if(("2"==j||"3"==j)&&"1"==g){g=0;break}}1==g&&d.push(this.C[c]);2==g&&e.push(this.C[c])}3<d.length&&zf(this,d);3<e.length&&Af(this,e)}}};
function yf(a,b){var c=i,d=a.C[b],e=d.i.length;if(e>a.Mj)return o;if(3>e)return i;c=a.Id.sh(d.o.O[0],d.o.O[1],d.o.O[2],d.o.ga[0],d.o.ga[1],d.o.ga[2]);if(!c)return o;var f=d.Ia[4].a,g=d.zh.a,e=a.ig.a;a.Z[0]=e[0]-f[0];a.Z[1]=e[1]-f[1];a.Z[2]=e[2]-f[2];f=Math.sqrt(a.Z[0]*a.Z[0]+a.Z[1]*a.Z[1]+a.Z[2]*a.Z[2]);0<f&&(a.Z[0]/=f,a.Z[1]/=f,a.Z[2]/=f);0.4<a.Z[0]*g[0]+a.Z[1]*g[1]+a.Z[2]*g[2]&&(c=o);if(!c)return o;for(var c=[0,0,0],g=0,f=1.0E20,j=d.o.q.length/d.o.K,k=0;k<j;k++)c[0]=e[0]-(d.o.q[5*k]+d.oa[0]),c[1]=
e[1]-(d.o.q[5*k+1]+d.oa[1]),c[2]=e[2]-(d.o.q[5*k+2]+d.oa[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.pm;g=d.Ia[0].If();g.Ui(d.Ia[1]);return 1<c*g.Hi()/e}
s.Xd=function(a,b,c){for(var a=this.c.Vd(a,b,this.Lj,i),b=[],d=0;d<this.C.length;d++){var e=this.C[d].o.O,f=this.C[d].o.ga;this.C[d].o.Ah.Pf(a.x,a.y,a.n,a.gd,a.hd,a.jd,e[0],e[1],e[2],f[0],f[1],f[2])&&b.push(this.C[d])}e=1.0E20;c.hit=o;c.numhits=b.length;for(d=0;d<b.length;d++)if((f=b[d].o.zd(a.x,a.y,a.n,a.gd,a.hd,a.jd))&&f.w<e)c.hit=i,e=f.w;c.tmin=e;c.hit&&(c.x=a.x+e*a.gd,c.y=a.y+e*a.hd,c.z=a.n+e*a.jd,a=new Q(0,0,0),a.Hc(c.x,c.y,c.z),c.lng=a.H[0],c.lat=a.H[1],c.elv=a.H[2])};
s.ih=function(a,b,c,d){if(d)if(d={},this.Xd(a,b,d),d.hit)this.Xj=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.Vd(a,b,this.Lj,i);c.hit=o;var f=e.x,b=e.y,a=e.n,g=e.gd,d=e.hd,e=e.jd,j=g*g+d*d+e*e,k=f*g+b*d+a*e,l=k*k-j*(f*f+b*b+a*a-this.Xj*this.Xj);0>=l||(j=(0-k-Math.sqrt(l))/j,f+=g*j,b+=d*j,a+=e*j,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=i,c.x=f*d,c.y=b*d,c.z=a*d,a=new Q(0,0,0),a.Hc(c.x,c.y,c.z),c.lng=a.H[0],c.lat=a.H[1],c.elv=a.H[2])};
s.Zg=function(a,b){var c={hasvalue:o,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new Q(a,b,0);f.ja(e);f.u(a,b,-1);f.ja(d);var g,j,f=d[0];g=d[1];j=d[2];for(var k=e[0]-d[0],l=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+l*l+d*d),k=k/e,l=l/e,d=d/e,e=[],n=0;n<this.C.length;n++){var r=this.C[n].o.O,q=this.C[n].o.ga;this.C[n].o.Ah.Pf(f,g,j,k,l,d,r[0],r[1],r[2],q[0],q[1],q[2])&&e.push(this.C[n])}r=1.0E20;for(n=0;n<e.length;n++)if((q=e[n].o.zd(f,g,j,k,l,d))&&q.w<r)c.hasvalue=i,c.lod=e[n].o.$b,r=q.w;c.hasvalue&&(c.x=
f+r*k,c.y=g+r*l,c.z=j+r*d,f=new Q(0,0,0),f.Hc(c.x,c.y,c.z),c.lng=f.H[0],c.lat=f.H[1],c.elevation=f.H[2]);return c};
function zf(a,b){for(var c=0,d=0;d<b.length;d++)b[d].i.length>c&&(c=b[d].i.length);for(d=0;d<b.length;d++)for(b[d].tb=b[d].i;b[d].tb.length<c;)b[d].tb+="0";b.sort(function(a,b){return parseInt(a.tb,2)-parseInt(b.tb,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.te[0],a.te[1],a.te[2],1],e=[],d=0;d<b.length;d++)for(var f=2;0==b[d].o.q[f];)c.push(b[d].oa[0]+b[d].o.q[f-2]),c.push(b[d].oa[1]+b[d].o.q[f-1]),c.push(b[d].oa[2]+b[d].o.q[f]),c.push(a.te[0]),c.push(a.te[1]),c.push(a.te[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.se.j();a.se=new L(a.c);a.se.Fc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},m,m);a.se.fa()}
function Af(a,b){for(var c=0,d=0;d<b.length;d++)b[d].i.length>c&&(c=b[d].i.length);for(d=0;d<b.length;d++){b[d].tb=b[d].i;b[d].tb=b[d].tb.replace(/2/g,"0");for(b[d].tb=b[d].tb.replace(/3/g,"1");b[d].tb.length<c;)b[d].tb+="0"}b.sort(function(a,b){return parseInt(b.tb,2)-parseInt(a.tb,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.De[0],a.De[1],a.De[2],1],e=[],d=0;d<b.length;d++)for(var f=b[d].o.q.length,f=f-1;0==b[d].o.q[f];)c.push(b[d].oa[0]+b[d].o.q[f-4]),c.push(b[d].oa[1]+b[d].o.q[f-
3]),c.push(b[d].oa[2]+b[d].o.q[f-2]),c.push(a.De[0]),c.push(a.De[1]),c.push(a.De[2]),c.push(1),f-=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.Ce.j();a.Ce=new L(a.c);a.Ce.Fc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},m,m);a.Ce.fa()}
s.Wg=function(){if(!this.ig)return NaN;var a=[],b=this.ig.a,c=new J;if(0==this.qb.length)return c=new Q,c.Hc(b[0],b[1],b[2]),c.H[2];c.u(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.C.length;d++){var e=this.C[d].o.O,f=this.C[d].o.ga;this.C[d].o.Ah.Pf(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.C[d])}e=1.0E20;f=o;for(d=0;d<a.length;d++){var g=a[d].o.zd(b[0],b[1],b[2],c[0],c[1],c[2]);g&&g.w<e&&(f=i,e=g.w)}return f?(b=e*c[0],a=e*c[1],c=e*c[2],b=8388607*Math.sqrt(b*b+a*a+c*
c),0>e&&(b=-b),this.Jl=b):this.Jl};s.ph=ca("Yj");var qf=0,rf=1;function Bf(a){this.c=a;this.ca=[]}
Bf.prototype.Ta=function(){for(var a=0;a<this.ca.length;a++){var b=this.ca[a],c=this.ca[a],d=this.c.b;d.colorMask(o,o,o,o);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(o);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].fa();d.stencilOp(d.KEEP,d.KEEP,d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].fa();d.depthMask(i);d.colorMask(i,i,i,i);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,
0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(i);for(e=0;e<c.length;e++)c[e].fa();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].fa();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST)}};Bf.prototype.wk=function(a){this.ca.push(a);return this.ca.length-1};Bf.prototype.kh=function(a){this.ca.splice(a,1)};function Cf(){this.name="ogGeometry";this.type=La;this.Hb=[];this.nf=[];this.wa=-1;this.F=o;this.md="";this.options=this.qc=this.fd=m;this.ne=-1;this.im=this.Nd=m}Cf.prototype=new E;s=Cf.prototype;s.ya=function(a){this.options=a;a.url&&Df(this,a.url);a.jsonobject&&this.Fc(a.jsonobject);"EarthPolyline"==a.type&&(this.im=W($a,this,this.options),this.wa=Ef(this).Td(this.im.Hd))};s.Na=function(){Ef(this).Qi(this.wa);if(this.Nd!=m)F(this.Nd);else{for(var a=0;a<this.Hb.length;a++)F(this.Hb[a]);this.Y=m}};
function Ef(a){var b=m,a=a.parent.parent.c;a.g&&a.g.G&&(b=a.g.G.Qh);return b}s.yd=function(a,b,c,d,e,f){for(var g=0;g<this.Hb.length;g++)this.Hb[g].yd(a,b,c,d,e,f)};s.Zf=function(a,b,c,d){for(var e=0;e<this.Hb.length;e++)this.Hb[e].Zf(a,b,c,d)};s.$=function(){if(this.Nd!=m)this.Nd.$();else for(var a=0;a<this.Hb.length;a++)this.Hb[a].$()};s.ba=function(){if(this.Nd!=m)this.Nd.ba();else for(var a=0;a<this.Hb.length;a++)this.Hb[a].ba()};
s.Yi=function(){4==this.L.readyState&&(404==this.L.status?this.qc&&this.qc(this.id):this.Fc(Zc(this.L.responseText)))};s.Fc=function(a){if("pointcloud"==a.Type)this.options=a,this.Nd=W(Za,this,this.options),a=Ef(this),this.wa=a.Td(this.Nd.yc);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=W(Ma,this,this.options);this.Hb.push(c);this.nf.push(c.Fe)}this.fd&&this.fd(this.id);a=Ef(this);this.wa=a.Td(this.nf)}};
function Df(a,b){b==m?alert("invalid json-url"):(a.md=b,a.L=new window.XMLHttpRequest,a.L.open("GET",a.md,i),a.L.onreadystatechange=function(){a.Yi()},a.L.send())};function Ff(a){this.c=a;this.Y=[];this.Id=new Ce}
Ff.prototype.Ta=function(a,b){this.Id.th(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.Y.length;f++)if(this.Y[f]instanceof nd){var g=this.Y[f];g.F||g.fa()}else if(this.Y[f]instanceof Gf)g=this.Y[f],g.F||g.fa();else for(var g=this.Y[f],j=0;j<g.length;j++)for(var k=g[j],l=0;l<k.length;l++){var n=k[l];if(!n.F){var r=n.O[0]-c,q=n.O[1]-d,u=n.O[2]-e,r=r*r+q*q+u*u,q=n.Lm*n.Lm;this.Id.sh(n.O[0],n.O[1],n.O[2],n.ga[0],n.ga[1],n.ga[2])&&!(r>q)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),n.fa(),this.c.b.disable(this.c.b.BLEND))}}};Ff.prototype.Td=function(a){this.Y.push(a);return this.Y.length-1};Ff.prototype.Qi=function(a){this.Y.splice(a,1)};
Ff.prototype.Yd=function(a,b){for(var c=this.c.Vd(a,b,this.c.ha,i),d=1E4,e=m,f=0;f<this.Y.length;f++)for(var g=this.Y[f],j=0;j<g.length;j++)for(var k=g[j],l=0;l<k.length;l++){var n=k[l];if(!n.F){n.dl(c.x,c.y,c.n,c.gd,c.hd,c.jd);var r=n.zd(c.x,c.y,c.n,c.gd,c.hd,c.jd);r&&r.w<d&&(d=r.w,e=n)}}return e?e.Mn:-1};function Hf(){this.Oa=m;this.nb=new J;this.fk=this.fj=this.Ch=this.Qh=this.ci=m;this.hj=i;this.f=m;this.ck=0;this.Vc=p();this.Wc=function(){if(this.hj){var a=this.f;this.c.Zd.push(a);a.bg();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}this.Oa.Ta(this.nb,this.c.ha);this.fk.Ta(this.nb,this.c.ha);this.ci.Ta(this.nb,this.c.ha);this.Qh.Ta(this.nb,this.c.ha);this.Ch.Ta(this.nb,this.c.ha);this.fj.Ta(this.nb,
this.c.ha);if(this.hj){ze(this.c);var a=this.f.width/(this.f.width+10),b=this.f.height/(this.f.height+10);0==this.ck?(this.f.B(10,10,0,0,a,b,i,i,1),this.f.B(0,0,0,0,1,1,i,i,1)):1==this.ck?(this.f.B(10,this.f.height/2+5,0,0,a,b/2,i,i,1),this.f.B(0,this.f.height/2,0,0,1,0.5,i,i,1)):2==this.ck&&(this.f.B(10,5,0,0,a,b/2,i,i,1),this.f.B(0,0,0,0,1,0.5,i,i,1))}};this.Xc=function(a){a=a.Wd();this.nb.u(a.x,a.y,a.n)};this.Oe=function(){this.Oa=new wf(this.c);this.fk=new Bf(this.c);this.ci=new Be(this.c);this.Qh=
new Ff(this.c);this.Ch=new De(this.c);this.fj=new Ae(this.c)};this.Ne=function(){this.Oa.j();this.Oa=m};this.Fk=function(a,b){this.hj&&(this.f==m?this.f=new M(this.c,i,a,b,i):ld(this.f,a,b,i))};this.Pe=p()}Hf.prototype=new de;function If(a){this.xn=a;this.Ll=S(this.xn,Bb?"DOMMouseScroll":"mousewheel",this)}za(If,fe);var Jf="mousewheel";
If.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.kd;if("mousewheel"==a.type){c=1;if(Ab||Cb&&(Fb||Ob("532.0")))c=40;d=Cb&&vb&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;w(a.wheelDeltaX)?(b=Cb&&vb&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Cb&&vb&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),w(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;"number"==typeof this.Ol&&Math.min(Math.max(b,-this.Ol),this.Ol);"number"==typeof this.Pl&&
(c=Math.min(Math.max(c,-this.Pl),this.Pl));b=new Kf(d,a,0,c);try{this.dispatchEvent(b)}finally{b.ie()}};If.prototype.Lc=function(){If.Ee.Lc.call(this);Qd(this.Ll);delete this.Ll};function Kf(a,b,c,d){b&&this.Nc(b,h);this.type=Jf;this.detail=a;this.Kh=d}za(Kf,Dd);function Lf(){this.eb=new K;this.eg=new J;this.eg.u(1,0,0);this.W=0;this.U=-0.03;this.oc=0;this.T=7.616;this.S=45.9088;this.A=17E3;this.Ye=this.Xe=this.xh=this.yh=0;this.Zi=this.dg=this.hl=this.gl=this.ad=1;this.Vb=this.Wb=0;this.ae=o;this.mb=this.lb=0;this.Ze=new J;this.ej=this.dj=0;this.$d=o;this.ea=Array(3);this.ve=new Q(0,0,0);this.mf=new K;this.zg=new K;this.xg=new K;this.pe=new K;this.eb=new K;this.od=new K;this.yg=new K;this.pe.Xg();this.Qc=100;this.ub=m;this.Vc=function(){this.c.Ti(this.eb)};
this.Wc=p();this.Xc=function(a){a.Rc=0;this.ve.u(this.T,this.S,this.A);this.ve.ja(this.ea);this.eg.u(this.ea[0],this.ea[1],this.ea[2]);this.zg.$c(this.ea[0],this.ea[1],this.ea[2]);this.xg.Ud(this.T,this.S);this.mf.zi(this.W,this.U,this.oc);this.od.aa(this.zg,this.xg);this.yg.aa(this.od,this.mf);this.od.aa(this.yg,this.pe);this.eb.Le(this.od);a.sl=this.W;a.sa(this.ea[0],this.ea[1],this.ea[2]);var b=this.S,c=this.A;a.Zb.longitude=this.T;a.Zb.latitude=b;a.Zb.elevation=c;this.ub&&(this.ub.Pc=this.T,this.ub.Oc=
this.S,this.ub.Mc=this.A,this.ub.pitch=57.29577951308232*this.U,this.ub.Ka=57.29577951308232*this.W,this.ub.hc=57.29577951308232*this.oc)};this.Oe=p();this.Ne=p();this.Pe=function(a){S(window,xd,this.Ki,o,this);S(window,yd,this.Li,o,this);S(a,ud,this.Rf,o,this);S(a,vd,this.Tf,o,this);S(a,wd,this.Sf,o,this);a=new If(a);S(a,Jf,this.Ni,o,this)};this.Ni=function(a){0<a.Kh?0<this.Vb?this.Wb=this.Vb=0:this.Wb+=0.05:0<this.Wb?this.Vb=this.Wb=0:this.Vb+=0.05};this.Ki=function(a){81==a.keyCode?this.Ye=this.ad*
this.Zi:65==a.keyCode?this.Ye=-this.ad*this.Zi:83==a.keyCode?this.Xe=0.5*this.dg:88==a.keyCode&&(this.Xe=-0.5*this.dg)};this.Li=function(a){81==a.keyCode?this.Ye=0:65==a.keyCode?this.Ye=0:83==a.keyCode?this.Xe=0:88==a.keyCode&&(this.Xe=0)};this.Rf=function(a){Id(a,Ed)&&(this.Ze.u(0,0,0),this.dj=a.offsetX,this.ej=a.offsetY,this.$d=i);this.lb=a.offsetX;this.mb=a.offsetY;if(Id(a,Fd))return o};this.Tf=function(a){Id(a,Ed)&&(this.$d=o);this.lb=a.offsetX;this.mb=a.offsetY;this.yh=this.xh=0;if(Id(a,Fd))return o};
this.Sf=function(a){this.lb=a.offsetX;this.mb=a.offsetY;if(this.$d){var b=(this.dj-a.offsetX)/this.c.width,c=(this.ej-a.offsetY)/this.c.height,b=b*b,c=c*c;this.Ze.u(a.offsetX-this.dj,this.c.height-1-a.offsetY-(this.c.height-1-this.ej),0);this.Ze.lc();var a=this.Ze.a[0],d=this.Ze.a[1],e=0,f=0;0<a?e=1:0>a&&(e=-1);0<d?f=1:0>d&&(f=-1);this.xh=this.ad*this.gl*c*f;this.yh=this.hl*b*e}};this.Qe=function(a){var b=this.Xe*a/500,c=this.yh*a/500,d=this.Ye*a,e=0,e=0,f=this.A/5E5*(this.A/5E5);10<f?f=10:0.0010>
f&&(f=0.0010);var g=f*this.xh*a/250;if(0<this.Wb){var j=0.5*this.dg*a/1E3;this.U+=j;this.Wb-=j;0>this.Wb&&(this.U+=this.Wb,this.Wb=0);this.ae=i}0<this.Vb&&(j=0.5*this.dg*a/1E3,this.U-=j,this.Vb-=j,0>this.Vb&&(this.U-=this.Vb,this.Vb=0),this.ae=i);b&&(this.U+=b,this.ae=i);c&&(this.W+=c,this.W>2*Math.PI&&(this.W-=2*Math.PI),0>this.W&&(this.W=2*Math.PI-this.W),this.ae=i);this.ae&&(e=this.c.Wg(),isNaN(e)&&(e=this.Qc));d&&(a=1E3*d*f,this.A+=a,e+=a,7E6<this.A&&(this.A=7E6));if(g){a=0.017453292519943295*
this.S;d=Math.sin(a);f=Math.cos(a);c=this.W;b=0.017453292519943295*this.T;d=Fc/Math.sqrt(1-Gc*d*d);f=Fc/(d/(1+Hc*f*f))*g*Math.cos(c);j=Fc/d*g*Math.sin(c)/Math.cos(a);g=Fc/d*g*Math.sin(c)*Math.tan(a)+c;this.T=57.29577951308232*(j+b);this.S=57.29577951308232*(f+a);for(this.W=g;180<this.T;)this.T-=360;for(;-180>this.T;)this.T+=360;for(;90<this.S;)this.S=180-this.S;for(;-90>this.S;)this.S=-180-this.S;this.ae=i}e<this.Qc&&this.ae&&(this.A+=this.Qc-e);this.ub&&(this.ub.Pc=this.T,this.ub.Oc=this.S,this.ub.Mc=
this.A,this.ub.pitch=57.29577951308232*this.U,this.ub.Ka=57.29577951308232*this.W,this.ub.hc=57.29577951308232*this.oc)}}Lf.prototype=new de;s=Lf.prototype;s.sa=function(a,b,c){this.T=a;this.S=b;this.A=c};s.Wd=function(){return{longitude:this.T,latitude:this.S,elevation:this.A}};s.Re=function(a,b,c){this.W=a;this.U=b;this.oc=c};s.nh=p();s.Of=function(){return{Ka:this.W,pitch:this.U,hc:this.oc}};function Mf(){this.eb=new K;this.We=o;this.eg=new J;this.eg.u(1,0,0);this.W=0;this.U=-1.5707963267948966;this.oc=0;this.T=7.77442050946391;this.S=47.472720418012834;this.A=75E5;this.Bd=Nf;this.Ye=this.Xe=this.xh=this.yh=this.bj=this.cj=this.aj=this.$i=this.v=0;this.Zi=this.dg=this.hl=this.gl=this.ad=1;this.Vb=this.Wb=0;new K;this.mb=this.lb=0;this.Ze=new J;this.Xi=this.vh=this.$d=o;this.ea=Array(3);this.ve=new Q(0,0,0);this.mf=new K;this.zg=new K;this.xg=new K;this.pe=new K;this.eb=new K;this.od=
new K;this.yg=new K;this.pe.Xg();this.wh=o;this.ll=this.kl=this.jl=0;this.il=1;this.Ve=o;this.kb={};this.jb={};this.Wi=new K;this.fl=new K;this.uh=new K;new K;new K;this.Qc=50;this.Zh=1E7;this.$a=Qc;this.Da=0;this.bf=o;this.rc=[0,0];this.Fd=0;this.Bh=this.Kc=o;this.Vc=function(){this.c.Ti(this.eb)};this.Wc=p();this.Xc=function(a){2E3>this.A?(this.c.g.Ib.Qj=1.0E-7,this.c.g.Ib.uj=1.2):(this.c.g.Ib.Qj=1.0E-5,this.c.g.Ib.uj=10);this.$a=a.$a;this.Da=a.Da;a.bf=this.bf;a.rc[0]=this.rc[0];a.rc[1]=this.rc[1];
a.Rc=1;this.We=0!=a.em?i:o;if(this.Bd==Of&&!this.We&&!this.c.Wa.le&&(this.vh&&(this.vh=o,this.nn(this.lb,this.mb)),this.$d&&this.Xi))this.Xi=o,this.mn(this.lb,this.mb);this.ve.u(this.T,this.S,this.A);this.ve.ja(this.ea);this.eg.u(this.ea[0],this.ea[1],this.ea[2]);this.zg.$c(this.ea[0],this.ea[1],this.ea[2]);this.xg.Ud(this.T,this.S);this.wh?(this.mf.Yg(this.jl,this.kl,this.ll,this.il),this.pe.yk()):this.mf.zi(this.W,this.U,this.oc);this.od.aa(this.zg,this.xg);this.yg.aa(this.od,this.mf);this.od.aa(this.yg,
this.pe);this.eb.Le(this.od);a.sl=this.W;a.sa(this.ea[0],this.ea[1],this.ea[2]);var b=this.S,c=this.A;a.Zb.longitude=this.T;a.Zb.latitude=b;a.Zb.elevation=c};this.Oe=p();this.Ne=p();this.Pe=function(a){S(window,xd,this.Ki,o,this);S(window,yd,this.Li,o,this);S(a,ud,this.Rf,o,this);S(a,wd,this.Sf,o,this);S(a,vd,this.Tf,o,this);S(a,td,this.Mi,o,this);a=new If(a);S(a,Jf,this.Ni,o,this)};this.cg=function(){var a=Nf;(this.v&Pf)==Qf&&(0==(this.v&Rf)?a=Of:(this.v&Rf)==Sf?a=Tf:(this.v&Rf)==Uf&&(a=Vf));(this.v&
Pf)==Wf&&(a=Vf);if(a!=this.Bd&&(this.Bd==Vf&&(this.W=this.cj+45*Math.PI*this.ad*(this.lb-this.$i)/(180*this.c.height),this.U=this.bj+45*Math.PI*this.ad*(this.aj-this.mb)/(180*this.c.height)),this.Bd=a,this.Bd==Vf))this.$i=this.lb,this.aj=this.mb,this.cj=this.W,this.bj=this.U;this.Bd==Vf&&(this.W=this.cj+45*Math.PI*this.ad*(this.lb-this.$i)/(180*this.c.height),this.U=this.bj+45*Math.PI*this.ad*(this.aj-this.mb)/(180*this.c.height))};this.Ni=function(a){if(this.Bd==Nf)if(0==(this.v&Rf)){var b={},c,
d;0<this.Fd?(c=this.rc[0],d=this.rc[1]):(c=this.lb,d=this.mb);this.c.Xd(c,d,b);if(b.hit){this.rc=[c,d];this.Fd=500;this.ve.u(this.T,this.S,this.A);this.ve.ja(this.ea);c=this.ea[0]-b.x;d=this.ea[1]-b.y;b=this.ea[2]-b.z;0<a.Kh?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new Q(0,0,0);e.Hc(this.ea[0]+c,this.ea[1]+d,this.ea[2]+b);this.T=e.H[0];this.S=e.H[1];this.Bh?e.H[2]>this.A&&(this.A=e.H[2]):this.A=e.H[2];this.Kc=i;this.A<this.Qc?(this.A=this.Qc,this.Kc=i):this.A>this.Zh&&(this.A=this.Zh,
this.Kc=i)}}else(this.v&Rf)==Sf&&(this.U+=5*a.Kh*Math.PI*this.ad/180);return this.Ua(a)};this.Ki=function(a){if(!this.We&&!this.c.Wa.le){66==a.keyCode&&(this.wh=o);if(16==a.keyCode)return this.v|=Sf,this.Ua(a);if(17==a.keyCode)return this.v|=Uf,this.Ua(a);if(37==a.keyCode||65==a.keyCode)return this.v|=Xf,this.Ua(a);if(38==a.keyCode||87==a.keyCode)return this.v|=Yf,this.Ua(a);if(39==a.keyCode||68==a.keyCode)return this.v|=Zf,this.Ua(a);if(40==a.keyCode||83==a.keyCode)return this.v|=$f,this.Ua(a);this.cg();
return i}};this.Li=function(a){if(16==a.keyCode)return this.v&=~Sf,this.Ua(a);if(17==a.keyCode)return this.v&=~Uf,this.Ua(a);if(37==a.keyCode||65==a.keyCode)return this.v&=~Xf,this.Ua(a);if(38==a.keyCode||87==a.keyCode)return this.v&=~Yf,this.Ua(a);if(39==a.keyCode||68==a.keyCode)return this.v&=~Zf,this.Ua(a);if(40==a.keyCode||83==a.keyCode)return this.v&=~$f,this.Ua(a);this.cg();return i};this.Mi=function(a){if(!this.We&&!this.c.Wa.le){var b={};this.c.Xd(this.lb,this.mb,b);if(b.hit){this.c.mh(2E3);
var c=this.A;1E6<c?ue(this.c.Wa,b.lng,b.lat,1E6,h,h,h):25E4<c?ue(this.c.Wa,b.lng,b.lat,25E4,h,h,h):5E4<c?ue(this.c.Wa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,ue(this.c.Wa,b.lng,b.lat,c,0,-90,0));this.rc=[this.lb,this.mb];this.Fd=2500}return this.Ua(a)}};this.Rf=function(a){if(!this.We&&!this.c.Wa.le){this.lb=a.offsetX-this.c.X.offsetLeft;this.mb=a.offsetY-this.c.X.offsetTop;if(Id(a,Ed))this.v|=Qf,document.body.style.cursor="move",this.vh=i;else{if(Id(a,Fd))return o;Id(a,Gd)&&(this.v|=Wf)}this.cg();return this.Ua(a)}};
this.Tf=function(a){this.$d=i;this.lb=a.offsetX-this.c.X.offsetLeft;this.mb=a.offsetY-this.c.X.offsetTop;if(Id(a,Ed))this.v&=~Qf,this.Ve=o,document.body.style.cursor="default",this.vh=o;else{if(Id(a,Fd))return o;Id(a,Gd)&&(this.v&=~Wf)}this.cg();return this.Ua(a)};this.Sf=function(a){if(!this.We&&!this.c.Wa.le)return this.$d=this.Bd==Of,this.Xi=i,this.lb=a.offsetX-this.c.X.offsetLeft,this.mb=a.offsetY-this.c.X.offsetTop,this.cg(),this.Ua(a)};this.Qe=function(a){if(this.$a==Rc){var b=this.Da*this.A/
5E3;this.Bh||(this.A-=a*b);this.A<this.Qc&&(this.A=this.Qc);this.Kc=i}else this.$a==Sc?(b=this.Da*this.A/5E3,this.A+=a*b,this.A>this.Zh&&(this.A=this.Zh),this.Kc=i):this.$a==Uc?this.W=this.Da:this.$a==Vc&&(b=Math.sin(this.Da),this.U+=a/5E3*-Math.cos(this.Da),this.W+=a/5E3*b,this.U<-Math.PI/2?this.U=-Math.PI/2:0<this.U&&(this.U=0));0<this.Fd&&(this.bf=i,this.Fd-=a,0>=this.Fd&&(this.Fd=0,this.bf=o));if((this.v&ag||this.$a==Tc)&&0==(this.v&Rf)){b=0;this.v&Yf&&(b+=1);this.v&$f&&(b-=1);var c=0;this.v&
Xf&&(c-=1);this.v&Zf&&(c+=1);var d;d=this.$a==Tc?Math.PI*this.Da/180:Math.atan2(c,b);b=this.A/5E5;10<b?b=10:0.0010>b&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.S/180,e=Math.sin(b),c=Math.cos(b),f=this.W+d;d=Math.PI*this.T/180;var g=Fc/Math.sqrt(1-Gc*e*e),e=Fc/g*a*Math.sin(f)/Math.cos(b),a=Fc/(g/(1+Hc*c*c))*a*Math.cos(f)+b;this.T=180*(e+d)/Math.PI;this.S=180*a/Math.PI}for(;180<this.T;)this.T-=180;for(;-180>this.T;)this.T+=180;for(;90<this.S;)this.S-=180;for(;-90>this.S;)this.S+=180;this.Kc&&(this.Kc=
o,a=this.c.Zg(this.T,this.S),a.hasvalue?(this.A-this.Qc<a.elevation&&(this.A=a.elevation+this.Qc,this.Kc=i),this.Bh=o):5E3>this.A&&(this.Kc=this.Bh=i))};this.Re=function(a,b,c){this.wh=o;this.pe.Xg();this.W=a;this.U=b;this.oc=c};this.nh=function(a,b,c,d){this.wh=i;this.jl=a;this.kl=b;this.ll=c;this.il=d;var e=a,a=b,b=e,e=a*b+c*d;if(0.499<e)this.W=2*Math.atan2(a,d),this.U=Math.PI/2,this.oc=0;else if(-0.499>e)this.W=-2*Math.atan2(a,d),this.U=-Math.PI/2,this.oc=0;else{var f=c*c;this.W=Math.atan2(2*b*
d-2*a*c,1-2*b*b-2*f);this.U=Math.asin(2*e);this.oc=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.nn=function(a,b){this.Wi.da(this.uh);var c={};this.c.ih(a,b,c,i);c.hit?(this.kb.x=c.x,this.kb.y=c.y,this.kb.n=c.z,this.Ve=i):this.Ve=o};this.mn=function(a,b){if(this.Ve){var c={};this.c.ih(a,b,c,o);if(c.hit)if(this.jb.x=c.x,this.jb.y=c.y,this.jb.n=c.z,this.Ve=i,this.jb.x==this.kb.x&&this.jb.y==this.kb.y&&this.jb.n==this.kb.n)this.uh.da(this.Wi);else{var d=this.kb.x*this.jb.x+this.kb.y*this.jb.y+this.kb.n*
this.jb.n,c=Math.sqrt(0.5*(1-d)),d=Math.sqrt(0.5*(1+d)),e,f,g;e=this.kb.y*this.jb.n-this.kb.n*this.jb.y;f=this.jb.x*this.kb.n-this.kb.x*this.jb.n;g=this.kb.x*this.jb.y-this.kb.y*this.jb.x;c/=Math.sqrt(e*e+f*f+g*g);this.fl.Yg(e*c,f*c,g*c,d);this.uh.aa(this.Wi,this.fl);c=[];(new Q(this.T,this.S,this.A)).ja(c);c=this.uh.La(new J(c[0],c[1],c[2]));d=new Q(0,0,0);d.Hc(c.a[0],c.a[1],c.a[2]);this.T=d.H[0];this.S=d.H[1];this.Kc=i}else this.Ve=o}};this.Ua=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();a.cancelBubble=i;a.cancel=i;return a.returnValue=o}}za(Mf,Lf);var Qf=1,Wf=4,Pf=7,Xf=16,Yf=32,Zf=64,$f=128,ag=240,Sf=256,Uf=512,Rf=768,Nf=0,Of=1,Vf=2,Tf=3;function bg(){this.uc=new K;this.Qj=1.0E-5;this.uj=10;this.Dn=45;this.Vc=function(){this.c.$k(this.uc)};this.Wc=p();this.Xc=function(a){this.uc.Ok(this.Dn,this.c.width/this.c.height,this.Qj,this.uj);a.Me[a.Me.length-1].da(this.uc)};this.Oe=p();this.Ne=p();this.Pe=p()}bg.prototype=new de;function cg(a){this.c=a;this.navigation=new Mf;this.navigation.c=a;ee(this.navigation);this.bc=this.navigation;this.Ib=new bg;this.G=new Hf;this.qd=new ge;this.Ib.c=a;ee(this.Ib);this.G.c=a;ee(this.G);this.qd.c=a;ee(this.qd);this.Tc=new Pc;this.Ab=new K;this.eb=new K;this.Hn=new K}cg.prototype.Ta=function(){this.bc.Vc();this.bc.Wc();this.Ib.Vc();this.Ib.Wc();this.G.Vc();this.G.Wc();this.qd.Vc();this.qd.Wc()};
cg.prototype.j=function(){this.bc&&(this.bc.vd(),this.bc=m);this.Ib&&(this.Ib.vd(),this.Ib=m);this.G&&(this.G.vd(),this.G=m);this.qd&&(this.qd.vd(),this.qd=m)};function dg(a){this.b=a;this.Nc=o;this.Dj=this.rk=this.Mb=this.Bj=this.pk=this.ec=this.Aj=this.ok=this.dc=this.vj=this.jk=this.cc=this.yj=this.mk=this.Lb=this.Cj=this.qk=this.fc=this.xj=this.lk=this.Ac=this.zj=this.nk=this.vb=this.wj=this.kk=this.zc=m}function gd(a,b,c){a.zc&&(a.b.useProgram(a.zc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.zc,"matMVP"),o,b.Ma()),a.b.uniform4fv(a.b.getUniformLocation(a.zc,"uColor"),c.Ma()))}
function hd(a,b){a.Ac&&(a.b.useProgram(a.Ac),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Ac,"matMVP"),o,b.Ma()))}
function eg(a){a.Nc=i;a.kk=fg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.wj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");a.kk&&a.wj&&(a.zc=a.b.createProgram(),a.b.attachShader(a.zc,a.kk),a.b.attachShader(a.zc,a.wj),a.b.bindAttribLocation(a.zc,0,"aPosition"),a.b.linkProgram(a.zc),a.b.getProgramParameter(a.zc,
a.b.LINK_STATUS)||alert("Shader Link: "+a.b.getProgramInfoLog(a.zc)));a.nk=fg(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.zj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");a.nk&&a.zj&&(a.vb=a.b.createProgram(),a.b.attachShader(a.vb,a.nk),a.b.attachShader(a.vb,a.zj),a.b.bindAttribLocation(a.vb,0,"aPosition"),
a.b.bindAttribLocation(a.vb,1,"aNormal"),a.b.bindAttribLocation(a.vb,2,"aTexCoord"),a.b.linkProgram(a.vb),a.b.getProgramParameter(a.vb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.vb)));a.lk=fg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.xj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");
a.lk&&a.xj&&(a.Ac=a.b.createProgram(),a.b.attachShader(a.Ac,a.lk),a.b.attachShader(a.Ac,a.xj),a.b.bindAttribLocation(a.Ac,0,"aPosition"),a.b.bindAttribLocation(a.Ac,1,"aColor"),a.b.linkProgram(a.Ac),a.b.getProgramParameter(a.Ac,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Ac)));a.qk=fg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Cj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord);\n}\n\n");a.qk&&a.Cj&&(a.fc=a.b.createProgram(),a.b.attachShader(a.fc,a.qk),a.b.attachShader(a.fc,a.Cj),a.b.bindAttribLocation(a.fc,0,"aPosition"),a.b.bindAttribLocation(a.fc,1,"aTexCoord"),a.b.linkProgram(a.fc),a.b.getProgramParameter(a.fc,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.fc)));a.mk=fg(a,
a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.yj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
a.mk&&a.yj&&(a.Lb=a.b.createProgram(),a.b.attachShader(a.Lb,a.mk),a.b.attachShader(a.Lb,a.yj),a.b.bindAttribLocation(a.Lb,0,"aPosition"),a.b.bindAttribLocation(a.Lb,1,"aNormal"),a.b.bindAttribLocation(a.Lb,2,"aTexCoord"),a.b.bindAttribLocation(a.Lb,3,"aColor"),a.b.linkProgram(a.Lb),a.b.getProgramParameter(a.Lb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Lb)));a.jk=fg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.vj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");a.jk&&a.vj&&(a.cc=a.b.createProgram(),a.b.attachShader(a.cc,a.jk),a.b.attachShader(a.cc,a.vj),a.b.bindAttribLocation(a.cc,0,"aPosition"),a.b.bindAttribLocation(a.cc,1,"aTexCoord"),a.b.linkProgram(a.cc),a.b.getProgramParameter(a.cc,a.b.LINK_STATUS)||alert("font shader: "+
a.b.getProgramInfoLog(a.cc)));a.ok=fg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.Aj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
a.ok&&a.Aj&&(a.dc=a.b.createProgram(),a.b.attachShader(a.dc,a.ok),a.b.attachShader(a.dc,a.Aj),a.b.bindAttribLocation(a.dc,0,"aPosition"),a.b.bindAttribLocation(a.dc,1,"aTexCoord"),a.b.linkProgram(a.dc),a.b.getProgramParameter(a.dc,a.b.LINK_STATUS)||alert("poi shader: "+a.b.getProgramInfoLog(a.dc)));a.pk=fg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.Bj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");a.pk&&a.Bj&&(a.ec=a.b.createProgram(),a.b.attachShader(a.ec,a.pk),a.b.attachShader(a.ec,a.Bj),a.b.bindAttribLocation(a.ec,0,"aPosition"),a.b.bindAttribLocation(a.ec,1,"aColor"),a.b.linkProgram(a.ec),a.b.getProgramParameter(a.ec,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.ec)));a.rk=fg(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.Dj=fg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
a.rk&&a.Dj&&(a.Mb=a.b.createProgram(),a.b.attachShader(a.Mb,a.rk),a.b.attachShader(a.Mb,a.Dj),a.b.bindAttribLocation(a.Mb,0,"aPosition"),a.b.bindAttribLocation(a.Mb,1,"aTexCoord"),a.b.linkProgram(a.Mb),a.b.getProgramParameter(a.Mb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Mb)))}
function fg(a,b,c){var d=a.b.createShader(b);if(!d)return m;a.b.shaderSource(d,c);a.b.compileShader(d);return!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)?(b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),m):d};function gg(a){this.c=a;this.si=[];this.zb=[]}x("TextureManager",gg);gg.prototype.Ck=function(a,b,c,d){var e=this.si[a];e?(this.zb[a]+=1,b(e)):(e=new M(this.c),O(e,a,b,c,d),this.zb[a]=1,this.si[a]=e);return e};gg.prototype.CreateTexture=gg.prototype.Ck;gg.prototype.Ek=function(a){this.zb[a]-=1;0==this.zb[a]&&(this.si[a].j(),delete this.si[a],delete this.zb[a])};gg.prototype.DestroyTexture=gg.prototype.Ek;var hg=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function ig(a){this.c=a;this.b=a.b;var b=0,c=0;this.Ph=new L(this.c);for(var a=[],d=[],e=0;16>e;e++)for(var f=0;16>f;f++){var b=0.0625*e,g=0.0625*f;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=4*c;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Ph;0==a.length%5&&(c.q=new Float32Array(a),c.mode="font",c.K=5);fd(this.Ph,d,"TRIANGLES");a=new M(this.c);O(a,R+"font.png");this.Ph.Ub(a);new K}
ig.prototype.ud=function(a,b,c,d,e){d==m&&(d=1);this.c.mc();this.c.Si();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new K,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=hg[g]/2*d,f.wd(d,d,1),f.Nk(f,b+j,c,0),this.c.nc(f),this.Ph.fa(i,6,12*g,e),j+=hg[g]/2*d;this.c.Yc();this.c.b.disable(this.c.b.BLEND)};ig.prototype.Hk=function(a){for(var b=0,c=0;c<a.length;c++)b+=hg[a.charCodeAt(c)];return b};
ig.prototype.$m=ea(32);x("Font",ig);ig.prototype.DrawText=ig.prototype.ud;ig.prototype.GetStringHeight=ig.prototype.$m;ig.prototype.GetStringWidth=ig.prototype.Hk;function jg(a){this.c=a;this.b=a.b;this.ue=o;this.gk=this.Kb=this.r=m;this.p=this.l=0}
jg.prototype.Lf=function(a,b){this.Ge=document.createElement("canvas");this.I=this.Ge.getContext("2d");this.Ea=new M(this.c);this.Ea.f=this.b.createTexture();this.text=a;this.I.save();this.I.font=b.fontString;this.I.textAlign="left";this.I.textBaseline="top";this.I.lineWidth=b.lineWidth;this.I.strokeStyle=b.strokeStyle;var c=this.I.measureText(this.text),c=Math.round(c.width);this.I.restore();this.l=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.p=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.jc=Jc(this.l);this.ic=Jc(this.p);this.Ea.width=this.jc;this.Ea.height=this.ic;this.I.canvas.width=this.jc;this.I.canvas.height=this.ic;this.I.fillStyle=b.backgroundColor;this.I.fillRect(0,0,this.l,this.p);this.I.shadowOffsetX=b.shadowOffsetX;this.I.shadowOffsetY=b.shadowOffsetY;this.I.shadowBlur=b.shadowBlur;this.I.shadowColor=b.shadowColor;this.I.fillStyle=b.fontColor;this.I.font=b.fontString;this.I.textAlign=
"left";this.I.textBaseline="middle";this.I.lineWidth=b.lineWidth;this.I.strokeStyle=b.strokeStyle;this.I.strokeText(a,b.lineWidth,this.p/2);this.I.fillText(a,b.lineWidth,this.p/2);this.ag();this.r=new L(this.c);this.r.Ub(this.Ea);c=[];c.push(-this.l/2,this.p/2,0,0,0);c.push(-this.l/2,-this.p/2,0,0,1/this.ic*this.p);c.push(this.l/2,-this.p/2,0,1/this.jc*this.l,1/this.ic*this.p);c.push(this.l/2,this.p/2,0,1/this.jc*this.l,0);ed(this.r,c);fd(this.r,[0,1,2,0,2,3],"TRIANGLES");this.r.l=this.l;this.r.p=
this.p;return this.r};
jg.prototype.Jf=function(a,b){this.Ge=document.createElement("canvas");this.I=this.Ge.getContext("2d");this.Ea=new M(this.c);this.Ea.f=this.b.createTexture();kg(this,a,b);this.r=new L(this.c);this.r.Ub(this.Ea);var c=[];c.push(-this.l/2,this.p/2,0,0,0);c.push(-this.l/2,-this.p/2,0,0,1/this.ic*this.p);c.push(this.l/2,-this.p/2,0,1/this.jc*this.l,1/this.ic*this.p);c.push(this.l/2,this.p/2,0,1/this.jc*this.l,0);ed(this.r,c);fd(this.r,[0,1,2,0,2,3],"TRIANGLES");this.r.O=[-this.l/2,-this.p/2,0];this.r.ga=
[this.l/2,this.p/2,0];this.r.l=this.l;this.r.p=this.p;return this.r};
function kg(a,b,c){a.l=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.p=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.jc=Jc(a.l);a.ic=Jc(a.p);a.Ea.width=a.jc;a.Ea.height=a.ic;a.I.canvas.width=a.jc;a.I.canvas.height=a.ic;a.I.fillStyle=c.backgroundColor;a.I.fillRect(0,0,a.l,a.p);a.I.shadowOffsetX=c.shadowOffsetX;a.I.shadowOffsetY=c.shadowOffsetY;a.I.shadowBlur=c.shadowBlur;a.I.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.I.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.ag()};d.src=b}
jg.prototype.ag=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Ea.f);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Ge);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,m);this.Ea.yb=i};jg.prototype.j=function(){this.r&&(this.r.j(),this.r=m);this.Kb&&(this.Kb.j(),this.Kb=m);this.gk&&(this.gk.j(),this.gk=m);this.Ea&&(this.Ea.j(),this.Ea=m);this.Ge&&(document.removeChild(this.Ge),this.Ge=m)};function lg(a){this.c=a;this.b=a.b;this.Mc=this.Pc=this.Oc=0;this.ue=o;this.Ba=this.ua=this.Kb=m;this.scale=20;this.text=this.jf="";this.jg=new jg(a);this.Eg=this.Hg=0;this.lm=this.mm=1;this.km=0;this.jm=1;this.ik=0;this.hk=Infinity;this.Uj=new Yc(1,1,1,1);this.Uh={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.Mg={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",fontColor:"rgba(255,255,255,1.0)",
lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"}}s=lg.prototype;s.gn=function(a,b,c,d){this.jf=c?c:"";b&&(this.Mg=b);this.text=a;d&&(this.Uh=d);c&&(this.ua=this.jg.Jf(this.jf,this.Uh));this.jg=new jg(this.c);a&&(this.Ba=this.jg.Lf(a,this.Mg))};
s.sa=function(a,b,c,d){this.ua&&this.Ba?(this.Hg=this.ua.l+this.Ba.l,this.Eg=this.ua.p):this.ua?(this.Hg=this.ua.l,this.Eg=this.ua.p):this.Ba&&(this.Hg=this.Ba.l,this.Eg=this.Ba.p);this.ua&&this.ua.Yf(a,b,c,1.1920930376163766E-7*-(this.ua.l/2+(this.Hg/2-this.ua.l))*this.scale,1.1920930376163766E-7*(this.Eg/2)*this.scale,0);this.Ba&&this.Ba.Yf(a,b,c,1.1920930376163766E-7*(this.Ba.l/2+(this.Hg/2-this.Ba.l))*this.scale,1.1920930376163766E-7*(this.Eg/2)*this.scale,0);this.we=a;this.xe=b;this.ye=c;if(d!=
m){this.ue=i;var d=this.jg,e=this.mm,f=this.lm,g=this.km,j=this.jm;d.Kb=new L(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);bd(d.Kb,k);fd(d.Kb,[0,1],"LINES");this.Kb=d.Kb}};
s.fa=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.ue&&this.Kb.fa();this.ua&&kd(this.ua);this.Ba&&kd(this.Ba);this.c.mc();var a=new K;a.wd(1.1920930376163766E-7*this.scale,1.1920930376163766E-7*this.scale,1);this.c.nc(a);this.ua&&this.ua.fa(o,0,0,m,this.Uj);this.Ba&&this.Ba.fa(o,0,0,m,this.Uj);this.c.Yc();this.c.b.disable(this.c.b.BLEND)};
s.qh=function(a){this.scale=a;this.ue?this.sa(this.we,this.xe,this.ye,0):this.sa(this.we,this.xe,this.ye,m)};s.Uf=function(a,b){var c=o,d=o;if(this.ua)var e=this.c.Vd(a,b,this.c.ha,i),c=this.ua.zd(e.x,e.y,e.n,e.gd,e.hd,e.jd);this.Ba&&(e=this.c.Vd(a,b,this.c.ha,i),d=this.Ba.zd(e.x,e.y,e.n,e.gd,e.hd,e.jd));return c||d};s.j=function(){this.jg=m;this.Mc=this.Pc=this.Oc=0;this.ua&&this.ua.j();this.Ba&&this.Ba.j();this.Kb&&this.Kb.j();this.ue=o;this.Kb=m;this.scale=0};x("Poi",lg);lg.prototype.Draw=lg.prototype.fa;
lg.prototype.SetContent=lg.prototype.gn;lg.prototype.SetPosition=lg.prototype.sa;lg.prototype.SetSize=lg.prototype.qh;lg.prototype.Destroy=lg.prototype.j;function mg(a){this.c=a;this.Fg=[];this.zb=[];this.$e=m;this.Gg=[];this.Ae=[]}s=mg.prototype;s.Bk=function(a,b,c,d){var e=new lg(this.c);b&&(e.Mg=b);e.text=a;d&&(e.Uh=d);c&&(e.jf=c,e.ua=this.Jf(c,e.Uh));a&&(e.Ba=this.Lf(a,e.Mg));return e};s.Dk=function(a){a.ua&&ng(this,a.jf);a.Ba&&og(this,a.text,a.Mg)};s.Jf=function(a,b){var c=this.Fg[a];if(c){this.zb[a]+=1;var d=new L(this.c);d.da(c);d.l=c.l;d.p=c.p;this.Fg[a]=d}else this.$e=new jg(this.c),d=this.$e.Jf(a,b),this.zb[a]=1,this.Fg[a]=d,this.$e=m;return d};
function ng(a,b){a.zb[b]-=1;0==a.zb[b]&&(a.Fg[b].f.j(),delete a.Fg[b],delete a.zb[b])}s.Lf=function(a,b){var c=this.Gg[a+b.id];if(c){this.Ae[a+b.id]+=1;var d=new L(this.c);d.da(c);d.l=c.l;d.p=c.p;this.Gg[a+b.id]=d}else this.$e=new jg(this.c),d=this.$e.Lf(a,b),this.Ae[a+b.id]=1,this.Gg[a+b.id]=d,this.$e=m;return d};function og(a,b,c){a.Ae[b+c.id]-=1;0==a.Ae[b+c.id]&&(a.Gg[b+c.id].f.j(),delete a.Gg[b+c.id],delete a.Ae[b+c.id])}
s.zk=function(a,b,c){a.ua=this.Jf(b,c);a.sa(a.we,a.xe,a.ye,m);ng(this,a.jf);a.jf=b};s.Ak=function(a,b,c){a.Ba=this.Lf(b,c);a.sa(a.we,a.xe,a.ye,m);og(this,a.text,c);a.text=b};x("PoiManager",mg);mg.prototype.CreatePoi=mg.prototype.Bk;mg.prototype.DestroyPoi=mg.prototype.Dk;mg.prototype.ChangePoiIcon=mg.prototype.zk;mg.prototype.ChangePoiText=mg.prototype.Ak;var pg=new Date,qg=new Date,rg=[],sg=0,tg=m,ug=m;function vg(){for(var a=0;a<rg.length;a++){var b=rg[a];b.nl&&(0<b.sk&&0<b.Gj?(b.X.width=window.innerWidth-b.sk,b.X.height=window.innerHeight-b.Gj):(b.X.width=window.innerWidth,b.X.height=window.innerHeight));wg(b,b.X.width,b.X.height)}}
function $(){this.ed=this.dd=this.Dd=this.Ed=this.Cd=m;this.Nc=o;this.height=this.width=0;this.nl=o;this.Qa=this.X=this.b=m;this.lj=0.670588;this.kj=0.921569;this.ij=this.jj=1;this.Mm=this.Nm=this.Pm=this.Om=0;this.Vg=this.Ug=20;this.Ab=new K;this.eb=new K;this.uc=new K;this.wg=new K;this.ha=new K;this.Kj=new K;this.Zd=[];this.Ue=new Pc;this.Jm=[];this.Km=[];rg[sg]=this;sg++;this.Rj=this.g=this.wf=m;this.Sd=1;this.Wa=this.ri=this.tf=m;this.Gj=this.sk=0}
function xg(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),m;var c=yg(a);c===m&&b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');
return c}function yg(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=m,d=0;d<b.length;++d){try{c=a.getContext(b[d],{antialias:o})}catch(e){}if(c)break}return c}s=$.prototype;
s.Ik=function(a,b){var c=document.getElementById(a);if(this.b=xg(c)){this.X=c;b&&(this.Vg=this.Ug=0,c.width=window.innerWidth-this.Ug,c.height=window.innerHeight-this.Vg,this.nl=i);for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(wg(this,this.X.width,this.X.height),this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.Qa=new dg(this.b),eg(this.Qa),
this.wf=new ig(this),this.Rj=new M(this),O(this.Rj,R+"nodata.png"),this.tf=new mg(this),this.ri=new gg(this),this.Wa=new zg(this),this.Cd&&this.Cd(this),S(window,"resize",vg,o,this),qg=new Date,"undefined"!=typeof window&&window.rm(Ag,this.X),this.X.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return o},S(window,"unload",this.vd,o,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
s.vd=function(){this.ed=this.dd=this.Dd=this.Ed=this.Cd=m;this.g&&(this.g.j(),this.g=m);this.Qa=this.X=this.b=m;this.Jm=[];this.Km=[];this.ri=this.tf=this.g=this.wf=m;S(window,"resize",m,o,this)};s.Sk=function(a,b,c,d){0<=a&&1>=a&&0<=b&&1>=b&&0<=c&&1>=c&&0<=d&&1>=d&&(this.lj=a,this.kj=b,this.jj=c,this.ij=d)};s.Zm=function(){return{vo:this.lj,mo:this.kj,ho:this.jj,fo:this.ij}};s.Ai=function(){var a=this.b;a.clearColor(this.lj,this.kj,this.jj,this.ij);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)};
s.cl=function(a,b,c,d){this.Om=a;this.Pm=b;this.Nm=c;this.Mm=d;this.b.viewport(a,b,c,d)};s.an=function(){return{x:this.Om,y:this.Pm,Do:this.Nm,no:this.Mm}};s.$k=function(a){this.uc.da(a);Bg(this)};s.Ti=function(a){this.eb.da(a);Bg(this)};s.nc=function(a){this.Ab.da(a);Bg(this)};function Bg(a){a.wg.aa(a.eb,a.Ab);a.ha.aa(a.uc,a.wg);a.Kj.Le(a.wg);a.Kj.Te()}s.cn=function(a){var b=new M(this);O(b,a);this.Km.push(b);return b};s.bn=function(a){var b=new L(this);id(b,a);this.Jm.push(b);return b};
s.mc=function(){var a=this.Ue,b=this.eb,c=new K;c.da(b);a.dh.push(c);a=this.Ue;b=this.Ab;c=new K;c.da(b);a.bh.push(c);a=this.Ue;b=this.uc;c=new K;c.da(b);a.Me.push(c)};s.Yc=function(){this.Ab.da(this.Ue.bh.pop());this.eb.da(this.Ue.dh.pop());this.uc.da(this.Ue.Me.pop());Bg(this)};s.Si=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Ab.ah();this.eb.ah();this.uc.Mk(0,b,0,a);Bg(this)};
s.Kf=function(){0==this.Sd?G(H("owg.engine3d"),"** WARNING: not implemented"):1==this.Sd?(this.g=new cg(this),this.g.G.Fk(this.width,this.height)):2==this.Sd?G(H("owg.engine3d"),"** WARNING: not implemented"):3==this.Sd&&G(H("owg.engine3d"),"** WARNING: not implemented")};s.ud=function(a,b,c,d,e){this.wf&&this.wf.ud(a,b,c,d,e)};s.Di=function(a){var b=Array(2);b[0]=0;b[1]=0;this.wf&&(b[0]=this.wf.Hk(a),b[1]=32);return b};
s.Vd=function(a,b,c,d){var e=new K;e.Le(c);var f=this.height-b-1,b=2*(a-0)/this.width-1,c=2*(f-0)/this.height-1,a=2*(a-0)/this.width-1,f=2*(f-0)/this.height-1,g=new J;g.u(b,c,-1);b=e.La(g);c=new J;c.u(a,f,1);c=e.La(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.n=d[2];b.gd=e;b.hd=a;b.jd=c;return b};
"undefined"!=typeof window&&(window.rm=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)});
function Ag(){pg=new Date;var a=pg.valueOf()-qg.valueOf();qg=pg;for(var b=0;b<rg.length;b++){var c=rg[b];if(c.g){var d=c.g,e=a;d.bc.Qe(e);d.Ib.Qe(e);d.G.Qe(e);d.qd.Qe(e)}c.Ed&&c.Ed(a,c);c.cl(0,0,c.width,c.height);c.Ai();if(c.g){var d=c.g,e=d.Tc,f=d.Ab,g=new K;g.da(f);e.bh.push(g);e=d.Tc;f=d.eb;g=new K;g.da(f);e.dh.push(g);e=d.Tc;f=d.Hn;g=new K;g.da(f);e.Me.push(g);d.bc.Xc(d.Tc);d.Ib.Xc(d.Tc);d.G.Xc(d.Tc);d.qd.Xc(d.Tc);d.Tc.bh.pop();d.Tc.dh.pop();d.Tc.Me.pop();c.g.Ta()}c.Dd&&c.Dd(c);typeof window!=
"undefined"&&window.rm(Ag,c.X)}}function wg(a,b,c){a.width=b;a.height=c;a.ed&&a.ed(b,c,a);a.g&&a.g.G.Fk(b,c)}s=$.prototype;s.Tk=ca("Cd");s.rh=ca("Ed");s.al=ca("Dd");s.Wk=function(a){if(this.fe){Qd(this.fe);this.fe=m}if(a)this.fe=S(this.X,ud,function(b){a(b.button,b.clientX-this.Ug/2,b.clientY-this.Vg/2,this)},o,this)};s.Yk=function(a){if(this.he){Qd(this.he);this.he=m}if(a)this.he=S(this.X,vd,function(b){a(b.button,b.clientX-this.Ug/2,b.clientY-this.Vg/2,this)},o,this)};
s.Xk=function(a){if(this.ge){Qd(this.ge);this.ge=m}if(a)this.ge=S(this.X,wd,function(b){a(b.clientX-this.Ug/2,b.clientY-this.Vg/2,this)},o,this)};s.Zk=function(a){if(this.dd){Qd(this.dd);this.dd=m}if(a){var b=new If(this.X);this.dd=S(b,wd,function(b){b.preventDefault();a(b.Kh,this)},o,this)}};s.bl=ca("ed");s.Uk=function(a){if(tg){Qd(tg);tg=m}a&&(tg=S(window,xd,function(b){a(b.keyCode,this)},o,this))};s.Vk=function(a){if(ug){Qd(ug);ug=m}a&&(ug=S(window,yd,function(b){a(b.keyCode,this)},o,this))};
s.Xd=function(a,b,c){this.g&&this.g.G.Oa.Xd(a,b,c)};s.ih=function(a,b,c,d){this.g&&this.g.G.Oa.ih(a,b,c,d)};s.Wf=function(a,b){return this.g?this.g.G.ci.Wf(a,b):m};s.Yd=function(a,b){return this.g?this.g.G.Qh.Yd(a,b):-1};s.Vf=function(a,b){return this.g?this.g.G.Ch.Vf(a,b):-1};s.Wg=function(){return this.g?this.g.G.Oa.Wg():0};s.Sm=function(){return this.g?this.g.bc.Wd().elevation:0};s.Zg=function(a,b){return this.g?this.g.G.Oa.Zg(a,b):{hasvalue:o,elevation:0,lod:-1}};
s.Ci=function(a,b,c,d,e,f,g){this.Wa.Ci(a,b,c,d,e,f,g)};s.mh=function(a){this.Wa.mh(a)};s.$f=function(){this.Wa.$f()};function ze(a){if(a.Zd.length<1)Cg("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.Zd.pop(),c=a.Zd.length;c>0?a.Zd[c-1].bg():b.el()}}x("engine3d",$);$.prototype.AltitudeAboveEllipsoid=$.prototype.Sm;$.prototype.AltitudeAboveGround=$.prototype.Wg;$.prototype.Clear=$.prototype.Ai;$.prototype.CreateScene=$.prototype.Kf;
$.prototype.DrawText=$.prototype.ud;$.prototype.GetClearColor=$.prototype.Zm;$.prototype.GetDirectionMousePos=$.prototype.Vd;$.prototype.GetViewport=$.prototype.an;$.prototype.InitEngine=$.prototype.Ik;$.prototype.LoadMesh=$.prototype.bn;$.prototype.LoadTexture=$.prototype.cn;$.prototype.PickGlobe=$.prototype.Xd;$.prototype.PopMatrices=$.prototype.Yc;$.prototype.PushMatrices=$.prototype.mc;$.prototype.SetClearColor=$.prototype.Sk;$.prototype.SetInitCallback=$.prototype.Tk;
$.prototype.SetKeyDownCallback=$.prototype.Uk;$.prototype.SetKeyUpCallback=$.prototype.Vk;$.prototype.SetModelMatrix=$.prototype.nc;$.prototype.SetMouseDownCallback=$.prototype.Wk;$.prototype.SetMouseMoveCallback=$.prototype.Xk;$.prototype.SetMouseUpCallback=$.prototype.Yk;$.prototype.SetMouseWheelCallback=$.prototype.Zk;$.prototype.SetOrtho2D=$.prototype.Si;$.prototype.SetProjectionMatrix=$.prototype.$k;$.prototype.SetRenderCallback=$.prototype.al;$.prototype.SetResizeCallback=$.prototype.bl;
$.prototype.SetTimerCallback=$.prototype.rh;$.prototype.SetViewMatrix=$.prototype.Ti;$.prototype.SetViewport=$.prototype.cl;$.prototype.GetElevationAt=$.prototype.Zg;$.prototype.OnDestroy=$.prototype.vd;function Dg(a){a=a.Cb;a.Cd&&a.Cd(a.id)}function Eg(a,b){var c=b.Cb;c.Ed&&c.Ed(c.id,a)}function Fg(a){a=a.Cb;a.Dd&&a.Dd(a.id)}function Gg(a,b,c,d){d=d.Cb;d.fe&&d.fe(d.id,a,b,c)}function Hg(a,b,c,d){a=d.Cb;a.he&&a.he(a.id)}function Ig(a,b,c){c=c.Cb;c.ge&&c.ge(c.id,a,b)}function Jg(a,b){var c=b.Cb;c.dd&&c.dd(c.id,a)}function Kg(a,b,c){c=c.Cb;c.ed&&c.ed(c.id,a,b)}function Lg(a,b){var c=b.Cb;c.mj&&c.mj(c.id,a)}function Mg(a,b){var c=b.Cb;c.nj&&c.nj(c.id,a)}
function Ng(a){var b=a.Cb;b.de&&b.de(a.Cb.id)}function Og(a){var b=a.Cb;b.ee&&b.ee(a.Cb.id)}function Pg(){this.name="ogContext";this.type=A;this.Dl=o;this.g=this.c=m;this.fontcolor=new Yc(1,1,1,1);this.ee=this.de=this.Cd=this.Ed=this.Dd=this.ed=this.nj=this.mj=this.ge=this.dd=this.he=this.fe=m}Pg.prototype=new E;
Pg.prototype.ya=function(a){this.Cd=a.cbfInit;this.ed=a.cbfResize;a.fullscreen&&(this.Dl=i);this.c=new $;this.c.Cb=this;a.canvas?this.c.Ik(a.canvas,this.Dl):G(H("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.Tk(Dg);this.c.rh(Eg);this.c.al(Fg);this.c.Wk(Gg);this.c.Yk(Hg);this.c.Xk(Ig);this.c.Zk(Jg);this.c.bl(Kg);this.c.Uk(Lg);this.c.Vk(Mg);this.c.Wa.de=Ng;this.c.Wa.ee=Og};Pg.prototype.ud=function(a,b,c){this.c&&this.c.ud(a,b,c,1,this.fontcolor)};
Pg.prototype.Di=function(a){return this.c?this.c.Di(a):m};Pg.prototype.Na=function(){this.c.vd();this.c=m};function Qg(){this.name="ogWorld";this.type=Aa}Qg.prototype=new E;Qg.prototype.ya=function(a){if(a==m)G(H("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;a.scenetype==bb?(b.Sd=1,b.Kf(),b.g&&(b.g.Gf=this)):a.scenetype==cb?(b.Sd=2,b.Kf(),b.g&&(b.g.Gf=this)):a.scenetype==db?(b.Sd=3,b.Kf(),b.g&&(b.g.Gf=this)):a.scenetype==eb&&(b.Sd=0,b.Kf(),b.g&&(b.g.Gf=this))}};
Qg.prototype.ph=function(a){var b=this.parent.parent.c.g.G.Oa;switch(a){case 0:b.ph(qf);break;case 1:b.ph(rf)}};function Rg(){this.name="ogScene";this.type=C;this.be=this.Gf=m;this.Eh=[];this.Bc=bb}Rg.prototype=new E;s=Rg.prototype;s.ya=function(a){a==m?G(H("owg.ogScene"),"** ERROR: no options for scene creation!"):a.type&&(this.Bc=a.type)};s.Uf=function(a,b){var c={};this.parent.c.Xd(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};s.Wf=function(a,b){var c=this.parent.c.Wf(a,b);return c?c.Nn.id:-1};s.Yd=function(a,b){return this.parent.c.Yd(a,b)};
s.Vf=function(a,b){return this.parent.c.Vf(a,b)};function Sg(a,b){var c=D(b);if(c&&c.type==Pa){var d=Mc(c);d.sa(c.Pc,c.Oc,c.Mc);d.Re(I(c.Ka),I(c.pitch),I(c.hc));d.ub=c}a.be=c};function Tg(){this.name="ogPOI";this.type=Ua;this.F=o;this.m=this.qa=m}Tg.prototype=new E;
Tg.prototype.ya=function(a){var b="",c=40,d=m;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new Q(e[0],e[1],e[2])).ja(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);a.textstyle&&(this.Ie=a.textstyle);a.iconstyle&&(this.ke=a.iconstyle);this.qa=this.parent.parent.c.tf.Bk(b,this.Ie,d,this.ke);this.qa.F=o;a.flagpoleColor&&(b=this.qa,d=a.flagpoleColor,b.mm=d[0],b.lm=d[1],b.km=d[2],b.jm=d[3]);a.flagpole==i?this.qa.sa(f[0],f[1],f[2],0):this.qa.sa(f[0],f[1],f[2],m);this.qa.qh(c);this.qa.Nn=this;(c=Ug(this))&&
c.Aa.push(this.qa);a.visibilityRange&&(c=this.qa,a=a.visibilityRange,c.ik=1.1920930376163766E-4*a[0],c.hk=1.1920930376163766E-4*a[1])};Tg.prototype.Na=function(){var a=this.parent.parent,b=Ug(this);if(b)for(var c=this.qa,d=0;d<b.Aa.length;d++)if(b.Aa[d]==c){b.Aa.splice(d,1);break}a.c.tf.Dk(this.qa)};Tg.prototype.$=function(){this.F=i;this.qa.F=i};Tg.prototype.ba=function(){this.F=o;this.qa.F=o};function Ug(a){var b=m,a=a.parent.parent.c;a.g&&a.g.G&&(b=a.g.G.ci);return b};function Vg(){this.name="ogPOILayer";this.type=Ea;this.F=o;this.Aa=[];this.ke=this.Ie=m;this.vn={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.un={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}Vg.prototype=new E;
function Wg(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")"}a.fontColor&&(b=a.fontColor,a.fontColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.strokeColor&&(b=a.strokeColor,a.strokeStyle="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.shadowColor&&(b=a.shadowColor,a.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}Vg.prototype.ya=function(a){a.textstyle?(Wg(a.textstyle),this.Ie=a.textstyle):this.Ie=this.vn;a.iconstyle?(Wg(a.iconstyle),this.ke=a.iconstyle):this.ke=this.un};Vg.prototype.Na=function(){for(var a=0;a<this.Aa.length;a++)F(this.Aa[a])};Vg.prototype.$=function(){this.F=i;for(var a=0;a<this.Aa.length;a++)this.Aa[a].$()};Vg.prototype.ba=function(){this.F=o;for(var a=0;a<this.Aa.length;a++)this.Aa[a].ba()};function Xg(){this.name="ogElevationLayer";this.type=Ca;this.ug=-1}Xg.prototype=new E;Xg.prototype.$g=function(){var a=m,b=this.parent.parent.parent.c;b.g&&b.g.G&&(a=b.g.G.Oa);return a};Xg.prototype.xi=function(a){var b=this.$g();b&&(this.ug=b.xi(a))};Xg.prototype.ya=function(a){this.xi(a)};function zg(a){this.c=a;this.b=a.b;this.re=m;this.Il=this.le=o;this.eh=[];this.fh=[];this.gh=[];this.hh=[];this.Fm=2E3;this.En=new Q;this.ee=this.de=m}function Yg(a,b,c,d){var e=a.re.Wd(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.kg=Fc*Math.acos(Math.sin(I(f[1]))*Math.sin(I(g[1]))+Math.cos(I(f[1]))*Math.cos(I(g[1]))*Math.cos(I(g[0]-f[0])));isNaN(a.kg)&&(a.kg=0);e=[e.longitude,e.latitude,e.elevation+a.kg/4];b=[b,c,d+a.kg/4];a.eh=f;a.fh=e;a.gh=b;a.hh=g;a.Il=i}
function ue(a,b,c,d,e,f,g){a.re=a.c.g.bc;var j=a.re.Of();a.ak=j.Ka;a.Zj=j.pitch;a.$j=j.hc;e!=m&&f!=m&&g!=m?(a.ym=I(e),a.wm=I(f),a.xm=I(g)):(a.ym=a.ak,a.wm=a.Zj,a.xm=a.$j);a.ef=a.ym-a.ak;Math.abs(a.ef)>Math.PI&&(a.ef=0<a.ef?a.ef-2*Math.PI:a.ef+2*Math.PI);a.cf=a.wm-a.Zj;Math.abs(a.cf)>Math.PI&&(a.cf=0<a.cf?a.cf-2*Math.PI:a.cf+2*Math.PI);a.df=a.xm-a.$j;Math.abs(a.df)>Math.PI&&(a.df=0<a.df?a.df-2*Math.PI:a.df+2*Math.PI);Yg(a,b,c,d);a.de&&a.de(a.c);a.c.rh(function(b){if(a.Il){a.Nj=a.Nj+b;b=a.Nj/a.Fm;a.w=
0.5*Math.sin(Math.PI*b-Math.PI/2)+0.5;if(b>1){a.w=1;a.$f()}var b=Math.pow(1-a.w,3)*a.eh[0]+3*a.w*Math.pow(1-a.w,2)*a.fh[0]+3*a.w*a.w*(1-a.w)*a.gh[0]+Math.pow(a.w,3)*a.hh[0],c=Math.pow(1-a.w,3)*a.eh[1]+3*a.w*Math.pow(1-a.w,2)*a.fh[1]+3*a.w*a.w*(1-a.w)*a.gh[1]+Math.pow(a.w,3)*a.hh[1],d=Math.pow(1-a.w,3)*a.eh[2]+3*a.w*Math.pow(1-a.w,2)*a.fh[2]+3*a.w*a.w*(1-a.w)*a.gh[2]+Math.pow(a.w,3)*a.hh[2];a.En.Hc(b,c,d);a.re.sa(b,c,d);a.re.Re(a.ak+a.w*a.ef,a.Zj+a.w*a.cf,a.$j+a.w*a.df);a.w==1&&a.$f()}});a.w=0;a.Nj=
0;a.le=i}zg.prototype.$f=function(){this.c.rh(m);this.le=o;this.ee&&this.ee(this.c)};
zg.prototype.Ci=function(a,b,c,d,e,f,g){this.re=this.c.g.bc;var d=1.1920930376163766E-7*d,j=new Q(a,b,c),k=[];j.ja(k);var l=new K;l.Ud(a,b);a=new K;a.$c(k[0],k[1],k[2]);k=new K;k.aa(a,l);l={};e!=m&&f!=m&&g!=m?(l.Ka=I(e),l.pitch=I(f),l.hc=I(g)):l=this.re.Of();a=l.pitch-Math.PI/2;d=new J(d*Math.sin(a)*Math.cos(l.Ka),d*Math.sin(a)*Math.sin(l.Ka),d*Math.cos(a));d=k.La(d).a;j.Hc(d[0],d[1],d[2]);d=j.H[1];k=j.H[0];j=j.H[2];j>c?ue(this,k,d,j,e,f,g):ue(this,k,d,-j,l.Ka,-Ic(l.pitch),l.hc)};
zg.prototype.mh=ca("Fm");function Gf(a,b){this.c=a;this.b=a.b;this.ia=this.rb=this.V=this.J=this.q=m;this.pd=new K;this.Vj=[];this.options=b}
Gf.prototype.oh=function(a){this.Vj=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];ff(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];ff(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],j=0;j<this.options.segmentation+1;j++){var k=f[2]+g[2]*j/this.options.segmentation,l=[];gf(f[0]+g[0]*j/this.options.segmentation,f[1]+g[1]*j/this.options.segmentation,l);l[2]=k;k=new Q(l[0],l[1],l[2]);l=[];k.ja(l);c.push(l[0]);c.push(l[1]);c.push(l[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)k=new Q(a[e][0],a[e][1],a[e][2]),l=[],k.ja(l),c.push(l[0]),c.push(l[1]),c.push(l[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.Cg=e*this.options.segmentation;this.q=new Float32Array(c);this.J=new Uint16Array(d);
this.Bb=d.length;this.Ad()};Gf.prototype.j=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=m);this.rb&&(this.b.deleteBuffer(this.rb),this.V=m);this.V=this.rd=m};
Gf.prototype.fa=function(){this.Vj!=m&&(this.V||this.Ad(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.rb),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,o,28,12),hd(this.c.Qa,this.c.ha),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,this.Bb,
this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};Gf.prototype.Ad=function(){this.V=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bufferData(this.b.ARRAY_BUFFER,this.q,this.b.STATIC_DRAW);this.rb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.rb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.J,this.b.STATIC_DRAW)};function Zg(){this.name="ogEarthPolylineObject";this.type=$a;this.options=this.Hd=m}Zg.prototype=new E;s=Zg.prototype;s.ya=function(a){this.options=a;this.Hd=new Gf(this.parent.parent.parent.c,a);this.Hd.oh(a.coords)};s.Na=function(){this.Hd&&(this.Hd.j(),this.Hd=m,this.status=3)};s.$=function(){this.Hd.F=i};s.yd=p();s.ba=function(){this.Hd.F=o};function $g(a){this.c=a;this.b=a.b;this.Mc=this.Pc=this.Oc=0;this.canvas=m;this.p=this.l=0;this.I=this.r=m;this.hm=-1}s=$g.prototype;
s.ag=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Ea.f);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,m);this.Ea.yb=i};s.sa=function(a,b,c){var d=[];(new Q(a,b,c)).ja(d);this.r.Yf(d[0],d[1],d[2],0,0,0)};
s.fa=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.r&&kd(this.r);this.c.mc();var a=new K;a.wd(1.1920930376163766E-7*this.scale,1.1920930376163766E-7*this.scale,1);this.c.nc(a);this.r&&this.r.fa(o,0,0,m,m);this.c.Yc();this.c.b.disable(this.c.b.BLEND)};s.qh=ca("scale");
s.Uf=function(a,b){if(this.r)var c=this.c.Vd(a,b,this.c.ha,i),d=this.r.zd(c.x,c.y,c.n,c.gd,c.hd,c.jd);if(d){var e=c=0,f=d.Rb,g=d.Cc,j=1-f-g;0==d.Gm?(c=f*-this.l/2+g*this.l/2+j*-this.l/2/(f+g+j)+this.l/2,e=f*this.p/2+g*this.p/2+j*-this.p/2/(f+g+j)+this.p/2):1==d.Gm&&(c=f*this.l/2+g*this.l/2+j*-this.l/2/(f+g+j)+this.l/2,e=f*this.p/2+g*-this.p/2+j*-this.p/2/(f+g+j)+this.p/2);c/=this.l;e/=this.p;d={};d.id=this.hm;d.x=c;d.y=e;return d}return m};s.j=function(){this.r&&(this.r.j(),this.Ea.j())};function ah(){this.name="ogBillboard";this.type=Va;this.status=gb;this.m=-1;this.F=o}ah.prototype=new E;s=ah.prototype;
s.ya=function(a){if(a==m)G(H("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==m)G(H("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=C)G(H("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.Yb=new $g(this.parent.parent.c);this.Yb.hm=this.id;var b=this.Yb,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.I=b.canvas.getContext("2d");b.l=b.I.canvas.width;b.p=b.I.canvas.height;
break;case "[object HTMLVideoElement]":b.l=c.videoWidth,b.p=c.videoHeight}b.Ea=new M(b.c);b.Ea.f=b.b.createTexture();b.r=new L(b.c);b.r.Ub(b.Ea);b.jc=b.l;b.ic=b.p;c=[];c.push(-b.l/2,b.p/2,0,0,0);c.push(-b.l/2,-b.p/2,0,0,1/b.ic*b.p);c.push(b.l/2,-b.p/2,0,1/b.jc*b.l,1/b.ic*b.p);c.push(b.l/2,b.p/2,0,1/b.jc*b.l,0);ed(b.r,c);fd(b.r,[0,1,2,0,2,3],"TRIANGLES");b.r.O=[-b.l/2,-b.p/2,0];b.r.ga=[b.l/2,b.p/2,0];b.r.l=b.l;b.r.p=b.p;b.ag();a=a.position;this.Yb.sa(a[0],a[1],a[2]);bh(this).wi(this.Yb)}};
s.Na=function(){this.Yb&&(bh(this).Pi(this.Yb),this.Yb.j(),this.status=3)};s.fa=function(){this.Yb.fa()};function bh(a){var b=m,a=a.parent.parent.c;a.g&&a.g.G&&(b=a.g.G.Ch);return b}s.$=function(){this.F=i;this.Yb.F=i};s.ba=function(){this.F=o;this.Yb.F=o};function ch(){this.name="ogMeshObject";this.type=Ma;this.Qb=[];this.Fe=[]}ch.prototype=new E;s=ch.prototype;s.ya=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=W(Na,this,this.options);this.Qb.push(c);this.Fe.push(c.r)}};s.Na=function(){for(var a=0;a<this.Qb.length;a++)F(this.Qb[a]);this.Fe=this.Qb=m};s.$=function(){for(var a=0;a<this.Qb.length;a++)this.Qb[a].$()};
s.yd=function(a,b,c,d,e,f){for(var g=0;g<this.Qb.length;g++)this.Qb[g].yd(a,b,c,d,e,f)};s.Zf=function(a,b,c,d){for(var e=0;e<this.Qb.length;e++)this.Qb[e].Zf(a,b,c,d)};s.ba=function(){for(var a=0;a<this.Qb.length;a++)this.Qb[a].ba()};function dh(){this.qm=ya()}var eh=new dh;dh.prototype.set=ca("qm");dh.prototype.reset=function(){this.set(ya())};dh.prototype.get=da("qm");function fh(a){this.Wj=a||"";this.Xn=eh}fh.prototype.Tn=i;fh.prototype.Vn=i;fh.prototype.Un=i;fh.prototype.tm=o;function gh(a){return 10>a?"0"+a:""+a}function hh(a,b){var c=(a.Am-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function ih(a){fh.call(this,a)}za(ih,fh);ih.prototype.tm=i;function jh(a){this.qe=a||100;this.ce=[]}s=jh.prototype;s.Ag=0;s.add=function(a){this.ce[this.Ag]=a;this.Ag=(this.Ag+1)%this.qe};s.get=function(a){a=kh(this,a);return this.ce[a]};s.set=function(a,b){a=kh(this,a);this.ce[a]=b};s.je=function(){return this.ce.length};s.clear=function(){this.Ag=this.ce.length=0};s.Ej=function(){for(var a=this.je(),b=[],c=this.je()-this.je();c<a;c++)b[c]=this.get(c);return b};s.Rh=function(){for(var a=[],b=this.je(),c=0;c<b;c++)a[c]=c;return a};
function kh(a,b){b>=a.ce.length&&aa(Error("Out of bounds exception"));return a.ce.length<a.qe?b:(a.Ag+Number(b))%a.qe};function lh(a,b){this.Jd=a||"";this.Wj=b||"";this.sf=[];this.ei=new jh(mh);this.Qn=xa(this.ln,this);this.Cn=new ih(this.Wj);this.Bn={};if(i!=this.Gl){this.Gl=i;Dc();var c=Cc,d=this.Qn;c.rg||(c.rg=[]);c.rg.push(d)}this.Lh="1"==nh(this.Jd,"enabled");t.setInterval(xa(this.Sn,this),7500)}var mh=500;s=lh.prototype;s.Qm="LOGGING";s.yn=o;s.Ja=m;s.tk=o;s.Gl=o;s.ol=m;s.Ij=ya();s.Nc=function(){this.Lh&&oh(this)};function ph(a,b){a.Lh=b;a.Lh&&oh(a);qh(a,"enabled",b?"1":"0")}
function rh(a){return!!a.Ja&&!a.Ja.closed}s.qn=function(){this.ei.clear();rh(this)&&this.vk()};
s.ln=function(a){if(!this.Bn[a.Ml]){var b=this.Cn,c;switch(a.tc.value){case sc.value:c="dbg-sh";break;case tc.value:c="dbg-sev";break;case uc.value:c="dbg-w";break;case vc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.Wj," ");if(b.Tn){var e=new Date(a.Am);d.push("[",gh(e.getFullYear()-2E3)+gh(e.getMonth()+1)+gh(e.getDate())+" "+gh(e.getHours())+":"+gh(e.getMinutes())+":"+gh(e.getSeconds())+"."+gh(Math.floor(e.getMilliseconds()/10)),"] ")}b.Vn&&d.push("[",qb(hh(a,b.Xn.get())),"s] ");b.Un&&
d.push("[",kb(a.Ml),"] ");d.push('<span class="',c,'">',jb(qb(kb(a.Sl))));b.tm&&a.tj&&d.push("<br>",jb(qb(a.sj||"")));d.push("</span><br>");b=d.join("");this.Lh?(oh(this),this.ei.add(b),sh(this,b)):this.ei.add(b);this.yn&&a.tc.value>=tc.value&&ph(this,i)}};function sh(a,b){a.sf.push(b);t.clearTimeout(a.ol);750<ya()-a.Ij?a.uk():a.ol=t.setTimeout(xa(a.uk,a),250)}
s.uk=function(){this.Ij=ya();if(rh(this)){var a=this.Ja.document.body,a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);this.Ja.document.write(this.sf.join(""));this.sf.length=0;a&&this.Ja.scrollTo(0,1E6)}};function th(a){for(var b=a.ei.Ej(),c=0;c<b.length;c++)sh(a,b[c])}
function oh(a){if(!rh(a)&&!a.tk){var b=nh(a.Jd,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.tk=i;a.Ja=window.open("",Ab?a.Jd.replace(/[\s\-\.\,]/g,"_"):a.Jd,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);!a.Ja&&!a.Wn&&(alert("Logger popup was blocked"),a.Wn=i);a.tk=o;a.Ja&&a.vk()}}s.Sh=ea("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
s.vk=function(){rh(this)||(this.Ja.document.open(),sh(this,"<style>"+this.Sh()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.Qm+"<br><small>Logger: "+this.Jd+"</small></div><hr>"),th(this))};function qh(a,b,c){b+=a.Jd;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(ya()+2592E6)).toUTCString()}
function nh(a,b,c){var a=b+a,b=""+document.cookie,d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""}s.Sn=function(){rh(this)&&qh(this,"dbg",(this.Ja.screenX||this.Ja.screenLeft||0)+","+(this.Ja.screenY||this.Ja.screenTop||0)+","+(this.Ja.outerWidth||800)+","+(this.Ja.outerHeight||500))};function uh(a,b){var c;c=a.className;c=pa(c)&&c.match(/\S+/g)||[];for(var d=cc(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Zb(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var vh=!Ab||Qb();!Bb&&!Ab||Ab&&Qb()||Bb&&Ob("1.9.1");Ab&&Ob("9");function wh(a,b){Rb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in xh?a.setAttribute(xh[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var xh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function yh(a,b,c){function d(c){c&&b.appendChild(pa(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];la(f)&&!(ra(f)&&0<f.nodeType)?$b(zh(f)?bc(f):f,d):d(f)}}function zh(a){if(a&&"number"==typeof a.length){if(ra(a))return"function"==typeof a.item||"string"==typeof a.item;if(qa(a))return"function"==typeof a.item}return o}function Ah(a){this.lg=a||t.document||document}function Bh(a,b){return pa(b)?a.lg.getElementById(b):b}
Ah.prototype.af=function(a,b,c){var d=this.lg,e=arguments,f=e[0],g=e[1];if(!vh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',kb(g.name),'"');if(g.type){f.push(' type="',kb(g.type),'"');var j={};Ub(j,g);g=j;delete g.type}f.push(">");f=f.join("")}f=d.createElement(f);g&&(pa(g)?f.className=g:ka(g)?uh.apply(m,[f].concat(g)):wh(f,g));2<e.length&&yh(d,f,e);return f};Ah.prototype.createElement=function(a){return this.lg.createElement(a)};Ah.prototype.createTextNode=function(a){return this.lg.createTextNode(a)};
Ah.prototype.appendChild=function(a,b){a.appendChild(b)};function Ch(a,b){if(Dh){var c=Eh(),d;for(d in c){var e=d.replace("fancywindow.sel.",""),e=H(e),f=e.tc,g=window.localStorage.getItem(d).toString();(!f||f.toString()!=g)&&e.Lg(zc(g))}}lh.call(this,a,b)}za(Ch,lh);var Dh;a:{try{Dh=!!window.localStorage.getItem;break a}catch(Fh){}Dh=o}s=Ch.prototype;
s.uk=function(){this.Ij=ya();if(rh(this)){for(var a=Bh(this.Gb,"log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.sf.length;c++){var d=this.Gb.af("div","logmsg");d.innerHTML=this.sf[c];a.appendChild(d)}this.sf.length=0;this.sm();b&&(a.scrollTop=a.scrollHeight)}};
s.vk=function(){if(rh(this)){var a=this.Ja.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Jd+"</title><style>"+this.Sh()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Jd+"</b></p><p>"+this.Qm+'</p><span id="clearbutton">clear</span><span id="exitbutton">exit</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(Ab?a.body:this.Ja).onresize=xa(this.sm,this);this.Gb=new Ah(a);Bh(this.Gb,"openbutton").onclick=xa(this.On,this);Bh(this.Gb,"closebutton").onclick=xa(this.rn,this);Bh(this.Gb,"clearbutton").onclick=xa(this.qn,this);Bh(this.Gb,"exitbutton").onclick=xa(this.zn,this);th(this)}};
s.On=function(){var a=Bh(this.Gb,"optionsarea");a.innerHTML="";for(var b=Gh(),c=this.Gb,d=0;d<b.length;d++){var e=H(b[d]),e=c.af("div",{},Hh(this,"sel"+b[d],e.tc?e.tc.name:"INHERIT"),c.af("span",{},b[d]||"(root)"));a.appendChild(e)}Bh(this.Gb,"options").style.display="block";return o};
function Hh(a,b,c){for(var a=a.Gb,b=a.af("select",{id:b}),d=0;d<xc.length;d++){var e=xc[d],f=a.af("option",{},e.name);c==e.name&&(f.selected=i);b.appendChild(f)}b.appendChild(a.af("option",{selected:"INHERIT"==c},"INHERIT"));return b}
s.rn=function(){Bh(this.Gb,"options").style.display="none";for(var a=Gh(),b=this.Gb,c=0;c<a.length;c++){var d=H(a[c]),e=Bh(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;"INHERIT"==e?d.Lg(m):d.Lg(zc(e))}if(Dh){a=Gh();b=Eh();for(c=0;c<a.length;c++)d="fancywindow.sel."+a[c],e=H(a[c]).tc,d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name)}return o};
s.sm=function(){var a=this.Gb,b=Bh(a,"log"),c=Bh(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.lg.body.offsetHeight-c.offsetHeight-(Ab?4:0)+"px"};s.zn=function(){ph(this,o);this.Ja&&this.Ja.close()};s.Sh=function(){return Ch.Ee.Sh.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};
function Eh(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);d!=m&&0==d.lastIndexOf("fancywindow.sel.",0)&&(a[d]=i)}return a}function Gh(){var a=Sb(Bc);a.sort();return a};function Ih(a){this.y=this.x=m;this.index=-1;0==arguments.length?this.y=this.x=0:2==arguments.length?(this.x=arguments[0],this.y=arguments[1]):3==arguments.length?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.ng=[]}s=Ih.prototype;s.set=function(a,b){this.x=a;this.y=b};s.add=function(a){this.x+=a.x;this.y+=a.y};s.sub=function(a){this.x-=a.x;this.y-=a.y};s.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
s.h=function(a){return this.x==a.x&&this.y==a.y};function Jh(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function Kh(a){this.ab=this.za=m;2==arguments.length?arguments[0].y>arguments[1].y?(this.ab=arguments[0],this.za=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.ab=arguments[0],this.za=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.za=arguments[0],this.ab=arguments[1]):(this.za=arguments[0],this.ab=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.ab.ng.push(this)}
function Lh(a,b,c){this.d=[m,m,m];this.xa=[m,m,m];this.El=o;this.la=[o,o,o];this.pa=[o,o,o];3==arguments.length&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}s=Lh.prototype;s.Ic=function(a){return this.d[a]};s.Bi=function(a,b){for(var c=i,d=0;d<arguments.length;++d)c=c&&(arguments[d].h(this.d[0])||arguments[d].h(this.d[1])||arguments[d].h(this.d[2]));return c};s.Jk=function(){0!=arguments.length&&(this.El=arguments[0]);return this.El};
s.kc=function(a){var b;if(3==arguments.length){var c=arguments[0],d=arguments[1];b=arguments[2];c.h(this.d[2])&&d.h(this.d[1])||c.h(this.d[1])&&d.h(this.d[2])?this.xa[0]=b:c.h(this.d[0])&&d.h(this.d[2])||c.h(this.d[2])&&d.h(this.d[0])?this.xa[1]=b:c.h(this.d[0])&&d.h(this.d[1])||c.h(this.d[1])&&d.h(this.d[0])?this.xa[2]=b:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else 1==arguments.length?(b=arguments[0],b.Bi(this.d[1],this.d[2])?(this.xa[0]=b,b.kc(this.d[1],this.d[2],this)):b.Bi(this.d[0],
this.d[2])?(this.xa[1]=b,b.kc(this.d[0],this.d[2],this)):b.Bi(this.d[0],this.d[1])&&(this.xa[2]=b,b.kc(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function Mh(a){a.xa[0]=m;a.xa[1]=m;a.xa[2]=m}function Nh(a){a.pa[0]=o;a.pa[1]=o;a.pa[2]=o}function Oh(a,b){return b.h(a.d[0])?a.d[2]:b.h(a.d[1])?a.d[0]:b.h(a.d[2])?a.d[1]:m}function Ph(a,b){return b.h(a.d[0])?a.d[1]:b.h(a.d[1])?a.d[2]:b.h(a.d[2])?a.d[0]:m}
function Qh(a,b){return b.h(a.d[0])?a.xa[1]:b.h(a.d[1])?a.xa[2]:a.xa[0]}function Rh(a,b){return b.h(a.d[0])?a.xa[2]:b.h(a.d[1])?a.xa[0]:a.xa[1]}function Sh(a,b){return b.h(a.d[0])?a.la[1]:b.h(a.d[1])?a.la[2]:a.la[0]}function Th(a,b){return b.h(a.d[0])?a.la[2]:b.h(a.d[1])?a.la[0]:a.la[1]}function Uh(a,b,c){b.h(a.d[0])?a.la[1]=c:b.h(a.d[1])?a.la[2]=c:a.la[0]=c}function Vh(a,b,c){b.h(a.d[0])?a.la[2]=c:b.h(a.d[1])?a.la[0]=c:a.la[1]=c}
function Wh(a,b){return b.h(a.d[0])?a.pa[1]:b.h(a.d[1])?a.pa[2]:a.pa[0]}function Xh(a,b){return b.h(a.d[0])?a.pa[2]:b.h(a.d[1])?a.pa[0]:a.pa[1]}function Yh(a,b,c){b.h(a.d[0])?a.pa[1]=c:b.h(a.d[1])?a.pa[2]=c:a.pa[0]=c}function Zh(a,b,c){b.h(a.d[0])?a.pa[2]=c:b.h(a.d[1])?a.pa[0]=c:a.pa[1]=c}function $h(a,b){return b.h(a.d[0])?a.xa[0]:b.h(a.d[1])?a.xa[1]:a.xa[2]}
s.Gi=function(a){if(1==arguments.length)this.Gi(this.d[0],arguments[0]);else if(2==arguments.length){var b=arguments[0],c=arguments[1];b.h(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=c):b.h(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=c):b.h(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=c):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function ai(a,b,c){if(b.h(a.d[0])){if(c.h(a.d[1]))return 2;if(c.h(a.d[2]))return 1}else if(b.h(a.d[1])){if(c.h(a.d[2]))return 0;if(c.h(a.d[0]))return 2}else if(b.h(a.d[2])){if(c.h(a.d[0]))return 1;if(c.h(a.d[1]))return 0}return-1}
s.Qf=function(a){if(1==arguments.length)"number"==typeof arguments[0]?this.la[arguments[0]]=i:this.Qf(arguments[0].za,arguments[0].ab);else if(2==arguments.length){var b=arguments[0],c=arguments[1];if(c.h(this.d[0])&&b.h(this.d[1])||c.h(this.d[1])&&b.h(this.d[0]))this.la[2]=i;else if(c.h(this.d[0])&&b.h(this.d[2])||c.h(this.d[2])&&b.h(this.d[0]))this.la[1]=i;else if(c.h(this.d[1])&&b.h(this.d[2])||c.h(this.d[2])&&b.h(this.d[1]))this.la[0]=i}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var bi=3*Math.PI/4,ci=Math.PI/2;function di(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return-1.0E-16<a&&1.0E-16>a?0:0<a?-1:1}function ei(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;return 1.0E-16>=f*(b.y-d)-(b.x-e)*a?o:1.0E-16>=(c.x-e)*a-f*(c.y-d)?o:i}
function fi(a){this.s=this.next=this.Rd=this.e=m;this.value=0;1==arguments.length?(this.e=arguments[0],this.value=this.e.x):2==arguments.length?(this.e=arguments[0],this.Rd=arguments[1],this.value=this.e.x):alert("Invalid poly2tri.Node constructor call!")}function gi(a,b){this.sg=a;this.dk=b;this.Kg=a}gi.prototype.head=da("sg");gi.prototype.Ii=function(a){var b=this.Kg;if(a<b.value)for(;(b=b.s)!=m;){if(a>=b.value)return this.Kg=b}else for(;(b=b.next)!=m;)if(a<b.value)return this.Kg=b.s;return m};
function hi(){this.Nb=this.pc=this.nd=m;this.width=0;this.Jj=o}hi.prototype.Ai=function(){this.Nb=this.pc=this.nd=m;this.width=0;this.Jj=o};function ii(){this.la=m;this.right=o}function ji(a){this.Hm=[];this.ac=[];this.d=a;this.ng=[];this.dk=this.sg=this.qg=m;this.N=new hi;this.mg=new ii;ki(this,this.d)}ji.prototype.head=da("sg");function ki(a,b){for(var c=0;c<b.length;++c)a.ng.push(new Kh(b[c],b[(c+1)%b.length]))}ji.prototype.Ic=function(a){return this.d[a]};ji.prototype.Ii=function(a){return this.qg.Ii(a.x)};
function li(a,b){for(var c=0;3>c;++c)if(b.xa[c]==m){var d;a:{d=a.qg;var e=Oh(b,b.Ic(c)),f=e.x,g=d.Kg,j=g.e.x;if(f==j)if(e.h(g.s.e))g=g.s;else if(e.h(g.next.e))g=g.next;else{if(!e.h(g.e)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=m;break a}}else if(f<j)for(;(g=g.s)!=m&&!e.h(g.e););else for(;(g=g.next)!=m&&!e.h(g.e););g!=m&&(d.Kg=g);d=g}d!=m&&(d.Rd=b)}}function mi(a,b){if(b!=m&&!b.Jk()){b.Jk(i);a.Hm.push(b);for(var c=0;3>c;++c)b.la[c]||mi(a,b.xa[c])}}
function ni(a){var b;if(3==arguments.length){b=arguments[0];var c=arguments[1],d=arguments[2];b.mg.la=c;b.mg.right=c.za.x>c.ab.x;if(!oi(d.Rd,c.za,c.ab)){var e=b;if(e.mg.right)for(var f=d;f.next.e.x<c.za.x;)-1==di(c.ab,f.next.e,c.za)?pi(e,c,f):f=f.next;else for(f=d;f.s.e.x>c.za.x;)1==di(c.ab,f.s.e,c.za)?qi(e,c,f):f=f.s;ni(b,c.za,c.ab,d.Rd,c.ab)}}else if(5==arguments.length){if(b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4],!oi(e,c,d)){var g=Ph(e,f),g=di(d,g,c);if(0==g)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var j=Oh(e,f),j=di(d,j,c);0==j?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):g==j?(e=1==g?Rh(e,f):Qh(e,f),ni(b,c,d,e,f)):ri(b,c,d,e,f)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function oi(a,b,c){var d=ai(a,b,c);return-1!=d?(a.Qf(d),a=a.xa[d],a!=m&&a.Qf(b,c),i):o}function si(a,b){var c=new Lh(b.s.e,b.e,b.next.e);c.kc(b.s.Rd);c.kc(b.Rd);a.ac.push(c);b.s.next=b.next;b.next.s=b.s;ti(a,c)||li(a,c)}
function ui(a){var b=a.next.e.x-a.e.x,c=a.next.e.y-a.e.y,d=a.s.e.x-a.e.x,a=a.s.e.y-a.e.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function ti(a,b){for(var c=0;3>c;++c)if(!b.pa[c]){var d=b.xa[c];if(d!=m){var e=b.Ic(c),f=Oh(d,Oh(b,e)),g=f.h(d.d[0])?0:f.h(d.d[1])?1:f.h(d.d[2])?2:-1;if(d.la[g]||d.pa[g])b.la[c]=d.la[g];else{var j;var k=Ph(b,e),l=Oh(b,e);j=e.x-f.x;var n=e.y-f.y,r=k.x-f.x,k=k.y-f.y,q=j*k-r*n;if(0>=q)j=o;else{var u=l.x-f.x,l=l.y-f.y,v=u*n-j*l;j=0>=v?o:0<(j*j+n*n)*(r*l-u*k)+(r*r+k*k)*v+(u*u+l*l)*q}if(j)return b.pa[c]=i,d.pa[g]=i,vi(b,e,d,f),(e=!ti(a,b))&&li(a,b),(e=!ti(a,d))&&li(a,d),b.pa[c]=o,d.pa[g]=o,i}}}return o}
function vi(a,b,c,d){var e,f,g,j;e=Rh(a,b);f=Qh(a,b);g=Rh(c,d);j=Qh(c,d);var k,l,n,r;k=Th(a,b);l=Sh(a,b);n=Th(c,d);r=Sh(c,d);var q,u,v,y;q=Xh(a,b);u=Wh(a,b);v=Xh(c,d);y=Wh(c,d);a.Gi(b,d);c.Gi(d,b);Zh(c,b,q);Yh(a,b,u);Zh(a,d,v);Yh(c,d,y);Vh(c,b,k);Uh(a,b,l);Vh(a,d,n);Uh(c,d,r);Mh(a);Mh(c);e&&c.kc(e);f&&a.kc(f);g&&a.kc(g);j&&c.kc(j);a.kc(c)}
function wi(a,b){if(!(a.N.width>(a.N.Jj?a.N.nd.e.y-b.e.y:a.N.Nb.e.y-b.e.y))){si(a,b);var c;if(!(b.s==a.N.nd&&b.next==a.N.Nb)){if(b.s==a.N.nd){c=di(b.e,b.next.e,b.next.next.e);if(1==c)return;b=b.next}else if(b.next==a.N.Nb){c=di(b.e,b.s.e,b.s.s.e);if(-1==c)return;b=b.s}else b=b.s.e.y<b.next.e.y?b.s:b.next;wi(a,b)}}}function pi(a,b,c){c.e.x<b.za.x&&(-1==di(c.e,c.next.e,c.next.next.e)?xi(a,b,c):(yi(a,b,c),pi(a,b,c)))}
function xi(a,b,c){si(a,c.next);c.next.e!=b.za&&-1==di(b.ab,c.next.e,b.za)&&-1==di(c.e,c.next.e,c.next.next.e)&&xi(a,b,c)}function yi(a,b,c){-1==di(c.next.e,c.next.next.e,c.next.next.next.e)?xi(a,b,c.next):-1==di(b.ab,c.next.next.e,b.za)&&yi(a,b,c.next)}function qi(a,b,c){c.e.x>b.za.x&&(1==di(c.e,c.s.e,c.s.s.e)?zi(a,b,c):(Ai(a,b,c),qi(a,b,c)))}function Ai(a,b,c){1==di(c.s.e,c.s.s.e,c.s.s.s.e)?zi(a,b,c.s):1==di(b.ab,c.s.s.e,b.za)&&Ai(a,b,c.s)}
function zi(a,b,c){si(a,c.s);c.s.e!=b.za&&1==di(b.ab,c.s.e,b.za)&&1==di(c.e,c.s.e,c.s.s.e)&&zi(a,b,c)}
function ri(a,b,c,d,e){var f=$h(d,e);if(f==m)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=Oh(f,Oh(d,e));ei(e,Ph(d,e),Oh(d,e),g)?(vi(d,e,f,g),li(a,d),li(a,f),e==c&&g==b?c==a.mg.la.ab&&b==a.mg.la.za&&(d.Qf(b,c),f.Qf(b,c),ti(a,d),ti(a,f)):(-1==di(c,g,b)?(g=ai(f,e,g),f.pa[g]=i,ti(a,f),Nh(f)):(g=ai(d,e,g),d.pa[g]=i,ti(a,d),Nh(d),d=f),ri(a,b,c,d,e))):(g=Bi(b,c,f,g),Ci(a,b,c,d,f,g),ni(a,b,c,d,e))}}
function Bi(a,b,c,d){a=di(b,d,a);if(1==a)return Ph(c,d);if(-1==a)return Oh(c,d);alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function Ci(a,b,c,d,e,f){var g=$h(e,f);g==m?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=Oh(g,Oh(e,f)),ei(c,Ph(d,c),Oh(d,c),e)?ri(a,c,e,g,e):(e=Bi(b,c,g,e),Ci(a,b,c,d,g,e)))};function Di(){this.name="ogGeometry";this.type=La;this.md="";this.options=this.qc=this.fd=m;this.Fe=[];this.ne=this.wa=-1;this.color=[1,1,1,1];this.Th=[1,1,1,1];this.Kl=10;this.Rl=-1E3;this.Ql=9E3}Di.prototype=new E;s=Di.prototype;s.ya=function(a){this.options=a;a.url&&"GeoJSON"==a.type&&Ei(this,a.url)};s.Na=function(){Fi(this).kh(this.wa)};function Fi(a){var b=m,a=a.parent.parent.c;a.g&&a.g.G&&(b=a.g.G.fk);return b}s.$=p();s.ba=p();
s.Yi=function(){4==this.L.readyState&&(404==this.L.status?this.qc&&this.qc(this.id):this.Fc(Zc(this.L.responseText)))};
function Gi(a,b,c,d){var e={Dg:o,kg:0,Jb:[0,0,0],Pn:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],j=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],k=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],l=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],n=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],r=g*k-j*j;1.0E-14>r?(e.Dg=i,f=0,g=j>k?l/j:n/k):(f=(j*n-k*l)/r,g=(g*n-j*l)/r);e.Jb=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.Pn=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function Hi(a,b,c,d,e,f,g,j,k,l,n){l.push(b[0]);l.push(b[1]);l.push(b[2]);b=a;a++;l.push(f[0]);l.push(f[1]);l.push(f[2]);f=a;a++;l.push(e[0]);l.push(e[1]);l.push(e[2]);e=a;a++;l.push(k[0]);l.push(k[1]);l.push(k[2]);k=a;a++;l.push(c[0]);l.push(c[1]);l.push(c[2]);c=a;a++;l.push(g[0]);l.push(g[1]);l.push(g[2]);g=a;a++;l.push(d[0]);l.push(d[1]);l.push(d[2]);d=a;a++;l.push(j[0]);l.push(j[1]);l.push(j[2]);j=a;a++;n.push(c);n.push(g);n.push(d);n.push(g);n.push(j);n.push(d);n.push(b);n.push(e);n.push(f);
n.push(f);n.push(e);n.push(k);n.push(b);n.push(f);n.push(c);n.push(f);n.push(g);n.push(c);n.push(e);n.push(d);n.push(j);n.push(k);n.push(e);n.push(j);n.push(b);n.push(c);n.push(e);n.push(c);n.push(d);n.push(e);n.push(f);n.push(j);n.push(g);n.push(f);n.push(k);n.push(j);return a}
function Ii(a,b,c){var d={VertexSemantic:"",Vertices:m,IndexSemantic:"",Indices:m,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new L(a.parent.parent.c);b.Fc(d,m,m,b);4==a.color.length?b.sd.u(a.color[0],a.color[1],a.color[2],a.color[3]):3==a.color.length&&b.sd.u(a.color[0],a.color[1],a.color[2],1);return b}
s.Fc=function(a){Ji("CreateFromJSONObject");var b=o;if("FeatureCollection"==a.type&&(Ji("[GeoJSON Parser] type = FeatureCollection"),w(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(w(a[d].type)&&"Feature"==a[d].type&&w(a[d].properties)&&w(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;w(e.color)&&(this.color=e.color);w(e.highlightcolor)&&(this.Th=e.highlightcolor);w(e.linewidth)&&(this.Kl=e.linewidth);w(e.minelv)&&(this.Rl=e.minelv);w(e.maxelv)&&(this.Ql=e.maxelv);if(w(f.type))if(e=
f.type,"LineString"==e)w(f.coordinates&&ka(f.coordinates))&&(b=Ki(this,f.coordinates));else if("MultiLineString"==e){if(w(f.coordinates&&ka(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)Ki(this,f[e])&&(b=i)}}else if("Polygon"==e){if(w(f.coordinates&&ka(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],j=b.length;if(0==j)b=o;else{if(1<=j){for(var k=0;k<j;k++)if(0==k)for(var l=0;l<b[k].length;l++)g.push(new Ih(b[k][l][0],b[k][l][1],e)),e++;else{for(var n=[],l=0;l<b[k].length;l++)n.push(new Ih(b[k][l][0],
b[k][l][1]),e),e++;f.push(n)}b=new ji(g);e=h;for(e in f)for(k in g=b,j=f[e],ki(g,j),k=h,j)g.d.push(j[k]);e=f=b;g=e.d[0].x;j=e.d[0].x;l=e.d[0].y;k=e.d[0].y;n=h;for(n in e.d){var r=e.d[n];r.x>g&&(g=r.x);r.x<j&&(j=r.x);r.y>l&&(l=r.y);r.y<k&&(k=r.y)}l=0.3*(l-k);e.sg=new Ih(g+0.3*(g-j),k-l);e.dk=new Ih(j-l,k-l);e.d.sort(Jh);e=f;k=j=g=h;k=new Lh(e.d[0],e.dk,e.sg);e.ac.push(k);g=new fi(k.Ic(1),k);j=new fi(k.Ic(0),k);k=new fi(k.Ic(2));e.qg=new gi(g,k);g.next=j;j.next=k;j.s=g;k.s=j;e=f;for(g=1;g<e.d.length;++g){var j=
e.Ic(g),k=e,l=j,n=k.Ii(l),r=k,q=l,u=n,v=new Lh(q,u.e,u.next.e);v.kc(u.Rd);r.ac.push(v);q=new fi(q);q.next=u.next;q.s=u;u.next.s=q;u.next=q;ti(r,v)||li(r,v);r=q;l.x<=n.e.x+1.0E-16&&si(k,n);l=r;n=l.next;for(u=h;n.next!=m;){u=ui(n);if(u>ci||u<-ci)break;si(k,n);n=n.next}for(n=l.s;n.s!=m;){u=ui(n);if(u>ci||u<-ci)break;si(k,n);n=n.s}if(l.next!=m&&l.next.next!=m&&(u=Math.atan2(l.e.y-l.next.next.e.y,l.e.x-l.next.next.e.x),u<bi)){k.N.nd=-1==di(l.e,l.next.e,l.next.next.e)?l.next.next:l.next;for(k.N.pc=k.N.nd;k.N.pc.next!=
m&&k.N.pc.e.y>=k.N.pc.next.e.y;)k.N.pc=k.N.pc.next;if(k.N.pc!=k.N.nd){for(k.N.Nb=k.N.pc;k.N.Nb.next!=m&&k.N.Nb.e.y<k.N.Nb.next.e.y;)k.N.Nb=k.N.Nb.next;k.N.Nb!=k.N.pc&&(k.N.width=k.N.Nb.e.x-k.N.nd.e.x,k.N.Jj=k.N.nd.e.y>k.N.Nb.e.y,wi(k,k.N.pc))}}k=r;for(l=0;l<j.ng.length;++l)ni(e,j.ng[l],k)}e=f.qg.head().next.Rd;for(g=f.qg.head().next.e;!Sh(e,g);)e=Rh(e,g);mi(f,e);b=b.Hm;f=[];for(e=0;e<b.length;e++)g=b[e].Ic(1).index,j=b[e].Ic(2).index,f.push(b[e].Ic(0).index),f.push(g),f.push(j)}b=i}}}else"MultiPolygon"==
e?Cg("MultiPolygon is not yet supported"):"Point"==e?Cg("Point is not yet supported"):"MultiPoint"==e&&Cg("MultiPoint is not yet supported")}b&&(this.wa=Fi(this).wk(this.Fe))};function Ei(a,b){b==m?alert("invalid json-url"):(a.md=b,a.L=new window.XMLHttpRequest,a.L.open("GET",a.md,i),a.L.onreadystatechange=function(){a.Yi()},a.L.send())}
function Ki(a,b){var c=new Q,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(1<g)for(var j=0;j<g;j++){var k=b[j][0],l=b[j][1];c.u(k,l,a.Ql);c.ja(d);c.u(k,l,a.Rl);c.ja(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return o;var c=[],d=[],g=5.960465188081883E-8*a.Kl,e=0,n,r,q,u,v,y,z,ha,ia,P,ba,T,U,V,ma,na,oa;if(4==f.length){j=f[0];n=f[1];var k=f[2],l=f[3],B=k[0]-j[0],X=k[1]-j[1],ja=k[2]-j[2],Y=n[0]-j[0],Z=n[1]-j[1],N=n[2]-j[2],f=X*N-ja*Z,e=ja*Y-B*N;r=B*Z-X*Y;B=g/Math.sqrt(f*f+e*e+r*r);f*=B;e*=B;
r*=B;u=[j[0]+f,j[1]+e,j[2]+r];v=[n[0]+f,n[1]+e,n[2]+r];y=[k[0]+f,k[1]+e,k[2]+r];z=[l[0]+f,l[1]+e,l[2]+r];ha=[j[0]-f,j[1]-e,j[2]-r];ia=[n[0]-f,n[1]-e,n[2]-r];P=[k[0]-f,k[1]-e,k[2]-r];ba=[l[0]-f,l[1]-e,l[2]-r];Hi(0,u,ha,P,y,v,ia,ba,z,d,c);a.Fe.push(Ii(a,d,c))}else if(6<=f.length){j=f[0];n=f[1];k=f[2];l=f[3];r=f[4];q=f[5];B=k[0]-j[0];X=k[1]-j[1];ja=k[2]-j[2];Y=n[0]-j[0];Z=n[1]-j[1];N=n[2]-j[2];T=X*N-ja*Z;U=ja*Y-B*N;V=B*Z-X*Y;B=g/Math.sqrt(T*T+U*U+V*V);T*=B;U*=B;V*=B;u=[j[0]+T,j[1]+U,j[2]+V];v=[n[0]+
T,n[1]+U,n[2]+V];ha=[j[0]-T,j[1]-U,j[2]-V];ia=[n[0]-T,n[1]-U,n[2]-V];for(j=4;j<f.length;j+=2)r=f[j],q=f[j+1],B=r[0]-k[0],X=r[1]-k[1],ja=r[2]-k[2],Y=l[0]-k[0],Z=l[1]-k[1],N=l[2]-k[2],ma=X*N-ja*Z,na=ja*Y-B*N,oa=B*Z-X*Y,B=g/Math.sqrt(ma*ma+na*na+oa*oa),ma*=B,na*=B,oa*=B,Y=l[0]-n[0],Z=l[1]-n[1],N=l[2]-n[2],z=Math.sqrt(Y*Y+Z*Z+N*N),Y/=z,Z/=z,N/=z,B=l[0]-q[0],X=l[1]-q[1],ja=l[2]-q[2],z=Math.sqrt(B*B+X*X+ja*ja),B/=z,X/=z,P=[q[0]+ma,q[1]+na,q[2]+oa],n=[q[0]-ma,q[1]-na,q[2]-oa],ba=[r[0]+ma,r[1]+na,r[2]+oa],
y=[r[0]-ma,r[1]-na,r[2]-oa],z=Gi([v[0],v[1],v[2]],[v[0]+Y,v[1]+Z,v[2]+N],[P[0],P[1],P[2]],[P[0]+B,P[1]+X,P[2]+N]),P=Gi([ia[0],ia[1],ia[2]],[ia[0]+Y,ia[1]+Z,ia[2]+N],[n[0],n[1],P[2]],[n[0]+B,n[1]+X,n[2]+N]),n=Gi([u[0],u[1],u[2]],[u[0]+Y,u[1]+Z,u[2]+N],[ba[0],ba[1],ba[2]],[ba[0]+B,ba[1]+X,ba[2]+N]),B=Gi([ha[0],ha[1],ha[2]],[ha[0]+Y,ha[1]+Z,ha[2]+N],[y[0],y[1],y[2]],[y[0]+B,y[1]+X,y[2]+N]),!z.Dg&&!P.Dg&&!n.Dg&&!B.Dg?(z=[z.Jb[0],z.Jb[1],z.Jb[2]],ba=[P.Jb[0],P.Jb[1],P.Jb[2]],y=[n.Jb[0],n.Jb[1],n.Jb[2]],
P=[B.Jb[0],B.Jb[1],B.Jb[2]]):(z=[l[0]+T,l[1]+U,l[2]+V],ba=[l[0]-T,l[1]-U,l[2]-V],y=[k[0]+T,k[1]+U,k[2]+V],P=[k[0]-T,k[1]-U,k[2]-V]),e=Hi(e,u,ha,P,y,v,ia,ba,z,d,c),T=ma,U=na,V=oa,n=l,k=r,l=q,v=z,ia=ba,u=y,ha=P;f=[q[0]+T,q[1]+U,q[2]+V];g=[q[0]-T,q[1]-U,q[2]-V];j=[r[0]+T,r[1]+U,r[2]+V];k=[r[0]-T,r[1]-U,r[2]-V];Hi(e,y,P,k,j,z,ba,g,f,d,c);a.Fe.push(Ii(a,d,c))}else return o;return i};function Li(){this.name="ogAoeImageLayer";this.type=Xa;this.F=o;this.Xa=[]}Li.prototype=new E;s=Li.prototype;s.ya=p();s.Na=function(){for(var a=0;a<this.Xa.length;a++){for(var b=a;b<this.Xa.length;b++)this.Xa[a].wa-=1;F(this.Xa[a])}};s.$=function(){this.F=i;for(var a=0;a<this.Xa.length;a++)this.Xa[a].$()};s.ba=function(){this.F=o;for(var a=0;a<this.Xa.length;a++)this.Xa[a].ba()};s.vi=function(a){this.Xa.push(a);a.ne=this.id};
s.Oi=function(a){for(var b=0;b<this.Xa.length;b++)if(this.Xa[b]==a){for(var c=b+1;c<this.Xa.length;c++)this.Xa[c].wa-=1;F(this.Xa[b]);this.Xa.splice(b,1)}};function Mi(){this.name="ogVectorLayer";this.type=Ha;this.F=o;this.ca=[]}Mi.prototype=new E;s=Mi.prototype;s.ya=p();s.kh=function(a){for(var b=0;b<this.ca.length;b++)this.ca[b]==a&&(F(this.ca[b]),this.ca.splice(b,1))};s.Na=function(){Ni(this)};s.$=function(){this.F=i;for(var a=0;a<this.ca.length;a++)this.ca[a].$()};s.ba=function(){this.F=o;for(var a=0;a<this.ca.length;a++)this.ca[a].ba()};function Ni(a){for(var b=0;b<a.ca.length;b++){for(var c=b;c<a.ca.length;c++)a.ca[b].wa-=1;F(a.ca[b])}}
s.wk=function(a){this.ca.push(a);a.ne=this.id};s.kh=function(a){for(var b=0;b<this.ca.length;b++)if(this.ca[b]==a){for(var c=b+1;c<this.ca.length;c++)this.ca[c].wa-=1;F(this.ca[b]);this.ca.splice(b,1)}};function Oi(){this.name="ogImageLayer";this.type=Ba;this.ug=-1}Oi.prototype=new E;Oi.prototype.$g=function(){var a=m,b=this.parent.parent.parent.c;b.g&&b.g.G&&(a=b.g.G.Oa);return a};Oi.prototype.yi=function(a){var b=this.$g();b&&(this.ug=b.yi(a))};Oi.prototype.jh=function(){var a=this.$g();a&&-1!=this.ug&&a.jh(this.ug)};Oi.prototype.ya=function(a){this.yi(a)};function Pi(){this.name="ogBillboardLayer";this.type=Wa;this.F=o;this.Ca=[]}Pi.prototype=new E;s=Pi.prototype;s.ya=p();s.Na=function(){for(var a=0;a<this.Ca.length;a++)F(this.Ca[a])};s.$=function(){this.F=i;for(var a=0;a<this.Ca.length;a++)this.Ca[a].$()};s.ba=function(){this.F=o;for(var a=0;a<this.Ca.length;a++)this.Ca[a].ba()};s.Pi=function(a){for(var b=0;b<this.Ca.length;b++)this.Ca[b]==a&&(F(this.Ca[b]),this.Ca.splice(b,1))};s.wi=function(a){this.Ca.push(a)};function Qi(){this.name="ogPointSpriteObject";this.type=Za;this.rd=this.options=this.yc=m;this.ai=this.Jh=0}Qi.prototype=new E;s=Qi.prototype;s.ya=function(a){this.options=a;this.yc=new nd(this.parent.parent.parent.c);a.Vertices&&this.yc.oh(a.Vertices);a.PointUrl&&(Ri(this,a.PointUrl),this.Ln=a.NumberOfPoints,this.yc.ti=this.Ln);this.yc.lh(a.Center[0],a.Center[1],a.Center[2])};s.Na=function(){this.yc&&(this.yc.j(),this.yc=m,this.status=3)};s.$=function(){this.yc.F=i};s.yd=p();
s.ba=function(){this.yc.F=o};function Ri(a,b){b==m?alert("invalid xyzurl"):(a.eo=b,a.L=new window.XMLHttpRequest,a.L.open("GET",a.eo,i),a.L.onreadystatechange=function(){4==a.L.readyState&&(404==a.L.status?alert("xyz-file not found..."):Si(a))},a.L.onprogress=function(){Si(a)},a.L.send(),a.Jh=0,a.ai=0)}
function Si(a){var b=a.L.responseText;a.Jh=b.lastIndexOf("\n");for(var b=b.substr(a.ai,a.Jh-a.ai-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.yc.oh(c);a.ai=a.Jh};function Ti(){this.name="ogGeometryLayer";this.type=Fa;this.F=o;this.Y=[]}Ti.prototype=new E;s=Ti.prototype;s.ya=p();s.Na=function(){for(var a=0;a<this.Y.length;a++){for(var b=a;b<this.Y.length;b++)this.Y[a].wa-=1;F(this.Y[a])}};s.$=function(){this.F=i;for(var a=0;a<this.Y.length;a++)this.Y[a].$()};s.ba=function(){this.F=o;for(var a=0;a<this.Y.length;a++)this.Y[a].ba()};s.Td=function(a){this.Y.push(a);a.ne=this.id};
s.Qi=function(a){for(var b=0;b<this.Y.length;b++)if(this.Y[b]==a){for(var c=b+1;c<this.Y.length;c++)this.Y[c].wa-=1;F(this.Y[b]);this.Y.splice(b,1)}};function Ui(){this.name="ogSurface";this.type=Na;this.elevation=this.latitude=this.longitude=0;this.status=gb;this.r=m}Ui.prototype=new E;s=Ui.prototype;s.yd=function(a,b,c,d,e,f){this.r.lh(a,b,c,d,e,f)};
s.Zf=function(a,b,c,d){var e=this.r,f=new Q(a,b,c),c=Array(3);f.ja(c);f=new K;f.Ud(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new K;c.xd(a);a=new K;a.xd([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.Te();b=new K;b.Yg(d[0],d[1],d[2],d[3]);b.Te();f=new K;f.aa(a,b);d=new K;d.aa(a,f);b=new K;b.xd([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.Te();a=new K;a.aa(b,d);d=new K;
d.aa(c,a);c=new K;c.wd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);a=new K;a.aa(d,c);e.ia=a;jd(e)};
s.ya=function(a){if(a==m)G(H("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==m)G(H("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Ma)G(H("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.r=new L(this.parent.parent.parent.parent.c);this.r.F=o;this.r.Mn=this.id;var b=this;this.r.Fc(a.jsonobject,function(){0!=b.longitude&&0!=b.latitude&&b.yd(b.longitude,b.latitude,b.elevation);b.status=fb;b.Q&&b.Q(b.id)},function(){b.status=
3;b.P&&b.P(b.id)});this.md=a.url;this.r.Lm=a.jsonobject.VisibilityDistance?1.1920930376163766E-7*a.jsonobject.VisibilityDistance:0.005960465188081883}a.longitude&&a.latitude&&a.elevation&&(this.longitude=a.longitude,this.latitude=a.latitude,this.elevation=a.elevation)}};s.Na=function(){this.r&&(this.r.j(),this.r=m,this.status=3)};s.ba=function(){this.r&&(this.r.F=o)};s.$=function(){this.r&&(this.r.F=i)};var Vi=-1;function W(a,b,c){var d=m;a==A?d=new Pg:a==C?d=new Rg:a==Aa?d=new Qg:a==Ba?d=new Oi:a==Ca?d=new Xg:a!=Da&&(a==Ea?d=new Vg:a==Fa?d=new Ti:a!=Ga&&a!=Ia&&(a==Ja?d=new Ec:a==Ua?d=new Tg:a!=Ka&&(a==La?d=new Cf:a==Ma?d=new ch:a==Na?d=new Ui:a==Pa?d=new Kc:a!=Qa&&a!=Ra&&a!=Sa&&a!=Ta&&(a==Va?d=new ah:a==Wa?d=new Pi:a==Xa?d=new Li:a==Ya?d=new ve:a==Za?d=new Qi:a==$a?d=new Zg:a==Ha?d=new Mi:a==Oa&&(d=new Di)))));d!=m&&(Vi++,d.id=Vi,d.parent=b,hb.push(d),d.ya(c));return d}x("_CreateObject",W);
x("ogGetObjectType",function(a){return(a=D(a))?a.type:ab});x("ogGetObjectName",function(a){return(a=D(a))?a.name:""});x("ogGetNumObjects",function(){return hb.length});x("ogGetObjectAt",function(a){a=0>a||a>hb.length-1?m:hb[a];return a==m?-1:a.id});x("ogGetParentObject",function(a){return(a=D(a))&&a.parent?a.parent.id:-1});x("ogSetObjectName",function(a,b){var c=D(a);c&&(c.name=b)});
x("ogGetObjectByName",function(a){a:{for(var b=0;b<hb.length;b++)if(hb[b].name==a){a=hb[b];break a}a=m}return a?a.id:-1});x("ogGetObjectStatus",function(a){return(a=D(a))?a.status:3});x("ogOnLoad",function(a,b){var c=D(a);c&&(c.status==fb?b(a):c.Q=b)});x("ogOnFailure",function(a,b){var c=D(a);c&&(3==c.status?b(a):c.P=b)});function Wi(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=W(A,m,a);return a!=m?a.id:-1}x("ogCreateContext",Wi);
x("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?i:o;f.canvas=a;return Wi(f,c,d,e)});x("ogDestroyContext",function(a){(a=D(a))&&a.type==A&&F(a)});x("ogGetWidth",function(a){return(a=D(a))&&a.type==A?a.c?a.c.width:0:0});x("ogGetHeight",function(a){return(a=D(a))&&a.type==A?a.c?a.c.height:0:0});x("ogGetScene",function(a){return(a=D(a))&&a.type==A&&a.g?a.g.id:-1});x("ogSetBackgroundColor",function(a,b,c,d,e){(a=D(a))&&a.type==A&&a.c&&a.c.Sk(b,c,d,e)});
x("ogSetTextColor",function(a,b,c,d){(a=D(a))&&a.type==A&&a.fontcolor.u(b,c,d,1)});x("ogDrawText",function(a,b,c,d){(a=D(a))&&a.type==A&&a.ud(b,c,d)});x("ogGetTextSize",function(a,b){var c=D(a);if(c&&c.type==A&&(c=c.Di(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});x("ogSetMouseDownFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.fe=b)});x("ogSetMouseUpFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.he=b)});x("ogSetMouseMoveFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.ge=b)});
x("ogSetMouseWheelFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.dd=b)});x("ogSetKeyDownFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.mj=b)});x("ogSetKeyUpFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.nj=b)});x("ogSetResizeFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.ed=b)});x("ogSetRenderFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.Dd=b)});x("ogSetTimerFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.Ed=b)});
x("ogSetRenderGeometryFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.ko=b)});x("ogSetBeginRenderFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.io=b)});x("ogSetEndRenderFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.jo=b)});x("ogSetFlyToStartedFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.de=b)});x("ogSetInPositionFunction",function(a,b){var c=D(a);c&&c.type==A&&(c.ee=b)});x("ogSetNumRenderPasses",function(a,b){var c=D(a);c&&c.type==A&&(c.to=b)});x("ogExec",p());
x("ogSetArtworkDirectory",function(a){R=a});function Xi(a,b){var c=D(a);if(c&&c.type==A){var d={};d.type=b;if(b==bb||b==cb||b==db||b==eb)return d=W(C,c,d),c.g=d,d.id;G(H("owg.og"),"** WARNING: wrong scene type");return-1}G(H("owg.og"),"** WARNING: context is not valid");return-1}x("ogCreateScene",Xi);x("ogGetContext",function(a){if((a=D(a))&&a.type==C)if(a=a.parent)return a.id;return-1});x("ogGetWorld",function(a){if((a=D(a))&&a.type==C)if(a=a.Gf)return a.id;return-1});
x("ogPickGlobe",function(a,b,c){return(a=D(a))&&a.type==C&&a.Bc==bb?a.Uf(b,c):[o,0,0,0,0,0,0]});x("ogToCartesian",function(a,b,c,d){if((a=D(a))&&a.type==C&&a.Bc==bb){var e=[];(new Q(b,c,d)).ja(e)}return e||m});x("ogToWGS84",function(a,b,c,d){if((a=D(a))&&a.type==C&&a.Bc==bb){var e=new Q;e.Hc(b,c,d);e=[e.H[0],e.H[1],e.H[2]]}return e||m});x("ogCreateCamera",function(a){if((a=D(a))&&a.type==C){var b=W(Pa,a,m);a.Eh.push(b);return b.id}return-1});x("ogDestroyCamera",function(a){(a=D(a))&&a.type==Pa&&F(a)});
x("ogSetPosition",function(a,b,c,d){(a=D(a))&&a.type==Pa&&a.sa(b,c,d)});function Yi(a){return(a=D(a))&&a.type==C?(a=a.be,Nc(a),a.Wd()):m}x("ogGetPosition",Yi);function Zi(a,b,c,d){return(a=D(a))&&a.type==Pa?(360<b&&(b-=360),0>b&&(b=360+b),a.Re(b,c,d)):m}x("ogSetOrientation",Zi);x("ogSetOrientationFromQuaternion",function(a,b,c,d,e){return(a=D(a))&&a.type==Pa?a.nh(b,c,d,e):m});function $i(a){return(a=D(a))&&a.type==C?(a=a.be,Nc(a),a.Of()):m}x("ogGetOrientation",$i);
function aj(a){return(a=D(a))&&a.type==C?a.be.id:-1}x("ogGetActiveCamera",aj);x("ogSetActiveCamera",function(a){(a=D(a))&&a.type==Pa&&Sg(a.parent,a.id)});x("ogGetNumCameras",function(a){if((a=D(a))&&a.type==C)return a.Eh.length});x("ogGetCameraAt",function(a,b){var c=D(a);return c&&c.type==C?c.Eh[b].id:-1});
x("ogLookAt",function(a,b,c,d){var e=aj(a);Nc(D(e));var f=Yi(a),g=[];(new Q(f.longitude,f.latitude,f.elevation)).ja(g);var j=new J(g[0],g[1],g[2]),k=[];(new Q(b,c,d)).ja(k);b=(new J(k[0],k[1],k[2])).If();b.Ui(j);j=new K;j.Ud(f.longitude,f.latitude);f=new K;f.$c(g[0],g[1],g[2]);g=new K;g.aa(f,j);g.Te();g=g.La(b);g.lc();g=g.a;f=g[0];j=g[1];b=g[2];g=57.29577951308232*Math.acos(f/Math.sqrt(1-b*b));0>j&&0<f&&(g=360-g);0>j&&0>f&&(g=360-g);f=-(90-57.29577951308232*Math.acos(b));-0.9>b&&(g=180+g,f=-f);a=
$i(a);Zi(e,g,f,a.roll)});function bj(a){if((a=D(a))&&a.type==C){var b={};b.scenetype=a.Bc;b=W(Aa,a,b);a.Gf=b;return b.id}return-1}x("ogCreateWorld",bj);x("ogCreateGlobe",function(a){var b=Xi(a,bb),a=bj(b),b=D(b),c=W(Pa,b,m);Nc(c);Sg(b,c.id);b.Eh.push(c);return a});x("ogSetNorthpoleColor",function(a,b,c,d){if((a=D(a))&&a.type==Aa)a.parent.parent.c.g.G.Oa.te=[b,c,d]});x("ogSetSouthpoleColor",function(a,b,c,d){if((a=D(a))&&a.type==Aa)a.parent.parent.c.g.G.Oa.De=[b,c,d]});
x("ogSetRenderQuality",function(a,b){var c=D(a);c&&c.type==Aa&&(c=c.parent.parent.c.g.G.Oa,0<b&&3>=b&&(c.pm=b))});x("ogSetRenderEffect",function(a,b,c){(a=D(a))&&a.type==Aa&&a.ph(b,c)});x("ogLoadTextureAsync",function(a,b){var c=D(a);if(c&&c.type==C){var d={};d.url=b;return W(Ja,c,d).id}return-1});x("ogDestroyTexture",function(a){(a=D(a))&&a.type==Ja&&F(a)});x("ogBlitTexture",function(a,b,c,d){(a=D(a))&&a.type==Ja&&a.B(b,c,d)});
x("ogAddImageLayer",function(a,b){var c=D(a);return c&&c.type==Aa?W(Ba,c,b).id:-1});x("ogRemoveImageLayer",function(a){if((a=D(a))&&a.type==Ba)a.jh(),F(a)});x("ogAddElevationLayer",function(a,b){var c=D(a);return c&&c.type==Aa?W(Ca,c,b).id:-1});x("ogRemoveElevationLayer",function(a){if((a=D(a))&&a.type==Ca)a.jh(),F(a)});x("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;return(a=D(a))&&a.type==Aa?W(Ea,a,e).id:-1});
x("ogRemovePOILayer",function(a){(a=D(a))&&a.type==Ea&&F(a)});x("ogHidePOILayer",function(a){(a=D(a))&&a.type==Ea&&a.$()});x("ogShowPOILayer",function(a){(a=D(a))&&a.type==Ea&&a.ba()});x("ogAddVectorLayer",function(a,b){var c=D(a);return c&&c.type==Aa?W(Ha,c,b).id:-1});x("ogRemoveVectorLayer",function(a){if((a=D(a))&&a.type==Ha)Ni(a),F(a)});x("ogLoadVectorAsync",function(a,b){var c=D(a);if(c&&c.type==Ha){var d=W(Oa,c.parent.parent,{url:b,type:"GeoJSON"});c.ca.push(d);d.Co=c;c=d.id}else c=-1;return c});
x("ogDestroyVector",function(a){if((a=D(a))&&a.type==Oa)if(a.m){var b=a.m;b&&b.type==Ha&&b.kh(a)}else F(a);return-1});x("ogCreatePOI",function(a,b){var c=D(a);if(c&&c.type==Ea){b.textstyle=c.Ie;b.iconstyle=c.ke;var d=W(Ua,c.parent.parent,b);c.Aa.push(d);d.uo=c;c=d.id}else c=-1;return c});x("ogDestroyPOI",function(a){if((a=D(a))&&a.type==Ua)if(a.m){var b=a.m;if(b&&b.type==Ea)for(var c=0;c<b.Aa.length;c++)b.Aa[c]==a&&(F(b.Aa[c]),b.Aa.splice(c,1))}else F(a);return-1});
x("ogChangePOIText",function(a,b){var c=D(a);if(c&&c.type==Ua){var d=c.parent.parent;c.Ie&&d.c.tf.Ak(c.qa,b,c.Ie)}});x("ogChangePOIIcon",function(a,b){var c=D(a);if(c&&c.type==Ua){var d=c.parent.parent;c.ke&&d.c.tf.zk(c.qa,b,c.ke)}});x("ogChangePOISize",function(a,b){var c=D(a);c&&c.type==Ua&&c.qa.qh(b)});x("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=D(a))&&a.type==Ua){var e=[];(new Q(b,c,d)).ja(e);b=e[0];c=e[1];e=e[2];a.qa.ue?a.qa.sa(b,c,e,0):a.qa.sa(b,c,e,m)}});
x("ogChangePOIPosition",function(a,b,c,d){(a=D(a))&&a.type==Ua&&(a.qa.ue?a.qa.sa(b,c,d,0):a.qa.sa(b,c,d,m))});x("ogHidePOI",function(a){(a=D(a))&&a.type==Ua&&a.$()});x("ogShowPOI",function(a){(a=D(a))&&a.type==Ua&&a.ba()});x("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=D(a))&&a.type==Ua)a.qa.Uj=new Yc(b,c,d,e)});x("ogPickPOI",function(a,b,c){return(a=D(a))&&a.type==C&&a.Bc==bb?a.Wf(b,c):-1});
x("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=D(a);return d&&d.type==Aa?W(Fa,d,c).id:-1});x("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=D(a);return d&&d.type==Aa?W(Xa,d,c).id:-1});x("ogCreateAoeImage",function(a,b){var c=D(a);if(c&&c.type==Xa){var d=W(Ya,c.parent.parent,b);c.vi(d);return d.id}return-1});x("ogDestroyAoeImage",function(a){if((a=D(a))&&a.type==Ya){var b=D(a.ne);b&&b.type==Xa&&b.Oi(a)}return-1});
x("ogHideGeometryLayer",function(a){(a=D(a))&&a.type==Fa&&a.$()});x("ogShowGeometryLayer",function(a){(a=D(a))&&a.type==Fa&&a.ba()});x("ogRemoveGeometryLayer",function(a){(a=D(a))&&a.type==Fa&&F(a);return-1});x("ogCreateGeometry",function(a,b){var c={};c.jsonobject=b;var d=D(a);return d&&d.type==Fa?(c=W(La,d.parent.parent,c),d.Td(c),c.id):-1});x("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=D(a);return d&&d.type==Fa?(c=W(La,d.parent.parent,c),d.Td(c),c.id):-1});
x("ogDestroyGeometry",function(a){if((a=D(a))&&a.type==La){var b=D(a.ne);b&&b.type==Fa&&b.Qi(a)}return-1});x("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){return(a=D(a))&&a.type==La?a.yd(b,c,d,e,f,g):-1});x("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){return(a=D(a))&&a.type==La?a.Zf(b,c,d,e):-1});x("ogGetNumMeshes",function(a){return(a=D(a))&&a.type==La?a.Hb.length:-1});x("ogGetMeshAt",function(a,b){var c=D(a);return c&&c.type==La?c.Hb[b].id:-1});
x("ogHideGeometry",function(a){(a=D(a))&&a.type==La&&a.$()});x("ogShowGeometry",function(a){(a=D(a))&&a.type==La&&a.ba()});x("ogPickGeometry",function(a,b,c){if((a=D(a))&&a.type==C&&a.Bc==bb)if(b=a.Yd(b,c),b=D(b))return b.parent.parent.id;return-1});x("ogCreatePolylineWGS84",function(a,b,c){return(a=D(a))&&a.type==Fa?(c.coords=b,c.type="EarthPolyline",b=W(La,a.parent.parent,c),a.Td(b),b.id):-1});x("ogGetSurfaceAt",function(a,b){var c=D(a);return c&&c.type==Ma?c.Qb[b].id:-1});
x("ogHideMesh",function(a){(a=D(a))&&a.type==Ma&&a.$()});x("ogShowMesh",function(a){(a=D(a))&&a.type==Ma&&a.ba()});x("ogPickMesh",function(a,b,c){if((a=D(a))&&a.type==C&&a.Bc==bb)if(b=a.Yd(b,c),b=D(b))return b.parent.id;return-1});x("ogHideSurface",function(a){(a=D(a))&&a.type==Na&&a.$()});x("ogShowSurface",function(a){(a=D(a))&&a.type==Na&&a.ba()});x("ogPickSurface",function(a,b,c){return(a=D(a))&&a.type==C&&a.Bc==bb?a.Yd(b,c):-1});
x("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=D(a);return d&&d.type==Aa?W(Wa,d,c).id:-1});x("ogRemoveBillboardLayer",function(a){(a=D(a))&&a.type==Wa&&F(a)});x("ogHideBillboardLayer",function(a){(a=D(a))&&a.type==Wa&&a.$()});x("ogShowBillboardLayer",function(a){(a=D(a))&&a.type==Wa&&a.ba()});x("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=D(a))&&a.type==Wa){var f={};f.canvas=b;f.position=[c,d,e];b=W(Va,a.parent.parent,f);a.wi(b);b.m=a.id;return b.id}return-1});
x("ogDestroyBillboard",function(a){if((a=D(a))&&a.type==Va)if(a.m){var b=D(a.m);b&&b.type==Wa&&b.Pi(a)}else F(a);return-1});x("ogHideBillboard",function(a){(a=D(a))&&a.type==Va&&a.$();return-1});x("ogShowBillboard",function(a){(a=D(a))&&a.type==Va&&a.ba();return-1});x("ogPickBillboard",function(a,b,c){return(a=D(a))&&a.type==C&&a.Bc==bb?a.Vf(b,c):-1});x("ogUpdateBillboard",function(a,b){var c=D(a);c&&c.type==Va?(c.Yb.canvas=b,c.Yb.ag(),c=h):c=-1;return c});
x("ogFlyTo",function(a,b,c,d,e,f,g){(a=D(a).parent.c)&&ue(a.Wa,b,c,d,e,f,g)});x("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=D(a).parent.c)&&a.Ci(b,c,d,e,f,g,j)});x("ogSetFlightDuration",function(a,b){var c=D(a).parent.c;c&&c.mh(b)});x("ogStopFlyTo",function(a){(a=D(a).parent.c)&&a.$f()});x("ogSetCanvasSizeOffset",function(a,b,c){a=D(a).parent.c;a.sk=b;a.Gj=c;vg()});x("ogDebug",function(){var a=new Ch;ph(a,i);a.Nc()});x("ogWarning",function(a){G(H("warning"),a)});
function Cg(a){H("error").log(tc,a,h)}x("ogError",Cg);function Ji(a){H("message").info(a)}x("ogLog",Ji);x("ogWorldToWindow",function(a,b,c,d){var e;if((a=D(a))&&a.type==C&&a.Bc==bb)e=a.parent.c,a=new K,a.aa(e.uc,e.wg),b=new J(b,c,d),d=a.La(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor(0.5*(b+1)*e.width+0.5),c=Math.floor(0.5*(c+1)*e.height-1+0.5),e=[b,c,0.5*(d+1)];return e||m});
x("ogCalcDistanceWGS84",function(a,b,c,d){a=Fc*Math.acos(Math.sin(I(b))*Math.sin(I(d))+Math.cos(I(b))*Math.cos(I(d))*Math.cos(I(c-a)));isNaN(a)&&(a=0);return a});
